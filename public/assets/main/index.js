System.register("chunks:///_virtual/ActionHelp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SoundContoller.ts"],(function(t){var n,e,o,i,a,r,l,c,u,s,d,p,f;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,l=t.Node,c=t.sp,u=t.tween,s=t.Vec3,d=t.isValid,p=t.Component},function(t){f=t.SoundController}],execute:function(){var b,S,h,F,g,y,A,v,m,z,w,E,k,N,R,X,H,I,C,_,B,D,L;a._RF.push({},"a4788iYEaFEu4fiQ1ENrV+a","ActionHelp",void 0);var V=r.ccclass,x=r.property;t("ActionHelp",(b=V("ActionHelp"),S=x(l),h=x(l),F=x(l),g=x(l),y=x(l),A=x(l),v=x(l),m=x(l),z=x(c.Skeleton),w=x(c.Skeleton),b((N=n((k=function(t){function n(){for(var n,e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return n=t.call.apply(t,[this].concat(a))||this,o(n,"nodeStartFontbg0",N,i(n)),o(n,"nodeStartFontbg1",R,i(n)),o(n,"nodeEndFontbg0",X,i(n)),o(n,"nodeEndFontbg1",H,i(n)),o(n,"nodeFont0",I,i(n)),o(n,"nodeFont1",C,i(n)),o(n,"nodeFont2",_,i(n)),o(n,"nodeFont3",B,i(n)),o(n,"skStartXiazhu",D,i(n)),o(n,"skStopXiazhu",L,i(n)),n}e(n,t);var a=n.prototype;return a.onLoad=function(){},a.start=function(){this.node.setSiblingIndex(1e4)},a.StartCompareAction=function(){this.nodeStartFontbg0.active=!0,this.nodeStartFontbg1.active=!0;var t=this;u(this.nodeStartFontbg0).parallel(u().to(.3,{position:new s(52,this.nodeStartFontbg0.position.y,0)}),u().call((function(){f.getInstance().playSound("ShowTip")}))).call((function(){t.SetStartFontAction()})).start(),u(this.nodeStartFontbg1).to(.3,{position:new s(-62,this.nodeStartFontbg1.position.y,0)}).start()},a.SetStartFontAction=function(){this.nodeFont0.active=!0,this.nodeFont1.active=!0,this.nodeFont0.setScale(1,0,1),this.nodeFont1.setScale(1,0,1);var t=this;u(this.nodeFont0).to(.3,{scale:new s(1,1,1)}).delay(.6).call((function(){t.ResetAllStartNodeAction()})).start(),u(this.nodeFont1).to(.3,{scale:new s(1,1,1)}).start()},a.ResetAllStartNodeAction=function(){},a.ResetAllStartNode=function(){},a.StartGameEndAction=function(t){},a.SetGameEndFontAction=function(t){this.nodeFont2.active=!0,this.nodeFont3.active=!0,this.nodeFont2.setScale(1,0,1),this.nodeFont3.setScale(1,0,1);var n=this;u(this.nodeFont2).to(.3,{scale:new s(1,1,1)}).delay(1.5).call((function(){d(t)&&t(n),n.ResetAllEndNodeAction()})).start(),u(this.nodeFont3).to(.3,{scale:new s(1,1,1)}).start()},a.ResetAllEndNodeAction=function(){},a.ResetAllEndNode=function(){},a.playStartXiazhuAnimation=function(t){var n=this.skStartXiazhu;n.node.active=!0,n.setAnimation(0,"Animation1",!1),f.getInstance().playSound("StartBet"),n.scheduleOnce((function(){n.node.active=!1,t()}),2)},a.playStopXiazhuAnimation=function(t){var n=this.skStartXiazhu;n.node.active=!0,n.setAnimation(0,"Animation2",!1),f.getInstance().playSound("StopBet"),n.scheduleOnce((function(){n.node.active=!1,t()}),2)},n}(p)).prototype,"nodeStartFontbg0",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=n(k.prototype,"nodeStartFontbg1",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=n(k.prototype,"nodeEndFontbg0",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=n(k.prototype,"nodeEndFontbg1",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=n(k.prototype,"nodeFont0",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=n(k.prototype,"nodeFont1",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=n(k.prototype,"nodeFont2",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=n(k.prototype,"nodeFont3",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=n(k.prototype,"skStartXiazhu",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=n(k.prototype,"skStopXiazhu",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=k))||E));a._RF.pop()}}}));

System.register("chunks:///_virtual/Actions.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FetchProvider.ts","./config.ts"],(function(e){var t,r,n,u,c,a,o,s;return{setters:[function(e){t=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){n=e.cclegacy,u=e.assetManager,c=e.SpriteFrame,a=e.Texture2D},function(e){o=e.fetchProvide},function(e){s=e.default}],execute:function(){n._RF.push({},"dc381JA/E1HuITsGtKCWSFO","Actions",void 0);e("fetchNews",function(){var e=t(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o("/front/game/reward_record","POST");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),e("fetchUserToken",function(){var e=t(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o("/oauth2/code","POST",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e("RefreshToken",function(){var e=t(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o("/refresh-token","POST",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e("fetchUserInfo",function(){var e=t(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o("/cocos/user/info","POST",{},{Authorization:"Bearer "+t,"Content-Type":"application/json",Accept:"*/*"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e("loginPost",function(){var e=t(r().mark((function e(t,n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o("/login","POST",{username:t,password:n},{"Content-Type":"application/json",Accept:"*/*"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),e("musicSwitch",function(){var e=t(r().mark((function e(t,n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o("/cocos/user/upload-music","POST",{val:t?"1":"0"},{"Content-Type":"application/json",Authorization:"Bearer "+n});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,r){return e.apply(this,arguments)}}()),e("soundSwitch",function(){var e=t(r().mark((function e(t,n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o("/cocos/user/upload-sound","POST",{val:t?"1":"0"},{"Content-Type":"application/json",Authorization:"Bearer "+n});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,r){return e.apply(this,arguments)}}()),e("fetchDrawLog",function(){var e=t(r().mark((function e(t,n,u,c,a){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o("/cocos/game/draw-log","POST",0!==a?{page_num:t,limit:n,gid:u,ymd:c,period:a}:{page_num:t,limit:n,gid:u,ymd:c});case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",{code:-1});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,r,n,u,c){return e.apply(this,arguments)}}()),e("fetchBetLog",function(){var e=t(r().mark((function e(t,n,u,c,a){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===a&&(a=17),e.prev=1,e.next=4,o("/cocos/game/bet-log","POST",{page_num:t,limit:n,ymd:u,gid:a},{"Content-Type":"application/json",Authorization:"Bearer "+c});case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",{code:-1});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,r,n,u,c){return e.apply(this,arguments)}}()),e("fetchAvatarSprite",(function(e,t){u.loadRemote(""+s.avatarUrl+e,(function(e,r){if(e)t(null);else{var n=new c,u=new a;u.image=r,n.texture=u,t(n)}}))}));n._RF.pop()}}}));

System.register("chunks:///_virtual/ActionScript.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FetchProvider.ts"],(function(r){var e,t,n,o;return{setters:[function(r){e=r.asyncToGenerator,t=r.regeneratorRuntime},function(r){n=r.cclegacy},function(r){o=r.fetchProvide}],execute:function(){n._RF.push({},"ae14c8nS45Co4eQvQ9GwC3p","ActionScript",void 0);r("fetchRoomCats",function(){var r=e(t().mark((function r(e){var n;return t().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o("/cocos/niu/room-cat","POST",e);case 3:if(0!==(n=r.sent).code){r.next=6;break}return r.abrupt("return",{code:0,data:n.data});case 6:return r.abrupt("return",{code:-1});case 9:return r.prev=9,r.t0=r.catch(0),console.log("error",r.t0),r.abrupt("return",{code:-1});case 13:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(e){return r.apply(this,arguments)}}()),r("fetchRooms",function(){var r=e(t().mark((function r(e){var n;return t().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o("/cocos/niu/room","POST",e);case 3:if(0!==(n=r.sent).code){r.next=6;break}return r.abrupt("return",{code:0,data:n.data});case 6:return r.abrupt("return",{code:-1});case 9:return r.prev=9,r.t0=r.catch(0),console.log("error",r.t0),r.abrupt("return",{code:-1});case 13:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(e){return r.apply(this,arguments)}}()),r("fetchUserRooms",function(){var r=e(t().mark((function r(e,n){var c;return t().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o("/cocos/game/my-rooms","POST",{gid:n},{"Content-Type":"application/json",Authorization:"Bearer "+e});case 3:return c=r.sent,r.abrupt("return",c);case 7:return r.prev=7,r.t0=r.catch(0),console.log(r.t0),r.abrupt("return",{code:-1});case 11:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(e,t){return r.apply(this,arguments)}}()),r("fetchCreateRoom",function(){var r=e(t().mark((function r(e,n){var c;return t().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o("/cocos/game/room-add","POST",e,{"Content-Type":"application/json",Authorization:"Bearer "+n});case 3:return c=r.sent,r.abrupt("return",c);case 7:return r.prev=7,r.t0=r.catch(0),console.log(r.t0),r.abrupt("return",{code:-1});case 11:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(e,t){return r.apply(this,arguments)}}()),r("fetchJoinRoom",function(){var r=e(t().mark((function r(e,n){var c;return t().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o("/cocos/game/room-join","POST",{password:e},{"Content-Type":"application/json",Authorization:"Bearer "+n});case 3:return c=r.sent,r.abrupt("return",c);case 7:return r.prev=7,r.t0=r.catch(0),console.log(r.t0),r.abrupt("return",{code:-1});case 11:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(e,t){return r.apply(this,arguments)}}()),r("fetchDeleteRoom",function(){var r=e(t().mark((function r(e,n){var c;return t().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o("/cocos/game/room-dissolve","POST",{id:e},{"Content-Type":"application/json",Authorization:"Bearer "+n});case 3:return c=r.sent,r.abrupt("return",c);case 7:return r.prev=7,r.t0=r.catch(0),console.log(r.t0),r.abrupt("return",{code:-1});case 11:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(e,t){return r.apply(this,arguments)}}());n._RF.pop()}}}));

System.register("chunks:///_virtual/ApplyItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./utils.ts"],(function(e){var t,r,i,n,a,l,o,u,s,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,l=e._decorator,o=e.Label,u=e.Node,s=e.Component},function(e){p=e.onIntScore}],execute:function(){var c,m,b,f,y,g,h,k,v,d,z,A,I;a._RF.push({},"2127bkKAGJC/o2cOYADKTm6","ApplyItem",void 0);var w=l.ccclass,L=l.property;e("ApplyItem",(c=w("ApplyItem"),m=L(o),b=L(o),f=L(u),y=L(u),g=L(o),c((v=t((k=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];return t=e.call.apply(e,[this].concat(a))||this,i(t,"amountL",v,n(t)),i(t,"userName",d,n(t)),i(t,"self",z,n(t)),i(t,"markBanker",A,n(t)),i(t,"rank",I,n(t)),t}return r(t,e),t.prototype.bindItemData=function(e,t,r,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),null!=t&&(this.userName.string=t),this.amountL.string=p(r),this.rank.string=""+(e+1),this.self.active=i,this.markBanker.active=n},t}(s)).prototype,"amountL",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=t(k.prototype,"userName",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(k.prototype,"self",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=t(k.prototype,"markBanker",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=t(k.prototype,"rank",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=k))||h));a._RF.pop()}}}));

System.register("chunks:///_virtual/ApplyView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CustomEdit.ts","./Store.ts","./utils.ts","./ApplyItem.ts","./NetworkManager.ts"],(function(n){var t,e,i,r,a,o,u,l,s,p,c,b,m,f,d,h,y,w,A,k,g;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,i=n.initializerDefineProperty,r=n.assertThisInitialized,a=n.extends},function(n){o=n.cclegacy,u=n._decorator,l=n.ScrollView,s=n.Prefab,p=n.Label,c=n.Node,b=n.Vec3,m=n.tween,f=n.instantiate,d=n.UITransform,h=n.Component},function(n){y=n.CustomEdit},function(n){w=n.Store},function(n){A=n.onIntScore},function(n){k=n.ApplyItem},function(n){g=n.NetworkManager}],execute:function(){var v,B,I,z,R,L,C,D,S,N,E,T,x,P,V,H,M,O,_,q,F,G,j,J,U,K,Q,W,X,Y,Z,$,nn,tn,en,rn,an,on,un,ln,sn,pn,cn,bn,mn,fn;o._RF.push({},"af713TzP+9GMId88SoPHfGp","ApplyView",void 0);var dn=u.ccclass,hn=u.property,yn=w.getInstance();n("ApplyView",(v=dn("ApplyView"),B=hn(l),I=hn(s),z=hn(y),R=hn(y),L=hn(p),C=hn(p),D=hn(p),S=hn(c),N=hn(c),E=hn(c),T=hn(c),x=hn(c),P=hn(c),V=hn(c),H=hn(p),M=hn(p),O=hn(p),_=hn(c),q=hn(c),F=hn(p),v((J=t((j=function(n){function t(){for(var t,e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];return t=n.call.apply(n,[this].concat(a))||this,i(t,"scrApplyList",J,r(t)),i(t,"applyItem",U,r(t)),i(t,"bankerAmountE",K,r(t)),i(t,"wantAmountE",Q,r(t)),i(t,"applyAmountL",W,r(t)),i(t,"applywantAmountL",X,r(t)),i(t,"applywantRound",Y,r(t)),i(t,"applyNode",Z,r(t)),i(t,"overNode",$,r(t)),i(t,"applyBg",nn,r(t)),i(t,"applyBtn",tn,r(t)),i(t,"cancelBtn",en,r(t)),i(t,"overBtnDisable",rn,r(t)),i(t,"overBtn",an,r(t)),i(t,"bankerRank",on,r(t)),i(t,"currentRound",un,r(t)),i(t,"targetRound",ln,r(t)),i(t,"IsBankerRound",sn,r(t)),i(t,"InBankerList",pn,r(t)),i(t,"noti",cn,r(t)),i(t,"bankers",bn,r(t)),i(t,"wantAmount",mn,r(t)),i(t,"wantRound",fn,r(t)),t.minAmount=3e3,t.bankerAmount=3e3,t.stepAmount=10,t.unsubscribeHistory=void 0,t}e(t,n);var o=t.prototype;return o.onLoad=function(){this.node.active=!1;var n=this.node.getChildByName("content");n.scale=new b(.2,.2,1),this.node.active=!0,m(n).to(.3,{scale:new b(.6,.6,.6)},{easing:"backOut"}).call((function(){})).start()},o.start=function(){var n=this;this.unsubscribeHistory=[yn.subscribeToSelector((function(n){return n.bankers}),(function(){n.bindData()})),yn.subscribeToSelector((function(n){return n.auth}),(function(){n.bindData()})),yn.subscribeToSelector((function(n){return n.roundinfo}),(function(){n.bindData()}))],this.bindData();var t=JSON.parse(localStorage.getItem("catData")||"{}");this.minAmount=t.bankerMinAmount||100,this.bankerAmount=this.minAmount,this.wantAmount=this.minAmount;var e=yn.getState().room;this.stepAmount=e.bankerStepAmount,this.noti.string="上庄资金小于 "+this.minAmount+" 自动下庄",this.bankerAmountE&&this.bankerAmountE.bindData({min:this.minAmount,max:0,step:this.stepAmount,value:this.bankerAmount,onChange:function(t){n.bankerAmount=t},key:"bankerAmount"}),this.wantAmountE&&this.wantAmountE.bindData({min:this.minAmount,max:0,step:this.stepAmount,value:this.wantAmount,onChange:function(t){n.wantAmount=t},key:"wantAmount"})},o.onChooseRound=function(n,t){this.wantRound=Number(t)},o.onApplyBanker=function(n,t){this.bankerAmount>=this.minAmount&&g.instance.emitBankerRequest(100*this.bankerAmount,100*this.wantAmount,this.wantRound)},o.onCancelBanker=function(n,t){g.instance.emitBankerCancelRequest()},o.onOverBanker=function(n,t){g.instance.emitOverBankerRequest()},o.bindData=function(){var n=this,t=yn.getState(),e=t.bankers,i=t.auth.user.userId===t.roundinfo.bankerId,r=-1!==e.findIndex((function(n){return n.userId===t.auth.user.userId}));r?(i?(this.cancelBtn.active=!1,t.roundinfo.round===t.roundinfo.roundCount?(this.overBtn.active=!0,this.overBtnDisable.active=!1):t.roundinfo.round<t.roundinfo.roundCount&&(this.overBtn.active=!1,this.overBtnDisable.active=!0)):(this.cancelBtn.active=!0,this.overBtnDisable.active=!1,this.overBtn.active=!1),this.IsBankerRound.active=i,this.InBankerList.active=!i):(this.IsBankerRound.active=!1,this.InBankerList.active=!1),this.overNode.active=r,this.applyBg.active=!r,this.applyNode.active=!r,this.bankers=e.map((function(e,o){var u=t.players.findIndex((function(n){return n.userId==e.userId})),l=e.userId===t.auth.user.userId,s=e.userId===t.roundinfo.bankerId;return r&&l&&(n.applyAmountL.string=A(e.amount),n.applywantAmountL.string=A(e.wantAmount),n.applywantRound.string=e.wantTimes+"局",i||(n.bankerRank.string=""+o)),-1!==u?a({},e,t.players[u],{isSelf:l,isBanker:s}):a({},e,{nickname:e.username,isSelf:l,isBanker:s})})),this.currentRound.string=""+t.roundinfo.round,this.targetRound.string=""+t.roundinfo.roundCount,this.updateApplyList()},o.updateApplyList=function(){var n=this.scrApplyList.content;n.removeAllChildren();for(var t=0;t<this.bankers.length;t++){var e=f(this.applyItem),i=n.getComponent(d).width/e.getComponent(d).width;e.scale=new b(i,i),n.addChild(e),e.getComponent(k).bindItemData(t,this.bankers[t].nickname,this.bankers[t].amount,this.bankers[t].isSelf,this.bankers[t].isBanker)}},o.onDestroy=function(){this.unsubscribeHistory.forEach((function(n){return n()}))},o.onClose=function(){this.node.removeFromParent()},t}(h)).prototype,"scrApplyList",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(j.prototype,"applyItem",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(j.prototype,"bankerAmountE",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=t(j.prototype,"wantAmountE",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=t(j.prototype,"applyAmountL",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(j.prototype,"applywantAmountL",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(j.prototype,"applywantRound",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(j.prototype,"applyNode",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=t(j.prototype,"overNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nn=t(j.prototype,"applyBg",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tn=t(j.prototype,"applyBtn",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),en=t(j.prototype,"cancelBtn",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rn=t(j.prototype,"overBtnDisable",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),an=t(j.prototype,"overBtn",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),on=t(j.prototype,"bankerRank",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),un=t(j.prototype,"currentRound",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ln=t(j.prototype,"targetRound",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sn=t(j.prototype,"IsBankerRound",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pn=t(j.prototype,"InBankerList",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cn=t(j.prototype,"noti",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bn=t(j.prototype,"bankers",[hn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),mn=t(j.prototype,"wantAmount",[hn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3e3}}),fn=t(j.prototype,"wantRound",[hn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),G=j))||G));o._RF.pop()}}}));

System.register("chunks:///_virtual/BaccaratGame.ts",["./rollupPluginModLoBabelHelpers.js","cc","./types.ts","./BaccaratView.ts","./Store.ts","./NetworkManager.ts","./ToastManager.ts"],(function(t){var e,n,o,i,a,s,r,u,c,l,d,h,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized,a=t.extends},function(t){s=t.cclegacy,r=t._decorator,u=t.Component},function(t){c=t.GameStatus},function(t){l=t.BaccaratView},function(t){d=t.Store},function(t){h=t.NetworkManager},function(t){f=t.ToastManager}],execute:function(){var p,v,g,b,I;s._RF.push({},"7e444pj+t1DeL04bLucv5tv","BaccaratGame",void 0);var m=r.ccclass,w=r.property,T=d.getInstance();t("BaccaratGame",(p=m("BaccaratGame"),v=w(l),p((I=e((b=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))||this).gameStatus=c.STOPPED,e.startTime=0,e.placeId=null,o(e,"viewjs",I,i(e)),e.selectedChip=void 0,e.bets=[],e.metadata={room_id:"",WAIT_TIME:5e3,BETTING_TIME:3e4,CALCULATION_TIME:3e4,PLAYER_COUNT:0},e.cleanup=void 0,e.loading=!0,e}n(e,t);var s=e.prototype;return s.start=function(){this.viewjs.gameEngineJs=this,this.setupSubscription()},s.setupSubscription=function(){var t=this,e=[T.subscribeToSelector((function(t){return t.auth.user}),(function(){var e=T.getState();t.viewjs.updateUserInfo(e.auth.user),console.log("Auth user state updated")})),T.subscribeToSelector((function(t){return t.room}),(function(){var e=T.getState();t.viewjs.setChipInfo(e.room.chip),t.viewjs.showRoomInfo(T.getState().room),console.log("Room state updated")})),T.subscribeToSelector((function(t){return t.bankers}),(function(){t.updateBankerInfo()})),T.subscribeToSelector((function(t){return t.roundinfo}),(function(){t.updateBankerInfo()})),T.subscribeToSelector((function(t){return t.metadata}),(function(){var e=T.getState();t.metadata=e.metadata,console.log("Metadata state updated")})),T.subscribeToSelector((function(t){return t.roundinfo}),(function(){var e=T.getState();t.viewjs.updateRoundInfo(e.roundinfo.period,e.roundinfo.round,e.roundinfo.roundCount),console.log("RoundInfo state updated")}))];this.cleanup=function(){return e.forEach((function(t){return t()}))}},s.updateBankerInfo=function(){var t,e=T.getState();console.log("Round info state updated"),e.roundinfo.bankerId?((t=e.players.find((function(t){return t.userId===e.roundinfo.bankerId})))||(t=e.bankers.find((function(t){return t.userId===e.roundinfo.bankerId}))),this.viewjs.updateBankerInfo(a({},t,{balance:e.roundinfo.amount}))):this.viewjs.updateBankerInfo(null)},s.handleStatus=function(t){var e=t.status,n=t.dt;console.log(n),this.startTime=Date.now()-n;var o=this.startTime;switch(this.viewjs.onReSetView(e),e){case c.STOPPED:this.bets=[];break;case c.WAITING:this.bets=[],o+=this.metadata.WAIT_TIME;break;case c.BETTING:this.loading||this.viewjs.onBetBegin((function(){})),o+=this.metadata.BETTING_TIME;break;case c.CALCULATING:this.loading||this.viewjs.onBetFinish((function(){})),o+=this.metadata.CALCULATION_TIME}this.gameStatus=e,this.viewjs.gameTimer.setStatus(o,e),console.log("updated status",t),this.loading=!1},s.onClickChip=function(t,e){this.selectedChip!==t?(this.selectedChip=t,e&&e(!0)):(this.selectedChip=void 0,e&&e(!1))},s.onPlaceBet=function(t,e){if(e&&e(),t&&"string"==typeof t&&(this.placeId=t),void 0===this.selectedChip)return f.show("please_choose_a_chip");h.instance.placeBet(this.placeId,this.selectedChip)},s.setBets=function(t){this.bets=t;var e=T.getState();this.viewjs.setPlaceBets(t),this.viewjs.updateBetScores(this.bets,e.auth.user.userId)},s.onBet=function(t){var e=T.getState(),n=!1;""!==e.auth.user.userId&&t.uid==e.auth.user.userId&&(n=!0),this.bets.push(t),this.viewjs.showChipAnimation(t,n),this.viewjs.updateBetScores(this.bets,e.auth.user.userId)},s.onShowResult=function(t,e,n,o,i,a,s,r,u){var c=this;if(console.log(r),2===r){var l;u();var d={},h=T.getState(),p=null==h||null==(l=h.auth)||null==(l=l.user)?void 0:l.userId;for(var v in t){var g=t[v];for(var b in g)d[b]=(d[b]||0)+g[b]}for(var I={},m=0;m<this.bets.length;m++){var w,S=this.bets[m];I[S.place]=(I[S.place]||0)+((null==(w=h.room)?void 0:w.chip[S.chip])||0)}var j=p&&t[p]||{};this.viewjs.onGameEndJettonAction(d,I,j,(function(){console.log("end end jetton"),f.show("开牌失败， 退本金"),c.bets=[]}))}else this.viewjs.showDealAnimation(e,n,s,(function(){var e,n={},i=T.getState(),s=null==i||null==(e=i.auth)||null==(e=e.user)?void 0:e.userId,r=0,u=c.bets.filter((function(t){return t.uid===s})).reduce((function(t,e){var n;return t+((null==(n=i.room)?void 0:n.chip[e.chip])||0)}),0);for(var l in t){var d=t[l];for(var h in d)r+=d[h],n[h]=(n[h]||0)+d[h]}for(var f={},p=0;p<c.bets.length;p++){var v,g=c.bets[p];f[g.place]=(f[g.place]||0)+((null==(v=i.room)?void 0:v.chip[g.chip])||0)}c.viewjs.showGameResult(o,r-u,a);var b=s&&t[s]||{};c.viewjs.onGameEndJettonAction(n,f,b,(function(){console.log("end end jetton"),c.bets=[]}))})),u()},s.onDestroy=function(){this.cleanup&&this.cleanup()},e}(u)).prototype,"viewjs",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=b))||g));s._RF.pop()}}}));

System.register("chunks:///_virtual/BaccaratView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./types.ts","./FrameUser.ts","./CardNode.ts","./utils.ts","./TimeCount.ts","./ActionHelp.ts","./Jetton.ts","./SoundContoller.ts","./ToastManager.ts","./LoadingManager.ts","./EndScore.ts","./RoomInfoView.ts","./Store.ts"],(function(e){var t,n,i,o,a,r,l,s,c,h,u,d,p,f,m,b,g,y,v,w,C,A,P,S,k,B,N,T,E,_,J,H,z,M,I,L;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,l=e.Node,s=e.Prefab,c=e.Label,h=e.NodePool,u=e.game,d=e.Game,p=e.Tween,f=e.instantiate,m=e.Vec3,b=e.Sprite,g=e.tween,y=e.UITransform,v=e.v3,w=e.Vec2,C=e.director,A=e.Component},function(e){P=e.GameStatus},function(e){S=e.FrameUser},function(e){k=e.CardNode},function(e){B=e.formatChipValue,N=e.CardListData},function(e){T=e.TimeCount},function(e){E=e.ActionHelp},function(e){_=e.Jetton},function(e){J=e.SoundController},function(e){H=e.ToastManager},function(e){z=e.LoadingManager},function(e){M=e.EndScore},function(e){I=e.RoomInfoView},function(e){L=e.Store}],execute:function(){var G,R,V,D,x,W,U,j,F,O,K,X,q,Q,Y,Z,$,ee,te,ne,ie,oe,ae,re,le,se,ce,he,ue,de,pe,fe,me,be,ge,ye,ve,we,Ce,Ae,Pe,Se,ke,Be,Ne,Te,Ee,_e,Je,He,ze,Me,Ie,Le,Ge,Re,Ve,De,xe,We,Ue,je,Fe,Oe,Ke,Xe,qe,Qe,Ye,Ze,$e,et,tt,nt,it,ot,at,rt,lt,st,ct,ht,ut,dt,pt,ft,mt,bt,gt;a._RF.push({},"ae332eAybREdo4B1fvyT9/D","BaccaratView",void 0);var yt=L.getInstance(),vt=r.ccclass,wt=r.property,Ct={0:"Player",1:"Banker",2:"BPair",3:"PPair",4:"Tie"},At={Player:0,Banker:1,BPair:2,PPair:3,Tie:4},Pt=(e("BaccaratView",(G=vt("BaccaratView"),R=wt([l]),V=wt(S),D=wt(S),x=wt(l),W=wt(l),U=wt(l),j=wt(l),F=wt(s),O=wt(l),K=wt(T),X=wt(c),q=wt(c),Q=wt(c),Y=wt(c),Z=wt([l]),$=wt([c]),ee=wt([l]),te=wt(l),ne=wt(c),ie=wt(c),oe=wt(l),ae=wt(l),re=wt(l),le=wt(s),se=wt(l),ce=wt(l),he=wt(l),ue=wt(s),de=wt(s),pe=wt(s),fe=wt(s),me=wt(l),be=wt(s),ge=wt(s),ye=wt(s),ve=wt(s),we=wt(s),Ce=wt(s),Ae=wt(l),Pe=wt(s),Se=wt(l),ke=wt(s),Be=wt(l),G((Ee=t((Te=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,i(t,"chipBtns",Ee,o(t)),i(t,"myUserNode",_e,o(t)),i(t,"BankerNode",Je,o(t)),i(t,"noBanker",He,o(t)),i(t,"UsersNode",ze,o(t)),i(t,"PlayerHandNode",Me,o(t)),i(t,"BankerHandNode",Ie,o(t)),i(t,"CardPrefab",Le,o(t)),i(t,"nodeStartCard",Ge,o(t)),i(t,"gameTimer",Re,o(t)),i(t,"roomKey",Ve,o(t)),i(t,"roomId",De,o(t)),i(t,"periodL",xe,o(t)),i(t,"roundL",We,o(t)),i(t,"betPlaceAreas",Ue,o(t)),i(t,"placeScores",je,o(t)),i(t,"effects",Fe,o(t)),i(t,"resultTip",Oe,o(t)),i(t,"PlayerScore",Ke,o(t)),i(t,"BankerScore",Xe,o(t)),i(t,"bankerC",qe,o(t)),i(t,"playerC",Qe,o(t)),i(t,"compareAnim",Ye,o(t)),i(t,"Jetton",Ze,o(t)),i(t,"nodeNewArea",$e,o(t)),i(t,"toastContainer",et,o(t)),i(t,"loadingContainer",tt,o(t)),i(t,"toastPrefab",nt,o(t)),i(t,"loadingPrefab",it,o(t)),i(t,"settingModal",ot,o(t)),i(t,"helpModal",at,o(t)),i(t,"modalContainer",rt,o(t)),i(t,"winDialog",lt,o(t)),i(t,"lostDialog",st,o(t)),i(t,"applyView",ct,o(t)),i(t,"orderHistory",ht,o(t)),i(t,"bettingHistory",ut,o(t)),i(t,"roomInfoView",dt,o(t)),i(t,"resultContainer",pt,o(t)),i(t,"roadMap",ft,o(t)),i(t,"watStatus",mt,o(t)),t.winPlaces=void 0,t.JettonPool=void 0,t.GameActions=[],t.EndJettonAction=[],t.chips=[],t.bankerHand=[],t.playerHand=[],t.gameEngineJs=void 0,t.isAnimating=!1,t.gameEndCallback=void 0,t.sountTime=0,t.isPlayingSound=!1,t.bets=[],t.tweens=[],t.bankerCards=[],t.playerCards=[],i(t,"PlayerList",bt,o(t)),i(t,"PlayerListContain",gt,o(t)),t}n(t,e);var a=t.prototype;return a.onLoad=function(){this.JettonPool=new h,H.configure(this.toastContainer,this.toastPrefab),z.configure(this.loadingContainer,this.loadingPrefab)},a.onDestroy=function(){this.JettonPool.clear(),u.off(d.EVENT_HIDE,this.onPause,this),u.off(d.EVENT_SHOW,this.onResume,this)},a.start=function(){var e=this;this.chipBtns.forEach((function(t,n){t.on("click",(function(){e.onChipClicked(n)}))})),this.betPlaceAreas.forEach((function(t,n){t.on("click",(function(){e.gameEngineJs.onPlaceBet(Ct[n])}))})),u.on(d.EVENT_HIDE,this.onPause,this),u.on(d.EVENT_SHOW,this.onResume,this)},a.onPause=function(){p.stopAll(),this.isAnimating=!0,this.PlayerHandNode.removeAllChildren(),this.BankerHandNode.removeAllChildren(),this.nodeStartCard.removeAllChildren(),this.nodeNewArea.removeAllChildren(),this.GameActions=[],this.tweens.forEach((function(e){e.stop()})),this.tweens=[],this.betPlaceAreas.forEach((function(e){e.removeAllChildren()}))},a.onResume=function(){var e=this;p.stopAll(),this.isAnimating=!1,this.betPlaceAreas.forEach((function(e){e.removeAllChildren()})),this.tweens.forEach((function(e){e.stop()})),this.tweens=[],this.PlayerHandNode.removeAllChildren(),this.BankerHandNode.removeAllChildren(),this.nodeStartCard.removeAllChildren(),this.GameActions=[],this.updateScores(),this.effects.forEach((function(e){return e.active=!1})),this.resultTip.children.forEach((function(e){return e.active=!1})),this.nodeNewArea.removeAllChildren(),this.gameEngineJs.gameStatus===P.BETTING?this.setPlaceBets(this.bets):this.gameEngineJs.gameStatus===P.CALCULATING&&(this.setPlaceBets(this.bets),this.showDealAnimation(this.playerCards,this.bankerCards,!0,(function(){e.winPlaces&&e.showResultText(e.winPlaces),e.onShowWaitStatus()})))},a.update=function(e){if(this.sountTime>0&&(this.sountTime-=e,this.sountTime<0&&(this.sountTime=0)),this.EndJettonAction.length>0)for(var t=Math.min(30,this.EndJettonAction.length),n=0;n<t;n++){var i=this.EndJettonAction.shift();i&&i.act.target(i.node).start()}},a.onCreateJetton=function(){var e=null;return(e=f(this.Jetton)).getComponent(_).onResetJetton(),e},a.getBetAreaRandomVet3=function(e,t){void 0===e&&(e=90),void 0===t&&(t=90);var n=Math.random()*e-e/2,i=Math.random()*t-t/2;return new m(n,i)},a.getJettonAry=function(e){var t=e,n=[];console.log(t);for(var i=4;i>=0;i--){var o=this.chips[i];if(t/o>=1){for(var a=t/o,r=0;r<a;r++)n.push(i);t%=o}}return n},a.setChipInfo=function(e){this.chips=e;for(var t=0;t<this.chipBtns.length;t++)e[t]?(this.chipBtns[t].getChildByName("chipValue").active=!0,console.log(B(e[t]/100)),this.chipBtns[t].active=!0,this.chipBtns[t].getChildByName("chipValue").getComponent(c).string=B(e[t]/100)):this.chipBtns[t].active=!1},a.onChipClicked=function(e){var t=this;this.gameEngineJs.onClickChip(e,(function(n){t.chipBtns.forEach((function(t,i){i===e&&n?(t.getChildByName("chipSelect").active=!0,t.getComponent(b).grayscale=!1):(t.getChildByName("chipSelect").active=!1,t.getComponent(b).grayscale=!0)}))}))},a.updateUserInfo=function(e){this.myUserNode.setUserInfo(e,e.balance)},a.updateBankerInfo=function(e){e?(this.BankerNode.node.active=!0,this.BankerNode.setUserInfo(e,e.balance),this.noBanker.active=!1):(this.BankerNode.node.active=!1,this.noBanker.active=!0)},a.updateRoundInfo=function(e,t,n){this.periodL&&e&&(this.periodL.string=""+e),this.roundL&&n&&(this.roundL.string="连庄 "+t+"/"+n)},a.showRoomInfo=function(e){console.log("data-----\x3e",e),this.roomKey&&(this.roomKey.string=e.isPublic?"房间名: "+e.id:"房间ID: "+e.password),this.roomId&&(this.roomId.string=e.isPublic?"场次: "+e.catName:"创建者: "+e.username)},a.dealSingleCard=function(e,t,n,i,o){var a=this;this.tweens.push(g(this.node).delay(n).call((function(){if(a.node){i?a.playerHand.push(e):a.bankerHand.push(e);var n=f(a.CardPrefab),r=n.getComponent(k);r.SetCardData(.53,t,67);var l=n.getComponent(y).width+5;a.nodeStartCard.addChild(n);var s=2==t,c=i?a.PlayerHandNode:a.BankerHandNode,h=a.nodeStartCard.position,u=(i?s?-l/1.8:-l/2:s?l/1.8:l/2)*t,d=s?-l/9:0,p=v(c.position.x+u-h.x,c.position.y-h.y-d,0);a.tweens.push(g(n).to(.3,{position:p},{easing:"smooth"}).call((function(){a.node&&(a.nodeStartCard.removeChild(n),a.isAnimating||c.addChild(n),n.position=new m(u,d,0),a.tweens.push(g(n).to(.3,{scale:new m(0,.53,1),angle:s?i?45:-45:0},{easing:"smooth"}).call((function(){a.node&&(r.SetCardData(.53,t,N[13*e.suit+e.rank-1]),r.node.scale=new m(0,.53,1),a.updateScores(),a.playCardSound(t,i))})).to(.3,{scale:new m(.53,.53,1),angle:s?i?90:-90:0},{easing:"smooth"}).call(o).start()))})).start())}})).start())},a.showDealAnimation=function(e,t,n,i){if(n){this.bankerHand=t,this.playerHand=e;for(var o=0;o<3;o++){var a=2==o;if(e[o]){var r=e[o],l=f(this.CardPrefab),s=l.getComponent(k);s.SetCardData(.53,o,N[13*r.suit+r.rank-1]),s.node.scale=new m(.53,.53,1);var c=l.getComponent(y).width+5,h=(a?-c/1.8:-c/2)*o,u=a?-c/9:0;l.position=new m(h,u,0),a&&(l.angle=90),this.PlayerHandNode.addChild(l)}if(t[o]){var d=t[o],p=f(this.CardPrefab),b=p.getComponent(k);b.SetCardData(.53,o,N[13*d.suit+d.rank-1]),b.node.scale=new m(.53,.53,1);var g=p.getComponent(y).width+5,v=(a?g/1.8:g/2)*o,w=a?-g/9:0;p.position=new m(v,w,0),a&&(p.angle=-90),this.BankerHandNode.addChild(p)}}this.updateScores(),i()}else{if(this.bankerCards=t,this.playerCards=e,this.isAnimating)return i();this.bankerHand=[],this.playerHand=[];var C=0,A=0,P=e.length+t.length,S=function(){++A===P&&i()};this.tweens.forEach((function(e){return e.stop()})),this.PlayerHandNode.removeAllChildren(),this.BankerHandNode.removeAllChildren(),this.nodeStartCard.removeAllChildren();for(var B=0;B<3;B++)e[B]&&(this.dealSingleCard(e[B],B,C,!0,S),C+=.9),t[B]&&(this.dealSingleCard(t[B],B,C,!1,S),C+=.9)}},a.playCardSound=function(e,t){e<2?t?this.playSound("bjl_send_card_player"):this.playSound("bjl_send_card_banker"):2==e&&(t?this.playSound("bjl_player_add"):this.playSound("bjl_banker_add"))},a.showResultText=function(e){if(e.winner){var t;null==(t=this.resultTip)||t.children.forEach((function(e){return e.active=!1}));var n=this.resultTip.getChildByName(e.winner);n&&(n.active=!0)}},a.showGameResult=function(e,t,n){var i=this;if(this.isAnimating)this.winPlaces=e;else{this.showResultText(e);var o=0;setTimeout((function(){0===t&&0===n||i.onResultShoting(t,n)}),o-100);var a=function(e,t,n){void 0===n&&(n=0);var o=i.effects[At[e]];o&&(o.active=!0),t&&setTimeout((function(){return i.playSound(t)}),n)};e.winner&&(o+=1e3,a(e.winner,"bjl_"+e.winner.toLowerCase()+"_win",o),o+=800),e.playerPair&&(a("PPair","bjl_player_pair",o+=400),o+=900),e.bankerPair&&(a("BPair","bjl_banker_pair",o+=400),o+=900);var r=function(e,t,n){setTimeout((function(){i.playSound(e),setTimeout((function(){i.playSound("bjl_point_"+t)}),1e3)}),n)},l=this.calculateScore(this.playerHand),s=this.calculateScore(this.bankerHand);r("bjl_send_card_player",l,o+=100),r("bjl_send_card_banker",s,o+=1800)}},a.playSound=function(e){var t,n=this;this.isPlayingSound||(this.isPlayingSound=!0,null==(t=J.getInstance())||t.playSound(e),setTimeout((function(){n.isPlayingSound=!1}),150))},a.setPlaceBets=function(e){var t=this;this.bets=e,this.betPlaceAreas.forEach((function(e){e.removeAllChildren()})),e.forEach((function(e){var n=t.betPlaceAreas[At[e.place]];if(n){var i=n.getComponent(y),o=t.getBetAreaRandomVet3(.5*i.width,.5*i.height),a=t.onCreateJetton(),r=a.getComponent(_);r.onInitJetton(e.chip);var l=360*Math.random();a.setRotationFromEuler(0,0,l),n.addChild(a),a.setPosition(new m(o.x,o.y,0)),r.onGenFinishEvent()}}))},a.updateBetScores=function(e,t){var n=this,i=function(i){var o=e.filter((function(e){return e.place===i})).reduce((function(e,t){return e+n.chips[t.chip]}),0)/100,a=e.filter((function(e){return e.place===i&&e.uid===t})).reduce((function(e,t){return e+n.chips[t.chip]}),0)/100;n.placeScores[At[i]]&&o>0&&(n.placeScores[At[i]].string=a+"/"+o)};for(var o in At)i(o)},a.showChipAnimation=function(e,t){this.bets.push(e),this.onJettonAction(t?this.myUserNode.node:this.UsersNode,e.chip,At[e.place],(function(){}))},a.onJettonAction=function(e,t,n,i){var o=this;try{var a=this.betPlaceAreas[n];if(!a)return;var r=a.getComponent(y),l=a.getWorldPosition(),s=this.getBetAreaRandomVet3(.5*r.width,.5*r.height),c=this.onCreateJetton(),h=c.getComponent(_);h.onInitJetton(t);var u=e.getWorldPosition(),d=new m;this.nodeNewArea.inverseTransformPoint(d,u);var p=new m;l.add(v(s.x,s.y)),this.nodeNewArea.inverseTransformPoint(p,l);var f=m.distance(p,d)/2500,b=360*Math.random(),w=30*Math.random()+6;c.setRotationFromEuler(0,0,b),this.nodeNewArea.addChild(c),c.setPosition(d),this.tweens.push(g(c).parallel(g().to(.9*f,{position:p}),g().to(.9*f,{scale:new m(1,1,1)}),g().by(.9*f,{eulerAngles:new m(0,0,9*w)}),g().sequence(g().delay(f/2),g().call((function(){0==o.sountTime&&(J.getInstance().playSound("BRNN_ADDGOLD"),o.sountTime=.1)})))).to(.1*f,{scale:new m(1,1,1)}).by(.45*f,{eulerAngles:new m(0,0,Pt(45,90))}).call((function(){c.removeFromParent(),a.addChild(c),c.setPosition(new m(s.x,s.y,0)),h.onGenFinishEvent(),i&&i()})).start())}catch(e){console.log("err",e)}},a.onMoveJettonToBanker=function(e,t,n){var i=this,o=[],a={},r=!0,l=[];for(var s in At){var c=this.betPlaceAreas[At[s]];if(e[s])r=!1,l.push(s);else for(var h=0;h<c.children.length;h++){var u={nodeJetton:c.children[h],cbArea:s};o.push(u)}var d=this.BankerNode.node.getWorldPosition(new m),p=new m;c.inverseTransformPoint(p,d),a[s]=p}this.GameActions.push({type:"move_to_banker",jottons:o,targetPos:a,speed:1400,delete:!0,callback:function(o){i.GameActions.push({type:"action_at",delay:o}),r?i.GameActions.push({type:"show_score",winPlaces:e}):i.onMoveJettonToWinArea(l,e,t,n)}})},a.onMoveJettonToWinArea=function(e,t,n,i){var o=this,a=0;for(var r in t){var l=t[r]-(n[r]||0);l>0&&(a+=l)}var s=this.getJettonAry(a),c=this.BankerNode.node.getWorldPosition(),h=new m;this.nodeNewArea.inverseTransformPoint(h,c),this.GameActions.push({type:"move_to_area",initTarget:this.nodeNewArea,targetBanker:h,jottons:s,winAreas:e,speed:1400,callback:function(n){o.GameActions.push({type:"action_at",delay:n,callback:function(){o.onMoveJettonToWiner(e,t,i)}})}})},a.onLoadWinTarget=function(e,t){var n={};for(var i in At)n[i]=[],e[i]&&(t[i]&&t[i]==t[i]?n[i].push(this.myUserNode.node):t[i]?(n[i].push(this.myUserNode.node),n[i].push(this.UsersNode)):n[i].push(this.UsersNode));return n},a.onMoveJettonToWiner=function(e,t,n){var i=this,o=[],a=this.onLoadWinTarget(t,n),r={},l=0,s={};for(var c in At){r[c]=[];for(var h=0;h<a[c].length;h++){var u=a[c][h].getWorldPosition(),d=new m;this.betPlaceAreas[At[c]].inverseTransformPoint(d,u),r[c].push(d)}l=Math.max(l,this.betPlaceAreas[At[c]].children.length),s[c]=this.betPlaceAreas[At[c]].children.slice()}for(var p=0;p<l;p++)for(var f in s)s[f].length>0&&o.push({nodeJetton:s[f].pop(),cbArea:f});o.length&&this.GameActions.push({type:"move_to_winner",jottons:o,targetNodes:a,targetPos:r,speed:1300,delay:.002,actionTime:1.3,callback:function(e){i.GameActions.push({type:"action_at",delay:e}),i.GameActions.push({type:"show_score",winPlaces:t})}})},a.onGameEndCallBack=function(){this.gameEndCallback&&(this.GameActions.push({type:"end_call_back",callback:this.gameEndCallback}),this.gameEndCallback=null,this.betPlaceAreas.forEach((function(e){e.removeAllChildren()})),this.nodeNewArea.removeAllChildren())},a.onActionBegan=function(){var e=this;try{if(this.GameActions.length>0){var t=this.GameActions.shift();if("move_to_banker"==t.type){for(var n=t.targetPos,i=t.jottons,o=t.speed,a=t.delete,r=t.callback,l=0,s=function(t){var r=i[t],s=new w(r.nodeJetton.position.x,r.nodeJetton.position.y),c=n[r.cbArea],h=s.subtract(new w(c.x,c.y)).length()/o;l=Math.max(l,h),g(r.nodeJetton).call((function(){0===t&&J.getInstance().playSound("MoveJetton")})).to(l,{position:c}).call((function(t){a&&e.onPutJetton(t)})).start()},c=0;c<i.length;c++)s(c);r&&r(l+.2),this.onActionBegan()}else if("move_to_area"===t.type){for(var h=t.initTarget,u=t.targetBanker,d=t.jottons,p=t.winAreas,f=t.speed,b=t.callback,y=0,C=function(t){var n=e.onCreateJetton();n.getComponent(_).onInitJetton(d[t]),h.addChild(n),n.setPosition(u);var i=p[Math.floor(Math.random()*p.length)],o=e.getBetAreaRandomVet3(),a=e.betPlaceAreas[At[i]].getWorldPosition(),r=new m;a.add(v(o.x,o.y)),h.inverseTransformPoint(r,a);var l=m.distance(r,u)/f;y=Math.max(y,l),g(n).call((function(){0===t&&J.getInstance().playSound("MoveJetton")})).to(l,{position:r}).call((function(){n.parent=e.betPlaceAreas[At[i]],n.setPosition(o)})).start()},A=0;A<d.length;A++)C(A);console.log("betPlaceAreas",this.betPlaceAreas.map((function(e){return e.children.length}))),b&&b(y+.2),this.onActionBegan()}else if("move_to_winner"===t.type){var P=t.jottons,S=t.targetNodes,k=t.targetPos,B=t.speed,N=t.delay,T=(t.actionTime,t.callback),E=0,H={};for(var z in S)H[z]=0;for(var M=function(t){var n=0,i=P[t];n=t<S[i.cbArea].length?t:Math.floor(Math.random()*S[i.cbArea].length);var o=N*H[n];H[n]++;H[n];var a=k[i.cbArea][n],r=new w(a.x-i.nodeJetton.position.x,a.y-i.nodeJetton.position.y).length()/B;E=Math.max(E,r+N);var l=g().delay(o).call((function(e){0===t&&J.getInstance().playSound("MoveJetton"),e.getComponent(_).onMoveEvent()})).to(r,{position:a},{easing:"backIn"}).call((function(t){e.onPutJetton(t)}));e.EndJettonAction.push({node:i.nodeJetton,act:l})},I=0;I<P.length;I++)M(I);T&&T(E+.2),this.onActionBegan()}else if("show_score"==t.type)this.onGameEndCallBack(),this.onActionBegan();else if("action_at"==t.type){var L=t.delay,G=t.callback;g(this.node).delay(L).call((function(){G&&G(self),e.onActionBegan()})).start()}else(t.type="end_call_back")&&(null==t||t.callback())}}catch(e){console.log("error",e)}},a.onPutJetton=function(e){this.JettonPool.put(e)},a.onGameEndJettonAction=function(e,t,n,i){this.gameEndCallback=i,this.onMoveJettonToBanker(e,t,n),this.onActionBegan()},a.onReSetView=function(e){var t=this;if(e===P.STOPPED)return this.onShowWaitStatus(),this.betPlaceAreas.forEach((function(e){e.removeAllChildren()})),void(this.bets=[]);setTimeout((function(){t.onHideWaitStatus()}),700),this.winPlaces=null,this.PlayerHandNode.removeAllChildren(),this.BankerHandNode.removeAllChildren(),this.nodeStartCard.removeAllChildren(),this.playerHand=[],this.bankerHand=[],this.effects.forEach((function(e){return e.active=!1})),this.resultTip.children.forEach((function(e){return e.active=!1})),this.updateScores(),e!==P.WAITING&&e!==P.BETTING||(this.betPlaceAreas.forEach((function(e){e.removeAllChildren()})),this.GameActions=[],this.nodeNewArea.removeAllChildren(),this.bets=[])},a.updateScores=function(){var e=this.calculateScore(this.bankerHand),t=this.calculateScore(this.playerHand);this.BankerScore&&(this.BankerScore.string=""+e,this.bankerC.active=!0),this.PlayerScore&&(this.PlayerScore.string=""+t,this.playerC.active=!0),this.bankerHand.length||(this.BankerScore.string="",this.bankerC.active=!1),this.playerHand.length||(this.PlayerScore.string="",this.playerC.active=!1)},a.calculateScore=function(e){return e.reduce((function(e,t){return e+(t.rank>10?0:t.rank)}),0)%10},a.onBetBegin=function(e){this.isAnimating||this.compareAnim.getComponent(E).playStartXiazhuAnimation(e)},a.onBetFinish=function(e){this.isAnimating||this.compareAnim.getComponent(E).playStopXiazhuAnimation(e)},a.onShowWaitStatus=function(){this.watStatus&&(this.watStatus.active=!0)},a.onHideWaitStatus=function(){this.watStatus&&(this.watStatus.active=!1)},a.onShowPlayerList=function(){if(this.PlayerListContain.children.length)this.PlayerListContain.children[0].active=!0;else{var e=f(this.PlayerList);this.PlayerListContain.addChild(e)}},a.onShowSettingModal=function(){var e=f(this.settingModal);this.modalContainer.addChild(e)},a.onShowHelpModal=function(){var e=f(this.helpModal);this.modalContainer.addChild(e)},a.onShowApplyView=function(){var e=f(this.applyView);this.modalContainer.addChild(e)},a.onResultShoting=function(e,t){console.log("playerProfit, bankerProfit",e,t);var n=f(e>0?this.winDialog:this.lostDialog);n.getComponent(M).initGameScore(t,e),this.modalContainer.addChild(n)},a.onShowOrderHistory=function(){var e=f(this.orderHistory);this.modalContainer.addChild(e)},a.onShowBettingHistory=function(){var e=f(this.bettingHistory);this.modalContainer.addChild(e)},a.onShowRoomInfo=function(){var e=f(this.roomInfoView);this.modalContainer.addChild(e),e.getComponent(I).bindData(yt.getState().room)},a.onShowRoadMap=function(){var e=f(this.roadMap);this.modalContainer.addChild(e)},a.onExit=function(){C.loadScene("lobby")},t}(A)).prototype,"chipBtns",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_e=t(Te.prototype,"myUserNode",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Je=t(Te.prototype,"BankerNode",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),He=t(Te.prototype,"noBanker",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ze=t(Te.prototype,"UsersNode",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Me=t(Te.prototype,"PlayerHandNode",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ie=t(Te.prototype,"BankerHandNode",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Le=t(Te.prototype,"CardPrefab",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ge=t(Te.prototype,"nodeStartCard",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Re=t(Te.prototype,"gameTimer",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ve=t(Te.prototype,"roomKey",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),De=t(Te.prototype,"roomId",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xe=t(Te.prototype,"periodL",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),We=t(Te.prototype,"roundL",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ue=t(Te.prototype,"betPlaceAreas",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),je=t(Te.prototype,"placeScores",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Fe=t(Te.prototype,"effects",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Oe=t(Te.prototype,"resultTip",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ke=t(Te.prototype,"PlayerScore",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xe=t(Te.prototype,"BankerScore",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qe=t(Te.prototype,"bankerC",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qe=t(Te.prototype,"playerC",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ye=t(Te.prototype,"compareAnim",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ze=t(Te.prototype,"Jetton",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$e=t(Te.prototype,"nodeNewArea",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),et=t(Te.prototype,"toastContainer",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tt=t(Te.prototype,"loadingContainer",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nt=t(Te.prototype,"toastPrefab",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),it=t(Te.prototype,"loadingPrefab",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ot=t(Te.prototype,"settingModal",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),at=t(Te.prototype,"helpModal",[fe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rt=t(Te.prototype,"modalContainer",[me],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lt=t(Te.prototype,"winDialog",[be],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),st=t(Te.prototype,"lostDialog",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ct=t(Te.prototype,"applyView",[ye],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ht=t(Te.prototype,"orderHistory",[ve],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ut=t(Te.prototype,"bettingHistory",[we],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dt=t(Te.prototype,"roomInfoView",[Ce],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pt=t(Te.prototype,"resultContainer",[Ae],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ft=t(Te.prototype,"roadMap",[Pe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mt=t(Te.prototype,"watStatus",[Se],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bt=t(Te.prototype,"PlayerList",[ke],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gt=t(Te.prototype,"PlayerListContain",[Be],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ne=Te))||Ne)),function(e,t){return Math.random()*(t-e)+e});a._RF.pop()}}}));

System.register("chunks:///_virtual/BetHistory.ts",["./rollupPluginModLoBabelHelpers.js","cc","./utils.ts"],(function(t){var e,i,r,n,a,o,l,u,s,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,l=t.Label,u=t.Component},function(t){s=t.formatTime,p=t.onIntScore}],execute:function(){var c,d,b,m,h,f,y,g,w,v,z,B,D,H,I,_,A;a._RF.push({},"5710dUmbhZKKr6o7tY7mKUo","BetHistory",void 0);var K=o.ccclass,L=o.property,F={a:"庄",b:"庄对子",c:"闲",d:"闲对子",e:"平"};t("BetHistory",(c=K("BetHistory"),d=L(l),b=L(l),m=L(l),h=L(l),f=L(l),y=L(l),g=L(l),c((z=e((v=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,r(e,"drawid",z,n(e)),r(e,"period",B,n(e)),r(e,"amount",D,n(e)),r(e,"hand",H,n(e)),r(e,"multiplier",I,n(e)),r(e,"result",_,n(e)),r(e,"datetime",A,n(e)),e.roundId=void 0,e}i(e,t);var a=e.prototype;return a.bindData=function(t,e){var i=t.id,r=t.period,n=t.createdAt,a=t.updatedAt,o=t.amount,l=t.rate,u=(t.award,t.status),c=t.content;this.roundId=r,this.drawid.string=""+i,this.period.string=""+r,this.datetime.string=s(1e3*n)+"-"+s(1e3*a),this.hand.string=F[c],this.result.string=0===u?"未结算":1===u?"赢":"输",this.amount.string=""+p(o),this.multiplier.string=""+p(l)},a.showDetailViewhash=function(t,e){},e}(u)).prototype,"drawid",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=e(v.prototype,"period",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=e(v.prototype,"amount",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=e(v.prototype,"hand",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=e(v.prototype,"multiplier",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=e(v.prototype,"result",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=e(v.prototype,"datetime",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=v))||w));a._RF.pop()}}}));

System.register("chunks:///_virtual/BettingHistory.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DropDown.ts","./Actions.ts","./BetHistory.ts","./config.ts","./Store.ts"],(function(t){var e,i,n,o,a,r,l,s,u,c,h,g,p,d,b,f,m,w,y,v,C;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){l=t.cclegacy,s=t._decorator,u=t.Node,c=t.Prefab,h=t.ScrollView,g=t.Vec3,p=t.tween,d=t.instantiate,b=t.Component,f=t.Label},function(t){m=t.DropDown},function(t){w=t.fetchBetLog},function(t){y=t.BetHistory},function(t){v=t.default},function(t){C=t.Store}],execute:function(){var D,N,B,P,z,H,k,L,x,T,V,F,I,O,G,S,_,A,E,M,R,j,Z,Y,q,J,K,Q,U;l._RF.push({},"50220j6xudHpZ4E1a8ZnbLH","BettingHistory",void 0);var W=s.ccclass,X=s.property,$=C.getInstance();t("BettingHistory",(D=W("BettingHistory"),N=X(u),B=X(u),P=X(u),z=X(u),H=X(u),k=X(c),L=X(m),x=X(u),T=X(c),V=X(u),F=X(c),I=X(h),O=X(c),D((_=e((S=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,n(e,"loading",_,o(e)),n(e,"nextButton",A,o(e)),n(e,"prevButton",E,o(e)),n(e,"firstPage",M,o(e)),n(e,"endPage",R,o(e)),n(e,"detailView",j,o(e)),n(e,"dropDown",Z,o(e)),n(e,"historyContent",Y,o(e)),n(e,"BetItem",q,o(e)),n(e,"pageNationContent",J,o(e)),n(e,"pageNationBtn",K,o(e)),n(e,"scrollView",Q,o(e)),n(e,"OrderHistory",U,o(e)),e.totalCount=0,e.pageNumber=-1,e.limit=15,e.choosedDate=0,e.pageCount=0,e.dates=[],e.logDatas=[],e}i(e,t);var l=e.prototype;return l.onLoad=function(){var t=this;this.dropDown.listens.onChange=function(e){t.choosedDate=e,t.loadlogs(0)},this.node.active=!1;var e=this.node.getChildByName("content");e.scale=new g(.2,.2,1),this.node.active=!0,p(e).to(.3,{scale:new g(1,1,1)},{easing:"backOut"}).start()},l.onDestroy=function(){},l.start=function(){var t,e,i,n;this.dates=this.generateDateData(),this.dropDown.bindData(this.dates.map((function(t){return{num:t,id:t}}))),this.dropDown.chooseItem({num:this.dates[0],id:this.dates[0]}),this.choosedDate=this.dates[0],this.loadlogs(0),null==(t=this.nextButton)||t.on("click",this.onNext.bind(this)),null==(e=this.prevButton)||e.on("click",this.onPrev.bind(this)),null==(i=this.firstPage)||i.on("click",this.onGoToFirstPage.bind(this)),null==(n=this.endPage)||n.on("click",this.enGoToEndPage.bind(this))},l.generateDateData=function(){for(var t=[],e=new Date,i=0;i<50;i++){var n=new Date(e);n.setDate(e.getDate()-i);var o=n.getMonth()+1,a=n.getDate(),r=""+n.getFullYear()+(o>9?o:"0"+o)+(a>9?a:"0"+a);t.push(Number(r))}return t},l.loadlogs=function(){var t=a(r().mark((function t(e){var i,n,o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0===e||this.pageNumber!==e&&!this.loading.active){t.next=2;break}return t.abrupt("return");case 2:return this.pageNumber=e,this.showLoading(),t.next=6,w(this.pageNumber+1,this.limit,this.choosedDate,$.getState().auth.access_token,v.gid);case 6:i=t.sent,n=i.code,o=i.data,0==n&&(this.logDatas=o.list,this.totalCount=o.count,this.pageCount=Math.ceil(this.totalCount/this.limit),this.drawPageNation(),this.drawTable()),this.hideLoading();case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),l.drawPageNation=function(){var t=this;if(this.pageNationContent){this.pageNationContent.removeAllChildren();var e=0;this.pageNumber-3>0&&(e=this.pageNumber-3);var i=e+6;e+6>this.pageCount&&(i=this.pageCount);for(var n=function(e){var i=d(t.pageNationBtn);i.getChildByName("Label").getComponent(f).string=""+(e+1),e===t.pageNumber&&(i.scale=new g(1.1,1.1,1.1)),t.pageNationContent.addChild(i),i.on("click",(function(){t.pageNumber!==e&&t.loadlogs(e)}))},o=e;o<i;o++)n(o)}},l.drawTable=function(){var t=this;this.historyContent.removeAllChildren(),this.scrollView.scrollToTop(.4,!0),this.logDatas.forEach((function(e){var i=d(t.BetItem);i.getComponent(y).bindData(e,(function(e){t.showOrderHistory(e)})),t.historyContent.addChild(i)}))},l.onNext=function(){this.pageNumber<this.pageCount&&this.loadlogs(this.pageNumber+1)},l.onPrev=function(){this.pageNumber>0&&this.loadlogs(this.pageNumber-1)},l.onGoToFirstPage=function(){0!==this.pageNumber&&this.loadlogs(0)},l.enGoToEndPage=function(){this.pageNumber!==this.pageCount-1&&this.loadlogs(this.pageCount-1)},l.onClick=function(t){this.loadlogs(t)},l.onClose=function(){this.node.removeFromParent()},l.showLoading=function(){this.loading.active=!0},l.hideLoading=function(){this.loading.active=!1},l.showOrderHistory=function(t){var e=d(this.OrderHistory);this.node.getParent().addChild(e)},e}(b)).prototype,"loading",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=e(S.prototype,"nextButton",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=e(S.prototype,"prevButton",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=e(S.prototype,"firstPage",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=e(S.prototype,"endPage",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=e(S.prototype,"detailView",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=e(S.prototype,"dropDown",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=e(S.prototype,"historyContent",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=e(S.prototype,"BetItem",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=e(S.prototype,"pageNationContent",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=e(S.prototype,"pageNationBtn",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=e(S.prototype,"scrollView",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=e(S.prototype,"OrderHistory",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=S))||G));l._RF.pop()}}}));

System.register("chunks:///_virtual/canvasDesignResolution.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,i,r,o,a,c,s,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,c=e.Node,s=e.Label,l=e.Component}],execute:function(){var u,p,h,d,f,g,v;o._RF.push({},"d0340+4HmxGgooV5UQmBXEk","canvasDesignResolution",void 0);var y=a.ccclass,b=a.property;e("ScreenController",(u=y("ScreenController"),p=b(c),h=b(s),u((g=t((f=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"rotateBg",g,r(t)),i(t,"rotateMessage",v,r(t)),t}n(t,e);var o=t.prototype;return o.onLoad=function(){this.checkOrientation(),window.addEventListener("resize",this.checkOrientation.bind(this))},o.checkOrientation=function(){},o.onDestroy=function(){window.removeEventListener("resize",this.checkOrientation.bind(this))},t}(l)).prototype,"rotateBg",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(f.prototype,"rotateMessage",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=f))||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/CardDefinitions.ts",["cc"],(function(l){var u;return{setters:[function(l){u=l.cclegacy}],execute:function(){u._RF.push({},"839079VVL1C45zXTlxoYqnL","CardDefinitions",void 0);l("Suit",function(l){return l[l.Diamonds=0]="Diamonds",l[l.Clubs=1]="Clubs",l[l.Hearts=2]="Hearts",l[l.Spades=3]="Spades",l}({})),l("Rank",function(l){return l[l.Ace=1]="Ace",l[l.Two=2]="Two",l[l.Three=3]="Three",l[l.Four=4]="Four",l[l.Five=5]="Five",l[l.Six=6]="Six",l[l.Seven=7]="Seven",l[l.Eight=8]="Eight",l[l.Nine=9]="Nine",l[l.Ten=10]="Ten",l[l.Jack=11]="Jack",l[l.Queen=12]="Queen",l[l.King=13]="King",l}({})),l("CowType",function(l){return l[l.NoBull=0]="NoBull",l[l.Bull1=1]="Bull1",l[l.Bull2=2]="Bull2",l[l.Bull3=3]="Bull3",l[l.Bull4=4]="Bull4",l[l.Bull5=5]="Bull5",l[l.Bull6=6]="Bull6",l[l.Bull7=7]="Bull7",l[l.Bull8=8]="Bull8",l[l.Bull9=9]="Bull9",l[l.NiuNiu=10]="NiuNiu",l[l.FourBombs=11]="FourBombs",l[l.FiveFloweredBull=12]="FiveFloweredBull",l}({}));u._RF.pop()}}}));

System.register("chunks:///_virtual/CardNode.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var a,r,e,i,n,d,s,o;return{setters:[function(t){a=t.inheritsLoose},function(t){r=t.cclegacy,e=t._decorator,i=t.Sprite,n=t.color,d=t.rect,s=t.UITransform,o=t.Component}],execute:function(){var C;r._RF.push({},"bb11dfq9BBKJJtLBnY6hkS9","CardNode",void 0);var h=e.ccclass;e.property,t("CardNode",h("CardNode")(C=function(t){function r(){for(var a,r=arguments.length,e=new Array(r),i=0;i<r;i++)e[i]=arguments[i];return(a=t.call.apply(t,[this].concat(e))||this).nCard_Width=0,a.nCard_Height=0,a.cbCard_Data=0,a.cbCard_DataIndex=0,a.cbCard_Value=0,a.cbCard_Color=0,a.szCard_Name="",a.mCard_ViewID=0,a.mCard_ChairID=0,a.cbCard_Status=0,a.cbCard_Mark=0,a.pCard_BankerSign=null,a.bCard_EnableSelect=!1,a.bCard_Select=!1,a.bCard_Move=!1,a.bCard_Touch=!1,a.bCard_Swallows=!1,a}a(r,t);var e=r.prototype;return e.start=function(){},e.onLoad=function(){this.initData()},e.update=function(t){},e.initData=function(){this.nCard_Width=156,this.nCard_Height=226,this.cbCard_Data=0,this.cbCard_DataIndex=0,this.cbCard_Value=0,this.cbCard_Color=0,this.szCard_Name="",this.mCard_ViewID=0,this.mCard_ChairID=null,this.cbCard_Status=0,this.cbCard_Mark=0,this.pCard_BankerSign=0,this.bCard_EnableSelect=!1,this.bCard_Select=!1,this.bCard_Move=!1,this.bCard_Touch=!1,this.bCard_Swallows=!1},e.GetCardValue=function(t){return 15&t},e.GetCardColor=function(t){return 240&t},e.SetStatus=function(t){this.cbCard_Status=t},e.GetStatus=function(){return this.cbCard_Status},e.OpenDisableStatus=function(){this.bCard_EnableSelect=!0;var t=this.node.getComponent(i);t&&(t.color=n(170,170,170))},e.CloseDisableStatus=function(){},e.SetCardData=function(t,a,r){var e=this.GetCardColor(r)>>4,n=78==r||79==r?this.GetCardValue(r)%14:this.GetCardValue(r)-1,o=this.node.getComponent(i);o.spriteFrame=o.spriteFrame.clone(),this.nCard_Width=156,this.nCard_Height=226,o.spriteFrame.setRect(d(this.nCard_Width*n,this.nCard_Height*e,this.nCard_Width,this.nCard_Height)),this.cbCard_Data=r,this.cbCard_Value=n,this.cbCard_Color=e,this.cbCard_DataIndex=a;var C=this.node.getComponent(s);C&&(C.width=this.nCard_Width,C.height=this.nCard_Height),this.node.setScale(t,t)},r}(o))||C);r._RF.pop()}}}));

System.register("chunks:///_virtual/CEditbox.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Keyboard.ts"],(function(i){var t,e,n,o,a,s,h,r,l,u,c,d,p,v;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,n=i.initializerDefineProperty,o=i.assertThisInitialized},function(i){a=i.cclegacy,s=i._decorator,h=i.EditBox,r=i.Label,l=i.Node,u=i.find,c=i.tween,d=i.Vec3,p=i.Component},function(i){v=i.Keyboard}],execute:function(){var b,y,f,g,x,m,C,V,B,w,E,M,k;a._RF.push({},"b1eb5lla35GCZU6hWPkUC3X","CEditbox",void 0);var A=s.ccclass,I=s.property;i("CEditbox",(b=A("CEditbox"),y=I(h),f=I(r),g=I(v),x=I(l),m=I(l),b((B=t((V=function(i){function t(){for(var t,e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];return(t=i.call.apply(i,[this].concat(a))||this).onChange=void 0,t.onEndChange=void 0,t.minValue=void 0,t.maxValue=void 0,t.type="string",t.next=null,n(t,"editBox",B,o(t)),n(t,"editView",w,o(t)),t.value=0,n(t,"keyboard",E,o(t)),n(t,"touchPade",M,o(t)),n(t,"contain",k,o(t)),t.ActiveBox=void 0,t.isMobile=!1,t.focusAni=null,t.key="",t}e(t,i);var a=t.prototype;return a.bindData=function(i){var t,e=i.type,n=i.callback,o=i.min,a=i.max,s=i.onEndChange,r=i.key;this.key=r,"string"==e?this.editBox.inputMode=h.InputMode.SINGLE_LINE:"float"===e?this.editBox.inputMode=h.InputMode.DECIMAL:"int"===e&&(this.editBox.inputMode=h.InputMode.NUMERIC),this.type=e,this.keyboard=null==(t=u("Canvas"))?void 0:t.getComponentsInChildren(v)[0],this.keyboard&&this.keyboard.isMobile?(this.touchPade.active=!0,this.editBox.node.active=!1,this.editView.node.active=!0,this.touchPade.on("click",this.onFocus,this),this.isMobile=!0,this.ActiveBox=this.editView):(this.isMobile=!1,this.ActiveBox=this.editBox,this.editBox.node.active=!0,this.editView.node.active=!1,this.touchPade.active=!1,this.editBox.enabled=!0),"number"==typeof o&&(this.minValue=o,this.value=o,this.ActiveBox.string=""+o),"number"==typeof a&&(this.maxValue=a),this.onChange=n,this.onEndChange=s},a.changeValue=function(i){var t=parseFloat(i.toString());if("float"!==this.type&&"int"!==this.type||isNaN(t))this.onChange&&this.ActiveBox&&(this.value=i,this.ActiveBox.string=""+i,this.onChange(i));else{if(void 0!==this.minValue&&this.minValue>=t)return void(t=this.minValue);if(void 0!==this.maxValue&&this.maxValue<=t)return void(t=this.maxValue);this.ActiveBox.string=i.toString(),this.value=t,this.onChange&&this.onChange(t)}},a.onChangeByEditBox=function(i){var t=i.string;t=parseFloat(t),"float"!==this.type&&"int"!==this.type||isNaN(t)||(void 0!==this.minValue&&this.minValue>=t&&(t=this.minValue),void 0!==this.maxValue&&this.maxValue<=t&&(t=this.maxValue),"int"===this.type&&(t=Math.floor(t)),i.string=""+t,this.value=t),this.onChange&&this.onChange(this.value)},a.onFocus=function(){this.keyboard&&(this.keyboard.showKeyboard(this),this.focusAni=c(this.contain).sequence(c().to(.3,{scale:new d(1.05,1.05,1.05)}),c().to(.3,{scale:new d(1,1,1)})).repeatForever().start())},a.focusOut=function(){this.onEndChange&&this.onEndChange(),this.focusAni.stop(),"int"===this.type&&(this.ActiveBox.string=""+Math.floor(Number(this.ActiveBox.string)))},a.onDestroy=function(){c(this.contain).stop()},t}(p)).prototype,"editBox",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=t(V.prototype,"editView",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=t(V.prototype,"keyboard",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(V.prototype,"touchPade",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(V.prototype,"contain",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=V))||C));a._RF.pop()}}}));

System.register("chunks:///_virtual/colyseus.js",["./cjs-loader.mjs"],(function(t,e){var n;return{setters:[function(t){n=t.default}],execute:function(){t("default",void 0);var o=t("__cjsMetaURL",e.meta.url);n.define(o,(function(e,n,o,r,i){!function(t,n){"object"==typeof e&&void 0!==o?n(e):"function"==typeof define&&define.amd?define("colyseus.js",["exports"],n):n((t="undefined"!=typeof globalThis?globalThis:t||self).Colyseus={})}(this,(function(t){function e(t,e){return e.forEach((function(e){e&&"string"!=typeof e&&!Array.isArray(e)&&Object.keys(e).forEach((function(n){if("default"!==n&&!(n in t)){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}}))})),Object.freeze(t)}ArrayBuffer.isView||(ArrayBuffer.isView=function(t){return null!==t&&"object"==typeof t&&t.buffer instanceof ArrayBuffer}),"undefined"==typeof globalThis&&"undefined"!=typeof window&&(window.globalThis=window);var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}var r,i=function(){return(i=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function s(t,e,n,o){return new(n||(n=Promise))((function(r,i){function s(t){try{c(o.next(t))}catch(t){i(t)}}function a(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((o=o.apply(t,e||[])).next())}))}function a(t,e){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,o&&(r=2&a[0]?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,o=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){s.label=a[1];break}if(6===a[0]&&s.label<r[1]){s.label=r[1],r=a;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(a);break}r[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],o=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}function c(t,e,n,o){if("a"===n&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?o:"a"===n?o.call(t):o?o.value:e.get(t)}function f(t,e,n,o,r){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?r.call(t,n):r?r.value=n:e.set(t,n),n}!function(t){t[t.CONSENTED=4e3]="CONSENTED",t[t.DEVMODE_RESTART=4010]="DEVMODE_RESTART"}(r||(r={}));var h=function(t){function e(e,n){var o=t.call(this,n)||this;return o.name="ServerError",o.code=e,o}return o(e,t),e}(Error);function u(t,e){if(this._offset=e,t instanceof ArrayBuffer)this._buffer=t,this._view=new DataView(this._buffer);else{if(!ArrayBuffer.isView(t))throw new Error("Invalid argument");this._buffer=t.buffer,this._view=new DataView(this._buffer,t.byteOffset,t.byteLength)}}u.prototype._array=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=this._parse();return e},u.prototype._map=function(t){for(var e={},n=0;n<t;n++)e[this._parse()]=this._parse();return e},u.prototype._str=function(t){var e=function(t,e,n){for(var o="",r=0,i=e,s=e+n;i<s;i++){var a=t.getUint8(i);if(0!=(128&a))if(192!=(224&a))if(224!=(240&a)){if(240!=(248&a))throw new Error("Invalid byte "+a.toString(16));(r=(7&a)<<18|(63&t.getUint8(++i))<<12|(63&t.getUint8(++i))<<6|(63&t.getUint8(++i))<<0)>=65536?(r-=65536,o+=String.fromCharCode(55296+(r>>>10),56320+(1023&r))):o+=String.fromCharCode(r)}else o+=String.fromCharCode((15&a)<<12|(63&t.getUint8(++i))<<6|(63&t.getUint8(++i))<<0);else o+=String.fromCharCode((31&a)<<6|63&t.getUint8(++i));else o+=String.fromCharCode(a)}return o}(this._view,this._offset,t);return this._offset+=t,e},u.prototype._bin=function(t){var e=this._buffer.slice(this._offset,this._offset+t);return this._offset+=t,e},u.prototype._parse=function(){var t,e=this._view.getUint8(this._offset++),n=0,o=0,r=0,i=0;if(e<192)return e<128?e:e<144?this._map(15&e):e<160?this._array(15&e):this._str(31&e);if(e>223)return-1*(255-e+1);switch(e){case 192:return null;case 194:return!1;case 195:return!0;case 196:return n=this._view.getUint8(this._offset),this._offset+=1,this._bin(n);case 197:return n=this._view.getUint16(this._offset),this._offset+=2,this._bin(n);case 198:return n=this._view.getUint32(this._offset),this._offset+=4,this._bin(n);case 199:if(n=this._view.getUint8(this._offset),o=this._view.getInt8(this._offset+1),this._offset+=2,-1===o){var s=this._view.getUint32(this._offset);return r=this._view.getInt32(this._offset+4),i=this._view.getUint32(this._offset+8),this._offset+=12,new Date(1e3*(4294967296*r+i)+s/1e6)}return[o,this._bin(n)];case 200:return n=this._view.getUint16(this._offset),o=this._view.getInt8(this._offset+2),this._offset+=3,[o,this._bin(n)];case 201:return n=this._view.getUint32(this._offset),o=this._view.getInt8(this._offset+4),this._offset+=5,[o,this._bin(n)];case 202:return t=this._view.getFloat32(this._offset),this._offset+=4,t;case 203:return t=this._view.getFloat64(this._offset),this._offset+=8,t;case 204:return t=this._view.getUint8(this._offset),this._offset+=1,t;case 205:return t=this._view.getUint16(this._offset),this._offset+=2,t;case 206:return t=this._view.getUint32(this._offset),this._offset+=4,t;case 207:return r=this._view.getUint32(this._offset)*Math.pow(2,32),i=this._view.getUint32(this._offset+4),this._offset+=8,r+i;case 208:return t=this._view.getInt8(this._offset),this._offset+=1,t;case 209:return t=this._view.getInt16(this._offset),this._offset+=2,t;case 210:return t=this._view.getInt32(this._offset),this._offset+=4,t;case 211:return r=this._view.getInt32(this._offset)*Math.pow(2,32),i=this._view.getUint32(this._offset+4),this._offset+=8,r+i;case 212:return o=this._view.getInt8(this._offset),this._offset+=1,0===o?void(this._offset+=1):[o,this._bin(1)];case 213:return o=this._view.getInt8(this._offset),this._offset+=1,[o,this._bin(2)];case 214:return o=this._view.getInt8(this._offset),this._offset+=1,-1===o?(t=this._view.getUint32(this._offset),this._offset+=4,new Date(1e3*t)):[o,this._bin(4)];case 215:return o=this._view.getInt8(this._offset),this._offset+=1,0===o?(r=this._view.getInt32(this._offset)*Math.pow(2,32),i=this._view.getUint32(this._offset+4),this._offset+=8,new Date(r+i)):-1===o?(r=this._view.getUint32(this._offset),i=this._view.getUint32(this._offset+4),this._offset+=8,new Date(1e3*(4294967296*(3&r)+i)+(r>>>2)/1e6)):[o,this._bin(8)];case 216:return o=this._view.getInt8(this._offset),this._offset+=1,[o,this._bin(16)];case 217:return n=this._view.getUint8(this._offset),this._offset+=1,this._str(n);case 218:return n=this._view.getUint16(this._offset),this._offset+=2,this._str(n);case 219:return n=this._view.getUint32(this._offset),this._offset+=4,this._str(n);case 220:return n=this._view.getUint16(this._offset),this._offset+=2,this._array(n);case 221:return n=this._view.getUint32(this._offset),this._offset+=4,this._array(n);case 222:return n=this._view.getUint16(this._offset),this._offset+=2,this._map(n);case 223:return n=this._view.getUint32(this._offset),this._offset+=4,this._map(n)}throw new Error("Could not parse")};function d(t,e,n){for(var o=0,r=0,i=n.length;r<i;r++)(o=n.charCodeAt(r))<128?t.setUint8(e++,o):o<2048?(t.setUint8(e++,192|o>>6),t.setUint8(e++,128|63&o)):o<55296||o>=57344?(t.setUint8(e++,224|o>>12),t.setUint8(e++,128|o>>6&63),t.setUint8(e++,128|63&o)):(r++,o=65536+((1023&o)<<10|1023&n.charCodeAt(r)),t.setUint8(e++,240|o>>18),t.setUint8(e++,128|o>>12&63),t.setUint8(e++,128|o>>6&63),t.setUint8(e++,128|63&o))}function p(t,e,n){var o=typeof n,r=0,i=0,s=0,a=0,c=0,f=0;if("string"===o){if((c=function(t){for(var e=0,n=0,o=0,r=t.length;o<r;o++)(e=t.charCodeAt(o))<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(o++,n+=4);return n}(n))<32)t.push(160|c),f=1;else if(c<256)t.push(217,c),f=2;else if(c<65536)t.push(218,c>>8,c),f=3;else{if(!(c<4294967296))throw new Error("String too long");t.push(219,c>>24,c>>16,c>>8,c),f=5}return e.push({_str:n,_length:c,_offset:t.length}),f+c}if("number"===o)return Math.floor(n)===n&&isFinite(n)?n>=0?n<128?(t.push(n),1):n<256?(t.push(204,n),2):n<65536?(t.push(205,n>>8,n),3):n<4294967296?(t.push(206,n>>24,n>>16,n>>8,n),5):(s=n/Math.pow(2,32)>>0,a=n>>>0,t.push(207,s>>24,s>>16,s>>8,s,a>>24,a>>16,a>>8,a),9):n>=-32?(t.push(n),1):n>=-128?(t.push(208,n),2):n>=-32768?(t.push(209,n>>8,n),3):n>=-2147483648?(t.push(210,n>>24,n>>16,n>>8,n),5):(s=Math.floor(n/Math.pow(2,32)),a=n>>>0,t.push(211,s>>24,s>>16,s>>8,s,a>>24,a>>16,a>>8,a),9):(t.push(203),e.push({_float:n,_length:8,_offset:t.length}),9);if("object"===o){if(null===n)return t.push(192),1;if(Array.isArray(n)){if((c=n.length)<16)t.push(144|c),f=1;else if(c<65536)t.push(220,c>>8,c),f=3;else{if(!(c<4294967296))throw new Error("Array too large");t.push(221,c>>24,c>>16,c>>8,c),f=5}for(r=0;r<c;r++)f+=p(t,e,n[r]);return f}if(n instanceof Date){var h=n.getTime(),u=Math.floor(h/1e3),d=1e6*(h-1e3*u);return u>=0&&d>=0&&u<=17179869183?0===d&&u<=4294967295?(t.push(214,255,u>>24,u>>16,u>>8,u),6):(s=u/4294967296,a=4294967295&u,t.push(215,255,d>>22,d>>14,d>>6,s,a>>24,a>>16,a>>8,a),10):(s=Math.floor(u/4294967296),a=u>>>0,t.push(199,12,255,d>>24,d>>16,d>>8,d,s>>24,s>>16,s>>8,s,a>>24,a>>16,a>>8,a),15)}if(n instanceof ArrayBuffer){if((c=n.byteLength)<256)t.push(196,c),f=2;else if(c<65536)t.push(197,c>>8,c),f=3;else{if(!(c<4294967296))throw new Error("Buffer too large");t.push(198,c>>24,c>>16,c>>8,c),f=5}return e.push({_bin:n,_length:c,_offset:t.length}),f+c}if("function"==typeof n.toJSON)return p(t,e,n.toJSON());var l=[],v="",y=Object.keys(n);for(r=0,i=y.length;r<i;r++)void 0!==n[v=y[r]]&&"function"!=typeof n[v]&&l.push(v);if((c=l.length)<16)t.push(128|c),f=1;else if(c<65536)t.push(222,c>>8,c),f=3;else{if(!(c<4294967296))throw new Error("Object too large");t.push(223,c>>24,c>>16,c>>8,c),f=5}for(r=0;r<c;r++)f+=p(t,e,v=l[r]),f+=p(t,e,n[v]);return f}if("boolean"===o)return t.push(n?195:194),1;if("undefined"===o)return t.push(192),1;if("function"==typeof n.toJSON)return p(t,e,n.toJSON());throw new Error("Could not encode")}function l(t){var e=[],n=[],o=p(e,n,t),r=new ArrayBuffer(o),i=new DataView(r),s=0,a=0,c=-1;n.length>0&&(c=n[0]._offset);for(var f,h=0,u=0,l=0,v=e.length;l<v;l++)if(i.setUint8(a+l,e[l]),l+1===c){if(h=(f=n[s])._length,u=a+c,f._bin)for(var y=new Uint8Array(f._bin),g=0;g<h;g++)i.setUint8(u+g,y[g]);else f._str?d(i,u,f._str):void 0!==f._float&&i.setFloat64(u,f._float);a+=h,n[++s]&&(c=n[s]._offset)}return r}var v,y,g=globalThis.WebSocket||function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")},m=function(){function t(t){this.events=t}return t.prototype.send=function(t){t instanceof ArrayBuffer?this.ws.send(t):Array.isArray(t)&&this.ws.send(new Uint8Array(t).buffer)},t.prototype.connect=function(t){this.ws=new g(t,this.protocols),this.ws.binaryType="arraybuffer",this.ws.onopen=this.events.onopen,this.ws.onmessage=this.events.onmessage,this.ws.onclose=this.events.onclose,this.ws.onerror=this.events.onerror},t.prototype.close=function(t,e){this.ws.close(t,e)},Object.defineProperty(t.prototype,"isOpen",{get:function(){return this.ws.readyState===g.OPEN},enumerable:!1,configurable:!0}),t}(),w=function(){function t(){this.events={},this.transport=new m(this.events)}return t.prototype.send=function(t){this.transport.send(t)},t.prototype.connect=function(t){this.transport.connect(t)},t.prototype.close=function(t,e){this.transport.close(t,e)},Object.defineProperty(t.prototype,"isOpen",{get:function(){return this.transport.isOpen},enumerable:!1,configurable:!0}),t}();function E(t,e){for(var n=t[e++],o="",r=0,i=e,s=e+n;i<s;i++){var a=t[i];if(0!=(128&a))if(192!=(224&a))if(224!=(240&a)){if(240!=(248&a))throw new Error("Invalid byte "+a.toString(16));(r=(7&a)<<18|(63&t[++i])<<12|(63&t[++i])<<6|(63&t[++i])<<0)>=65536?(r-=65536,o+=String.fromCharCode(55296+(r>>>10),56320+(1023&r))):o+=String.fromCharCode(r)}else o+=String.fromCharCode((15&a)<<12|(63&t[++i])<<6|(63&t[++i])<<0);else o+=String.fromCharCode((31&a)<<6|63&t[++i]);else o+=String.fromCharCode(a)}return o}function A(t){void 0===t&&(t="");for(var e=0,n=0,o=0,r=t.length;o<r;o++)(e=t.charCodeAt(o))<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(o++,n+=4);return n+1}t.Protocol=void 0,(v=t.Protocol||(t.Protocol={}))[v.HANDSHAKE=9]="HANDSHAKE",v[v.JOIN_ROOM=10]="JOIN_ROOM",v[v.ERROR=11]="ERROR",v[v.LEAVE_ROOM=12]="LEAVE_ROOM",v[v.ROOM_DATA=13]="ROOM_DATA",v[v.ROOM_STATE=14]="ROOM_STATE",v[v.ROOM_STATE_PATCH=15]="ROOM_STATE_PATCH",v[v.ROOM_DATA_SCHEMA=16]="ROOM_DATA_SCHEMA",v[v.ROOM_DATA_BYTES=17]="ROOM_DATA_BYTES",t.ErrorCode=void 0,(y=t.ErrorCode||(t.ErrorCode={}))[y.MATCHMAKE_NO_HANDLER=4210]="MATCHMAKE_NO_HANDLER",y[y.MATCHMAKE_INVALID_CRITERIA=4211]="MATCHMAKE_INVALID_CRITERIA",y[y.MATCHMAKE_INVALID_ROOM_ID=4212]="MATCHMAKE_INVALID_ROOM_ID",y[y.MATCHMAKE_UNHANDLED=4213]="MATCHMAKE_UNHANDLED",y[y.MATCHMAKE_EXPIRED=4214]="MATCHMAKE_EXPIRED",y[y.AUTH_FAILED=4215]="AUTH_FAILED",y[y.APPLICATION_ERROR=4216]="APPLICATION_ERROR";var _={};function O(t,e){_[t]=e}function $(t){var e=_[t];if(!e)throw new Error("missing serializer: "+t);return e}var b=function(){function t(){this.handlers=[]}return t.prototype.register=function(t,e){return this.handlers.push(t),this},t.prototype.invoke=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.handlers.forEach((function(n){return n.apply(t,e)}))},t.prototype.invokeAsync=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Promise.all(this.handlers.map((function(n){return n.apply(t,e)})))},t.prototype.remove=function(t){var e=this.handlers.indexOf(t);this.handlers[e]=this.handlers[this.handlers.length-1],this.handlers.pop()},t.prototype.clear=function(){this.handlers=[]},t}();function I(){var t=new b;function e(e){return t.register(e,null===this)}return e.once=function(e){t.register((function n(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];e.apply(this,o),t.remove(n)}))},e.remove=function(e){return t.remove(e)},e.invoke=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.invoke.apply(t,e)},e.invokeAsync=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.invokeAsync.apply(t,e)},e.clear=function(){return t.clear()},e}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var x=function(t){var e={exports:{}};return t(e,e.exports),e.exports}((function(t,e){!function(t){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,n)};function n(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}function o(t,e,n,o){var r,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,n,s):r(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s}function r(t,e,n){if(n||2===arguments.length)for(var o,r=0,i=e.length;r<i;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}var i,s=255,a=213;t.OPERATION=void 0,(i=t.OPERATION||(t.OPERATION={}))[i.ADD=128]="ADD",i[i.REPLACE=0]="REPLACE",i[i.DELETE=64]="DELETE",i[i.DELETE_AND_ADD=192]="DELETE_AND_ADD",i[i.TOUCH=1]="TOUCH",i[i.CLEAR=10]="CLEAR";var c=function(){function e(t,e,n){this.changed=!1,this.changes=new Map,this.allChanges=new Set,this.caches={},this.currentCustomOperation=0,this.ref=t,this.setParent(e,n)}return e.prototype.setParent=function(t,e,n){var o=this;if(this.indexes||(this.indexes=this.ref instanceof Rt?this.ref._definition.indexes:{}),this.parent=t,this.parentIndex=n,e)if(this.root=e,this.ref instanceof Rt){var r=this.ref._definition;for(var i in r.schema){var s=this.ref[i];if(s&&s.$changes){var a=r.indexes[i];s.$changes.setParent(this.ref,e,a)}}}else"object"==typeof this.ref&&this.ref.forEach((function(t,e){if(t instanceof Rt){var n=t.$changes,r=o.ref.$changes.indexes[e];n.setParent(o.ref,o.root,r)}}))},e.prototype.operation=function(t){this.changes.set(--this.currentCustomOperation,t)},e.prototype.change=function(e,n){void 0===n&&(n=t.OPERATION.ADD);var o="number"==typeof e?e:this.indexes[e];this.assertValidIndex(o,e);var r=this.changes.get(o);r&&r.op!==t.OPERATION.DELETE&&r.op!==t.OPERATION.TOUCH||this.changes.set(o,{op:r&&r.op===t.OPERATION.DELETE?t.OPERATION.DELETE_AND_ADD:n,index:o}),this.allChanges.add(o),this.changed=!0,this.touchParents()},e.prototype.touch=function(e){var n="number"==typeof e?e:this.indexes[e];this.assertValidIndex(n,e),this.changes.has(n)||this.changes.set(n,{op:t.OPERATION.TOUCH,index:n}),this.allChanges.add(n),this.touchParents()},e.prototype.touchParents=function(){this.parent&&this.parent.$changes.touch(this.parentIndex)},e.prototype.getType=function(t){if(this.ref._definition)return(e=this.ref._definition).schema[e.fieldsByIndex[t]];var e,n=(e=this.parent._definition).schema[e.fieldsByIndex[this.parentIndex]];return Object.values(n)[0]},e.prototype.getChildrenFilter=function(){var t=this.parent._definition.childFilters;return t&&t[this.parentIndex]},e.prototype.getValue=function(t){return this.ref.getByIndex(t)},e.prototype.delete=function(e){var n="number"==typeof e?e:this.indexes[e];if(void 0!==n){var o=this.getValue(n);this.changes.set(n,{op:t.OPERATION.DELETE,index:n}),this.allChanges.delete(n),delete this.caches[n],o&&o.$changes&&(o.$changes.parent=void 0),this.changed=!0,this.touchParents()}else console.warn("@colyseus/schema ".concat(this.ref.constructor.name,": trying to delete non-existing index: ").concat(e," (").concat(n,")"))},e.prototype.discard=function(e,n){var o=this;void 0===e&&(e=!1),void 0===n&&(n=!1),this.ref instanceof Rt||this.changes.forEach((function(e){if(e.op===t.OPERATION.DELETE){var n=o.ref.getIndex(e.index);delete o.indexes[n]}})),this.changes.clear(),this.changed=e,n&&this.allChanges.clear(),this.currentCustomOperation=0},e.prototype.discardAll=function(){var t=this;this.changes.forEach((function(e){var n=t.getValue(e.index);n&&n.$changes&&n.$changes.discardAll()})),this.discard()},e.prototype.cache=function(t,e){this.caches[t]=e},e.prototype.clone=function(){return new e(this.ref,this.parent,this.root)},e.prototype.ensureRefId=function(){void 0===this.refId&&(this.refId=this.root.getNextUniqueId())},e.prototype.assertValidIndex=function(t,e){if(void 0===t)throw new Error('ChangeTree: missing index for field "'.concat(e,'"'))},e}();function f(t,e,n,o){return t[e]||(t[e]=[]),t[e].push(n),null==o||o.forEach((function(t,e){return n(t,e)})),function(){return u(t[e],t[e].indexOf(n))}}function h(e){var n=this,o="string"!=typeof this.$changes.getType();this.$items.forEach((function(r,i){e.push({refId:n.$changes.refId,op:t.OPERATION.DELETE,field:i,value:void 0,previousValue:r}),o&&n.$changes.root.removeRef(r.$changes.refId)}))}function u(t,e){if(-1===e||e>=t.length)return!1;for(var n=t.length-1,o=e;o<n;o++)t[o]=t[o+1];return t.length=n,!0}var d=function(t,e){var n=t.toString(),o=e.toString();return n<o?-1:n>o?1:0};function p(t){return t.$proxy=!0,t=new Proxy(t,{get:function(t,e){return"symbol"==typeof e||isNaN(e)?t[e]:t.at(e)},set:function(t,e,n){if("symbol"==typeof e||isNaN(e))t[e]=n;else{var o=Array.from(t.$items.keys()),r=parseInt(o[e]||e);null==n?t.deleteAt(r):t.setAt(r,n)}return!0},deleteProperty:function(t,e){return"number"==typeof e?t.deleteAt(e):delete t[e],!0}})}var l=function(){function e(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.$changes=new c(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,this.push.apply(this,t)}return e.prototype.onAdd=function(e,n){return void 0===n&&(n=!0),f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.ADD,e,n?this.$items:void 0)},e.prototype.onRemove=function(e){return f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.DELETE,e)},e.prototype.onChange=function(e){return f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.REPLACE,e)},e.is=function(t){return Array.isArray(t)||void 0!==t.array},Object.defineProperty(e.prototype,"length",{get:function(){return this.$items.size},set:function(t){0===t?this.clear():this.splice(t,this.length-t)},enumerable:!1,configurable:!0}),e.prototype.push=function(){for(var t,e=this,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return n.forEach((function(n){t=e.$refId++,e.setAt(t,n)})),t},e.prototype.pop=function(){var t=Array.from(this.$indexes.values()).pop();if(void 0!==t){this.$changes.delete(t),this.$indexes.delete(t);var e=this.$items.get(t);return this.$items.delete(t),e}},e.prototype.at=function(t){var e=Array.from(this.$items.keys())[t];return this.$items.get(e)},e.prototype.setAt=function(e,n){var o,r;void 0!==n.$changes&&n.$changes.setParent(this,this.$changes.root,e);var i=null!==(r=null===(o=this.$changes.indexes[e])||void 0===o?void 0:o.op)&&void 0!==r?r:t.OPERATION.ADD;this.$changes.indexes[e]=e,this.$indexes.set(e,e),this.$items.set(e,n),this.$changes.change(e,i)},e.prototype.deleteAt=function(t){var e=Array.from(this.$items.keys())[t];return void 0!==e&&this.$deleteAt(e)},e.prototype.$deleteAt=function(t){return this.$changes.delete(t),this.$indexes.delete(t),this.$items.delete(t)},e.prototype.clear=function(e){this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),e&&h.call(this,e),this.$items.clear(),this.$changes.operation({index:0,op:t.OPERATION.CLEAR}),this.$changes.touchParents()},e.prototype.concat=function(){for(var t,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return new(e.bind.apply(e,r([void 0],(t=Array.from(this.$items.values())).concat.apply(t,n),!1)))},e.prototype.join=function(t){return Array.from(this.$items.values()).join(t)},e.prototype.reverse=function(){var t=this,e=Array.from(this.$items.keys());return Array.from(this.$items.values()).reverse().forEach((function(n,o){t.setAt(e[o],n)})),this},e.prototype.shift=function(){var t=Array.from(this.$items.keys()).shift();if(void 0!==t){var e=this.$items.get(t);return this.$deleteAt(t),e}},e.prototype.slice=function(t,n){var o=new e;return o.push.apply(o,Array.from(this.$items.values()).slice(t,n)),o},e.prototype.sort=function(t){var e=this;void 0===t&&(t=d);var n=Array.from(this.$items.keys());return Array.from(this.$items.values()).sort(t).forEach((function(t,o){e.setAt(n[o],t)})),this},e.prototype.splice=function(t,e){void 0===e&&(e=this.length-t);for(var n=Array.from(this.$items.keys()),o=[],r=t;r<t+e;r++)o.push(this.$items.get(n[r])),this.$deleteAt(n[r]);return o},e.prototype.unshift=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var o=this.length,r=e.length,i=Array.from(this.$items.values());return e.forEach((function(e,n){t.setAt(n,e)})),i.forEach((function(e,n){t.setAt(r+n,e)})),o+r},e.prototype.indexOf=function(t,e){return Array.from(this.$items.values()).indexOf(t,e)},e.prototype.lastIndexOf=function(t,e){return void 0===e&&(e=this.length-1),Array.from(this.$items.values()).lastIndexOf(t,e)},e.prototype.every=function(t,e){return Array.from(this.$items.values()).every(t,e)},e.prototype.some=function(t,e){return Array.from(this.$items.values()).some(t,e)},e.prototype.forEach=function(t,e){Array.from(this.$items.values()).forEach(t,e)},e.prototype.map=function(t,e){return Array.from(this.$items.values()).map(t,e)},e.prototype.filter=function(t,e){return Array.from(this.$items.values()).filter(t,e)},e.prototype.reduce=function(t,e){return Array.prototype.reduce.apply(Array.from(this.$items.values()),arguments)},e.prototype.reduceRight=function(t,e){return Array.prototype.reduceRight.apply(Array.from(this.$items.values()),arguments)},e.prototype.find=function(t,e){return Array.from(this.$items.values()).find(t,e)},e.prototype.findIndex=function(t,e){return Array.from(this.$items.values()).findIndex(t,e)},e.prototype.fill=function(t,e,n){throw new Error("ArraySchema#fill() not implemented")},e.prototype.copyWithin=function(t,e,n){throw new Error("ArraySchema#copyWithin() not implemented")},e.prototype.toString=function(){return this.$items.toString()},e.prototype.toLocaleString=function(){return this.$items.toLocaleString()},e.prototype[Symbol.iterator]=function(){return Array.from(this.$items.values())[Symbol.iterator]()},e.prototype.entries=function(){return this.$items.entries()},e.prototype.keys=function(){return this.$items.keys()},e.prototype.values=function(){return this.$items.values()},e.prototype.includes=function(t,e){return Array.from(this.$items.values()).includes(t,e)},e.prototype.flatMap=function(t,e){throw new Error("ArraySchema#flatMap() is not supported.")},e.prototype.flat=function(t){throw new Error("ArraySchema#flat() is not supported.")},e.prototype.findLast=function(){var t=Array.from(this.$items.values());return t.findLast.apply(t,arguments)},e.prototype.findLastIndex=function(){var t=Array.from(this.$items.values());return t.findLastIndex.apply(t,arguments)},e.prototype.setIndex=function(t,e){this.$indexes.set(t,e)},e.prototype.getIndex=function(t){return this.$indexes.get(t)},e.prototype.getByIndex=function(t){return this.$items.get(this.$indexes.get(t))},e.prototype.deleteByIndex=function(t){var e=this.$indexes.get(t);this.$items.delete(e),this.$indexes.delete(t)},e.prototype.toArray=function(){return Array.from(this.$items.values())},e.prototype.toJSON=function(){return this.toArray().map((function(t){return"function"==typeof t.toJSON?t.toJSON():t}))},e.prototype.clone=function(t){return t?new(e.bind.apply(e,r([void 0],Array.from(this.$items.values()),!1))):new(e.bind.apply(e,r([void 0],this.map((function(t){return t.$changes?t.clone():t})),!1)))},e}();function v(t){return t.$proxy=!0,t=new Proxy(t,{get:function(t,e){return"symbol"!=typeof e&&void 0===t[e]?t.get(e):t[e]},set:function(t,e,n){return"symbol"!=typeof e&&-1===e.indexOf("$")&&"onAdd"!==e&&"onRemove"!==e&&"onChange"!==e?t.set(e,n):t[e]=n,!0},deleteProperty:function(t,e){return t.delete(e),!0}})}var y=function(){function e(t){var n=this;if(this.$changes=new c(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,t)if(t instanceof Map||t instanceof e)t.forEach((function(t,e){return n.set(e,t)}));else for(var o in t)this.set(o,t[o])}return e.prototype.onAdd=function(e,n){return void 0===n&&(n=!0),f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.ADD,e,n?this.$items:void 0)},e.prototype.onRemove=function(e){return f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.DELETE,e)},e.prototype.onChange=function(e){return f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.REPLACE,e)},e.is=function(t){return void 0!==t.map},e.prototype[Symbol.iterator]=function(){return this.$items[Symbol.iterator]()},Object.defineProperty(e.prototype,Symbol.toStringTag,{get:function(){return this.$items[Symbol.toStringTag]},enumerable:!1,configurable:!0}),e.prototype.set=function(e,n){if(null==n)throw new Error("MapSchema#set('".concat(e,"', ").concat(n,"): trying to set ").concat(n," value on '").concat(e,"'."));var o=void 0!==this.$changes.indexes[e],r=o?this.$changes.indexes[e]:this.$refId++,i=o?t.OPERATION.REPLACE:t.OPERATION.ADD,s=void 0!==n.$changes;return s&&n.$changes.setParent(this,this.$changes.root,r),o?s&&this.$items.get(e)!==n&&(i=t.OPERATION.ADD):(this.$changes.indexes[e]=r,this.$indexes.set(r,e)),this.$items.set(e,n),this.$changes.change(e,i),this},e.prototype.get=function(t){return this.$items.get(t)},e.prototype.delete=function(t){return this.$changes.delete(t),this.$items.delete(t)},e.prototype.clear=function(e){this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),e&&h.call(this,e),this.$items.clear(),this.$changes.operation({index:0,op:t.OPERATION.CLEAR}),this.$changes.touchParents()},e.prototype.has=function(t){return this.$items.has(t)},e.prototype.forEach=function(t){this.$items.forEach(t)},e.prototype.entries=function(){return this.$items.entries()},e.prototype.keys=function(){return this.$items.keys()},e.prototype.values=function(){return this.$items.values()},Object.defineProperty(e.prototype,"size",{get:function(){return this.$items.size},enumerable:!1,configurable:!0}),e.prototype.setIndex=function(t,e){this.$indexes.set(t,e)},e.prototype.getIndex=function(t){return this.$indexes.get(t)},e.prototype.getByIndex=function(t){return this.$items.get(this.$indexes.get(t))},e.prototype.deleteByIndex=function(t){var e=this.$indexes.get(t);this.$items.delete(e),this.$indexes.delete(t)},e.prototype.toJSON=function(){var t={};return this.forEach((function(e,n){t[n]="function"==typeof e.toJSON?e.toJSON():e})),t},e.prototype.clone=function(t){var n;return t?n=Object.assign(new e,this):(n=new e,this.forEach((function(t,e){t.$changes?n.set(e,t.clone()):n.set(e,t)}))),n},e}(),g={};function m(t,e){g[t]=e}function w(t){return g[t]}var E=function(){function t(){this.indexes={},this.fieldsByIndex={},this.deprecated={},this.descriptors={}}return t.create=function(e){var n=new t;return n.schema=Object.assign({},e&&e.schema||{}),n.indexes=Object.assign({},e&&e.indexes||{}),n.fieldsByIndex=Object.assign({},e&&e.fieldsByIndex||{}),n.descriptors=Object.assign({},e&&e.descriptors||{}),n.deprecated=Object.assign({},e&&e.deprecated||{}),n},t.prototype.addField=function(t,e){var n=this.getNextFieldIndex();this.fieldsByIndex[n]=t,this.indexes[t]=n,this.schema[t]=Array.isArray(e)?{array:e[0]}:e},t.prototype.hasField=function(t){return void 0!==this.indexes[t]},t.prototype.addFilter=function(t,e){return this.filters||(this.filters={},this.indexesWithFilters=[]),this.filters[this.indexes[t]]=e,this.indexesWithFilters.push(this.indexes[t]),!0},t.prototype.addChildrenFilter=function(t,e){var n=this.indexes[t],o=this.schema[t];if(w(Object.keys(o)[0]))return this.childFilters||(this.childFilters={}),this.childFilters[n]=e,!0;console.warn("@filterChildren: field '".concat(t,"' can't have children. Ignoring filter."))},t.prototype.getChildrenFilter=function(t){return this.childFilters&&this.childFilters[this.indexes[t]]},t.prototype.getNextFieldIndex=function(){return Object.keys(this.schema||{}).length},t}();function A(t){return t._context&&t._context.useFilters}var _=function(){function t(){this.types={},this.schemas=new Map,this.useFilters=!1}return t.prototype.has=function(t){return this.schemas.has(t)},t.prototype.get=function(t){return this.types[t]},t.prototype.add=function(t,e){void 0===e&&(e=this.schemas.size),t._definition=E.create(t._definition),t._typeid=e,this.types[e]=t,this.schemas.set(t,e)},t.create=function(e){return void 0===e&&(e={}),function(n){return e.context||(e.context=new t),$(n,e)}},t}(),O=new _;function $(t,e){return void 0===e&&(e={}),function(n,o){var i=e.context||O,s=n.constructor;if(s._context=i,!t)throw new Error("".concat(s.name,': @type() reference provided for "').concat(o,"\" is undefined. Make sure you don't have any circular dependencies."));i.has(s)||i.add(s);var a=s._definition;if(a.addField(o,t),a.descriptors[o]){if(a.deprecated[o])return;try{throw new Error("@colyseus/schema: Duplicate '".concat(o,"' definition on '").concat(s.name,"'.\nCheck @type() annotation"))}catch(t){var c=t.stack.split("\n")[4].trim();throw new Error("".concat(t.message," ").concat(c))}}var f=l.is(t),h=!f&&y.is(t);if("string"!=typeof t&&!Rt.is(t)){var u=Object.values(t)[0];"string"==typeof u||i.has(u)||i.add(u)}if(e.manual)a.descriptors[o]={enumerable:!0,configurable:!0,writable:!0};else{var d="_".concat(o);a.descriptors[d]={enumerable:!1,configurable:!1,writable:!0},a.descriptors[o]={get:function(){return this[d]},set:function(t){t!==this[d]&&(null!=t?(!f||t instanceof l||(t=new(l.bind.apply(l,r([void 0],t,!1)))),!h||t instanceof y||(t=new y(t)),void 0===t.$proxy&&(h?t=v(t):f&&(t=p(t))),this.$changes.change(o),t.$changes&&t.$changes.setParent(this,this.$changes.root,this._definition.indexes[o])):this[d]&&this.$changes.delete(o),this[d]=t)},enumerable:!0,configurable:!0}}}}function b(t){return function(e,n){var o=e.constructor;o._definition.addFilter(n,t)&&(o._context.useFilters=!0)}}function I(t){return function(e,n){var o=e.constructor;o._definition.addChildrenFilter(n,t)&&(o._context.useFilters=!0)}}function x(t){return void 0===t&&(t=!0),function(e,n){var o=e.constructor._definition;o.deprecated[n]=!0,t&&(o.descriptors[n]={get:function(){throw new Error("".concat(n," is deprecated."))},set:function(t){},enumerable:!1,configurable:!0})}}function T(t,e,n){for(var o in void 0===n&&(n={}),n.context||(n.context=t._context||n.context||O),e)$(e[o],n)(t.prototype,o);return t}function R(t){for(var e=0,n=0,o=0,r=t.length;o<r;o++)(e=t.charCodeAt(o))<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(o++,n+=4);return n}function C(t,e,n){for(var o=0,r=0,i=n.length;r<i;r++)(o=n.charCodeAt(r))<128?t[e++]=o:o<2048?(t[e++]=192|o>>6,t[e++]=128|63&o):o<55296||o>=57344?(t[e++]=224|o>>12,t[e++]=128|o>>6&63,t[e++]=128|63&o):(r++,o=65536+((1023&o)<<10|1023&n.charCodeAt(r)),t[e++]=240|o>>18,t[e++]=128|o>>12&63,t[e++]=128|o>>6&63,t[e++]=128|63&o)}function P(t,e){t.push(255&e)}function k(t,e){t.push(255&e)}function D(t,e){t.push(255&e),t.push(e>>8&255)}function S(t,e){t.push(255&e),t.push(e>>8&255)}function N(t,e){t.push(255&e),t.push(e>>8&255),t.push(e>>16&255),t.push(e>>24&255)}function M(t,e){var n=e>>24,o=e>>16,r=e>>8,i=e;t.push(255&i),t.push(255&r),t.push(255&o),t.push(255&n)}function L(t,e){var n=Math.floor(e/Math.pow(2,32));M(t,e>>>0),M(t,n)}function j(t,e){var n=e/Math.pow(2,32)>>0;M(t,e>>>0),M(t,n)}function U(t,e){z(t,e)}function F(t,e){J(t,e)}var H=new Int32Array(2),B=new Float32Array(H.buffer),V=new Float64Array(H.buffer);function z(t,e){B[0]=e,N(t,H[0])}function J(t,e){V[0]=e,N(t,H[0]),N(t,H[1])}function W(t,e){return k(t,e?1:0)}function q(t,e){e||(e="");var n=R(e),o=0;if(n<32)t.push(160|n),o=1;else if(n<256)t.push(217),k(t,n),o=2;else if(n<65536)t.push(218),S(t,n),o=3;else{if(!(n<4294967296))throw new Error("String too long");t.push(219),M(t,n),o=5}return C(t,t.length,e),o+n}function K(t,e){return isNaN(e)?K(t,0):isFinite(e)?e!==(0|e)?(t.push(203),J(t,e),9):e>=0?e<128?(k(t,e),1):e<256?(t.push(204),k(t,e),2):e<65536?(t.push(205),S(t,e),3):e<4294967296?(t.push(206),M(t,e),5):(t.push(207),j(t,e),9):e>=-32?(t.push(224|e+32),1):e>=-128?(t.push(208),P(t,e),2):e>=-32768?(t.push(209),D(t,e),3):e>=-2147483648?(t.push(210),N(t,e),5):(t.push(211),L(t,e),9):K(t,e>0?Number.MAX_SAFE_INTEGER:-Number.MAX_SAFE_INTEGER)}var X=Object.freeze({__proto__:null,utf8Write:C,int8:P,uint8:k,int16:D,uint16:S,int32:N,uint32:M,int64:L,uint64:j,float32:U,float64:F,writeFloat32:z,writeFloat64:J,boolean:W,string:q,number:K});function Y(t,e,n){for(var o="",r=0,i=e,s=e+n;i<s;i++){var a=t[i];0!=(128&a)?192!=(224&a)?224!=(240&a)?240!=(248&a)?console.error("Invalid byte "+a.toString(16)):(r=(7&a)<<18|(63&t[++i])<<12|(63&t[++i])<<6|(63&t[++i])<<0)>=65536?(r-=65536,o+=String.fromCharCode(55296+(r>>>10),56320+(1023&r))):o+=String.fromCharCode(r):o+=String.fromCharCode((15&a)<<12|(63&t[++i])<<6|(63&t[++i])<<0):o+=String.fromCharCode((31&a)<<6|63&t[++i]):o+=String.fromCharCode(a)}return o}function G(t,e){return Q(t,e)<<24>>24}function Q(t,e){return t[e.offset++]}function Z(t,e){return tt(t,e)<<16>>16}function tt(t,e){return t[e.offset++]|t[e.offset++]<<8}function et(t,e){return t[e.offset++]|t[e.offset++]<<8|t[e.offset++]<<16|t[e.offset++]<<24}function nt(t,e){return et(t,e)>>>0}function ot(t,e){return ht(t,e)}function rt(t,e){return ut(t,e)}function it(t,e){var n=nt(t,e);return et(t,e)*Math.pow(2,32)+n}function st(t,e){var n=nt(t,e);return nt(t,e)*Math.pow(2,32)+n}var at=new Int32Array(2),ct=new Float32Array(at.buffer),ft=new Float64Array(at.buffer);function ht(t,e){return at[0]=et(t,e),ct[0]}function ut(t,e){return at[0]=et(t,e),at[1]=et(t,e),ft[0]}function dt(t,e){return Q(t,e)>0}function pt(t,e){var n,o=t[e.offset++];o<192?n=31&o:217===o?n=Q(t,e):218===o?n=tt(t,e):219===o&&(n=nt(t,e));var r=Y(t,e.offset,n);return e.offset+=n,r}function lt(t,e){var n=t[e.offset];return n<192&&n>160||217===n||218===n||219===n}function vt(t,e){var n=t[e.offset++];return n<128?n:202===n?ht(t,e):203===n?ut(t,e):204===n?Q(t,e):205===n?tt(t,e):206===n?nt(t,e):207===n?st(t,e):208===n?G(t,e):209===n?Z(t,e):210===n?et(t,e):211===n?it(t,e):n>223?-1*(255-n+1):void 0}function yt(t,e){var n=t[e.offset];return n<128||n>=202&&n<=211}function gt(t,e){return t[e.offset]<160}function mt(t,e){return t[e.offset-1]===s&&(t[e.offset]<128||t[e.offset]>=202&&t[e.offset]<=211)}var wt=Object.freeze({__proto__:null,int8:G,uint8:Q,int16:Z,uint16:tt,int32:et,uint32:nt,float32:ot,float64:rt,int64:it,uint64:st,readFloat32:ht,readFloat64:ut,boolean:dt,string:pt,stringCheck:lt,number:vt,numberCheck:yt,arrayCheck:gt,switchStructureCheck:mt}),Et=function(){function e(t){var e=this;this.$changes=new c(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,t&&t.forEach((function(t){return e.add(t)}))}return e.prototype.onAdd=function(e,n){return void 0===n&&(n=!0),f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.ADD,e,n?this.$items:void 0)},e.prototype.onRemove=function(e){return f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.DELETE,e)},e.prototype.onChange=function(e){return f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.REPLACE,e)},e.is=function(t){return void 0!==t.collection},e.prototype.add=function(t){var e=this.$refId++;return void 0!==t.$changes&&t.$changes.setParent(this,this.$changes.root,e),this.$changes.indexes[e]=e,this.$indexes.set(e,e),this.$items.set(e,t),this.$changes.change(e),e},e.prototype.at=function(t){var e=Array.from(this.$items.keys())[t];return this.$items.get(e)},e.prototype.entries=function(){return this.$items.entries()},e.prototype.delete=function(t){for(var e,n,o=this.$items.entries();(n=o.next())&&!n.done;)if(t===n.value[1]){e=n.value[0];break}return void 0!==e&&(this.$changes.delete(e),this.$indexes.delete(e),this.$items.delete(e))},e.prototype.clear=function(e){this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),e&&h.call(this,e),this.$items.clear(),this.$changes.operation({index:0,op:t.OPERATION.CLEAR}),this.$changes.touchParents()},e.prototype.has=function(t){return Array.from(this.$items.values()).some((function(e){return e===t}))},e.prototype.forEach=function(t){var e=this;this.$items.forEach((function(n,o,r){return t(n,o,e)}))},e.prototype.values=function(){return this.$items.values()},Object.defineProperty(e.prototype,"size",{get:function(){return this.$items.size},enumerable:!1,configurable:!0}),e.prototype.setIndex=function(t,e){this.$indexes.set(t,e)},e.prototype.getIndex=function(t){return this.$indexes.get(t)},e.prototype.getByIndex=function(t){return this.$items.get(this.$indexes.get(t))},e.prototype.deleteByIndex=function(t){var e=this.$indexes.get(t);this.$items.delete(e),this.$indexes.delete(t)},e.prototype.toArray=function(){return Array.from(this.$items.values())},e.prototype.toJSON=function(){var t=[];return this.forEach((function(e,n){t.push("function"==typeof e.toJSON?e.toJSON():e)})),t},e.prototype.clone=function(t){var n;return t?n=Object.assign(new e,this):(n=new e,this.forEach((function(t){t.$changes?n.add(t.clone()):n.add(t)}))),n},e}(),At=function(){function e(t){var e=this;this.$changes=new c(this),this.$items=new Map,this.$indexes=new Map,this.$refId=0,t&&t.forEach((function(t){return e.add(t)}))}return e.prototype.onAdd=function(e,n){return void 0===n&&(n=!0),f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.ADD,e,n?this.$items:void 0)},e.prototype.onRemove=function(e){return f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.DELETE,e)},e.prototype.onChange=function(e){return f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.REPLACE,e)},e.is=function(t){return void 0!==t.set},e.prototype.add=function(e){var n,o;if(this.has(e))return!1;var r=this.$refId++;void 0!==e.$changes&&e.$changes.setParent(this,this.$changes.root,r);var i=null!==(o=null===(n=this.$changes.indexes[r])||void 0===n?void 0:n.op)&&void 0!==o?o:t.OPERATION.ADD;return this.$changes.indexes[r]=r,this.$indexes.set(r,r),this.$items.set(r,e),this.$changes.change(r,i),r},e.prototype.entries=function(){return this.$items.entries()},e.prototype.delete=function(t){for(var e,n,o=this.$items.entries();(n=o.next())&&!n.done;)if(t===n.value[1]){e=n.value[0];break}return void 0!==e&&(this.$changes.delete(e),this.$indexes.delete(e),this.$items.delete(e))},e.prototype.clear=function(e){this.$changes.discard(!0,!0),this.$changes.indexes={},this.$indexes.clear(),e&&h.call(this,e),this.$items.clear(),this.$changes.operation({index:0,op:t.OPERATION.CLEAR}),this.$changes.touchParents()},e.prototype.has=function(t){for(var e,n=this.$items.values(),o=!1;(e=n.next())&&!e.done;)if(t===e.value){o=!0;break}return o},e.prototype.forEach=function(t){var e=this;this.$items.forEach((function(n,o,r){return t(n,o,e)}))},e.prototype.values=function(){return this.$items.values()},Object.defineProperty(e.prototype,"size",{get:function(){return this.$items.size},enumerable:!1,configurable:!0}),e.prototype.setIndex=function(t,e){this.$indexes.set(t,e)},e.prototype.getIndex=function(t){return this.$indexes.get(t)},e.prototype.getByIndex=function(t){return this.$items.get(this.$indexes.get(t))},e.prototype.deleteByIndex=function(t){var e=this.$indexes.get(t);this.$items.delete(e),this.$indexes.delete(t)},e.prototype.toArray=function(){return Array.from(this.$items.values())},e.prototype.toJSON=function(){var t=[];return this.forEach((function(e,n){t.push("function"==typeof e.toJSON?e.toJSON():e)})),t},e.prototype.clone=function(t){var n;return t?n=Object.assign(new e,this):(n=new e,this.forEach((function(t){t.$changes?n.add(t.clone()):n.add(t)}))),n},e}(),_t=function(){function t(){this.refIds=new WeakSet,this.containerIndexes=new WeakMap}return t.prototype.addRefId=function(t){this.refIds.has(t)||(this.refIds.add(t),this.containerIndexes.set(t,new Set))},t.get=function(e){return void 0===e.$filterState&&(e.$filterState=new t),e.$filterState},t}(),Ot=function(){function t(){this.refs=new Map,this.refCounts={},this.deletedRefs=new Set,this.nextUniqueId=0}return t.prototype.getNextUniqueId=function(){return this.nextUniqueId++},t.prototype.addRef=function(t,e,n){void 0===n&&(n=!0),this.refs.set(t,e),n&&(this.refCounts[t]=(this.refCounts[t]||0)+1)},t.prototype.removeRef=function(t){this.refCounts[t]=this.refCounts[t]-1,this.deletedRefs.add(t)},t.prototype.clearRefs=function(){this.refs.clear(),this.deletedRefs.clear(),this.refCounts={}},t.prototype.garbageCollectDeletedRefs=function(){var t=this;this.deletedRefs.forEach((function(e){if(!(t.refCounts[e]>0)){var n=t.refs.get(e);if(n instanceof Rt)for(var o in n._definition.schema)"string"!=typeof n._definition.schema[o]&&n[o]&&n[o].$changes&&t.removeRef(n[o].$changes.refId);else{var r=n.$changes.parent._definition,i=r.schema[r.fieldsByIndex[n.$changes.parentIndex]];"function"==typeof Object.values(i)[0]&&Array.from(n.values()).forEach((function(e){return t.removeRef(e.$changes.refId)}))}t.refs.delete(e),delete t.refCounts[e]}})),this.deletedRefs.clear()},t}(),$t=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(Error);function bt(t,e,n,o){var r,i=!1;switch(e){case"number":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":case"int64":case"uint64":case"float32":case"float64":r="number",isNaN(t)&&console.log('trying to encode "NaN" in '.concat(n.constructor.name,"#").concat(o));break;case"string":r="string",i=!0;break;case"boolean":return}if(typeof t!==r&&(!i||i&&null!==t)){var s="'".concat(JSON.stringify(t),"'").concat(t&&t.constructor&&" (".concat(t.constructor.name,")")||"");throw new $t("a '".concat(r,"' was expected, but ").concat(s," was provided in ").concat(n.constructor.name,"#").concat(o))}}function It(t,e,n,o){if(!(t instanceof e))throw new $t("a '".concat(e.name,"' was expected, but '").concat(t.constructor.name,"' was provided in ").concat(n.constructor.name,"#").concat(o))}function xt(t,e,n,o,r){bt(n,t,o,r);var i=X[t];if(!i)throw new $t("a '".concat(t,"' was expected, but ").concat(n," was provided in ").concat(o.constructor.name,"#").concat(r));i(e,n)}function Tt(t,e,n){return wt[t](e,n)}var Rt=function(){function e(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Object.defineProperties(this,{$changes:{value:new c(this,void 0,new Ot),enumerable:!1,writable:!0},$callbacks:{value:void 0,enumerable:!1,writable:!0}});var n=this._definition.descriptors;n&&Object.defineProperties(this,n),t[0]&&this.assign(t[0])}return e.onError=function(t){console.error(t)},e.is=function(t){return t._definition&&void 0!==t._definition.schema},e.prototype.onChange=function(e){return f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.REPLACE,e)},e.prototype.onRemove=function(e){return f(this.$callbacks||(this.$callbacks=[]),t.OPERATION.DELETE,e)},e.prototype.assign=function(t){return Object.assign(this,t),this},Object.defineProperty(e.prototype,"_definition",{get:function(){return this.constructor._definition},enumerable:!1,configurable:!0}),e.prototype.setDirty=function(t,e){this.$changes.change(t,e)},e.prototype.listen=function(t,e,n){var o=this;return void 0===n&&(n=!0),this.$callbacks||(this.$callbacks={}),this.$callbacks[t]||(this.$callbacks[t]=[]),this.$callbacks[t].push(e),n&&void 0!==this[t]&&e(this[t],void 0),function(){return u(o.$callbacks[t],o.$callbacks[t].indexOf(e))}},e.prototype.decode=function(n,o,r){var i;void 0===o&&(o={offset:0}),void 0===r&&(r=this);var a=[],c=this.$changes.root,f=n.length,h=0;for(c.refs.set(h,this);o.offset<f;){var u=n[o.offset++];if(u!=s){var d=r.$changes,p=void 0!==r._definition,v=p?u>>6<<6:u;if(v!==t.OPERATION.CLEAR){var g=p?u%(v||255):vt(n,o),m=p?r._definition.fieldsByIndex[g]:"",E=d.getType(g),A=void 0,_=void 0,O=void 0;if(p?_=r["_".concat(m)]:(_=r.getByIndex(g),(v&t.OPERATION.ADD)===t.OPERATION.ADD?(O=r instanceof y?pt(n,o):g,r.setIndex(g,O)):O=r.getIndex(g)),(v&t.OPERATION.DELETE)===t.OPERATION.DELETE&&(v!==t.OPERATION.DELETE_AND_ADD&&r.deleteByIndex(g),_&&_.$changes&&c.removeRef(_.$changes.refId),A=null),void 0!==m){if(v===t.OPERATION.DELETE);else if(e.is(E)){var $=vt(n,o);if(A=c.refs.get($),v!==t.OPERATION.REPLACE){var b=this.getSchemaType(n,o,E);A||((A=this.createTypeInstance(b)).$changes.refId=$,_&&(A.$callbacks=_.$callbacks,_.$changes.refId&&$!==_.$changes.refId&&c.removeRef(_.$changes.refId))),c.addRef($,A,A!==_)}}else if("string"==typeof E)A=Tt(E,n,o);else{var I=w(Object.keys(E)[0]),x=vt(n,o),T=c.refs.has(x)?_||c.refs.get(x):new I.constructor;if((A=T.clone(!0)).$changes.refId=x,_&&(A.$callbacks=_.$callbacks,_.$changes.refId&&x!==_.$changes.refId)){c.removeRef(_.$changes.refId);for(var R=_.entries(),C=void 0;(C=R.next())&&!C.done;){var P=(i=C.value)[0],k=i[1];a.push({refId:x,op:t.OPERATION.DELETE,field:P,value:void 0,previousValue:k})}}c.addRef(x,A,T!==_)}if(null!=A)if(A.$changes&&A.$changes.setParent(d.ref,d.root,g),r instanceof e)r[m]=A;else if(r instanceof y)P=O,r.$items.set(P,A),r.$changes.allChanges.add(g);else if(r instanceof l)r.setAt(g,A);else if(r instanceof Et){var D=r.add(A);r.setIndex(g,D)}else r instanceof At&&!1!==(D=r.add(A))&&r.setIndex(g,D);_!==A&&a.push({refId:h,op:v,field:m,dynamicIndex:O,value:A,previousValue:_})}else{console.warn("@colyseus/schema: definition mismatch");for(var S={offset:o.offset};o.offset<f&&(!mt(n,o)||(S.offset=o.offset+1,!c.refs.has(vt(n,S))));)o.offset++}}else r.clear(a)}else{h=vt(n,o);var N=c.refs.get(h);if(!N)throw new Error('"refId" not found: '.concat(h));r=N}}return this._triggerChanges(a),c.garbageCollectDeletedRefs(),a},e.prototype.encode=function(n,o,r){void 0===n&&(n=!1),void 0===o&&(o=[]),void 0===r&&(r=!1);for(var i=this.$changes,a=new WeakSet,c=[i],f=1,h=0;h<f;h++){var u=c[h],d=u.ref,p=d instanceof e;u.ensureRefId(),a.add(u),u!==i&&(u.changed||n)&&(k(o,s),K(o,u.refId));for(var l=n?Array.from(u.allChanges):Array.from(u.changes.values()),v=0,g=l.length;v<g;v++){var m=n?{op:t.OPERATION.ADD,index:l[v]}:l[v],E=m.index,A=p?d._definition.fieldsByIndex&&d._definition.fieldsByIndex[E]:E,_=o.length;if(m.op!==t.OPERATION.TOUCH)if(p)k(o,E|m.op);else{if(k(o,m.op),m.op===t.OPERATION.CLEAR)continue;K(o,E)}if(p||(m.op&t.OPERATION.ADD)!=t.OPERATION.ADD||d instanceof y&&q(o,u.ref.$indexes.get(E)),m.op!==t.OPERATION.DELETE){var O=u.getType(E),$=u.getValue(E);if($&&$.$changes&&!a.has($.$changes)&&(c.push($.$changes),$.$changes.ensureRefId(),f++),m.op!==t.OPERATION.TOUCH){if(e.is(O))It($,O,d,A),K(o,$.$changes.refId),(m.op&t.OPERATION.ADD)===t.OPERATION.ADD&&this.tryEncodeTypeId(o,O,$.constructor);else if("string"==typeof O)xt(O,o,$,d,A);else{var b=w(Object.keys(O)[0]);It(d["_".concat(A)],b.constructor,d,A),K(o,$.$changes.refId)}r&&u.cache(E,o.slice(_))}}}n||r||u.discard()}return o},e.prototype.encodeAll=function(t){return this.encode(!0,[],t)},e.prototype.applyFilters=function(n,o){var r,i;void 0===o&&(o=!1);for(var a=this,c=new Set,f=_t.get(n),h=[this.$changes],u=1,d=[],p=function(p){var l=h[p];if(c.has(l.refId))return"continue";var v=l.ref,g=v instanceof e;k(d,s),K(d,l.refId);var m=f.refIds.has(l),w=o||!m;f.addRefId(l);var E=f.containerIndexes.get(l),A=w?Array.from(l.allChanges):Array.from(l.changes.values());!o&&g&&v._definition.indexesWithFilters&&v._definition.indexesWithFilters.forEach((function(e){!E.has(e)&&l.allChanges.has(e)&&(w?A.push(e):A.push({op:t.OPERATION.ADD,index:e}))}));for(var _=0,O=A.length;_<O;_++){var $=w?{op:t.OPERATION.ADD,index:A[_]}:A[_];if($.op!==t.OPERATION.CLEAR){var b=$.index;if($.op!==t.OPERATION.DELETE){var I=l.getValue(b),x=l.getType(b);if(g){if((T=v._definition.filters&&v._definition.filters[b])&&!T.call(v,n,I,a)){I&&I.$changes&&c.add(I.$changes.refId);continue}}else{var T,R=l.parent;if((T=l.getChildrenFilter())&&!T.call(R,n,v.$indexes.get(b),I,a)){I&&I.$changes&&c.add(I.$changes.refId);continue}}if(I.$changes&&(h.push(I.$changes),u++),$.op!==t.OPERATION.TOUCH)if($.op===t.OPERATION.ADD||g)d.push.apply(d,null!==(r=l.caches[b])&&void 0!==r?r:[]),E.add(b);else if(E.has(b))d.push.apply(d,null!==(i=l.caches[b])&&void 0!==i?i:[]);else{if(E.add(b),k(d,t.OPERATION.ADD),K(d,b),v instanceof y){var C=l.ref.$indexes.get(b);q(d,C)}I.$changes?K(d,I.$changes.refId):X[x](d,I)}else I.$changes&&!g&&(k(d,t.OPERATION.ADD),K(d,b),v instanceof y&&(C=l.ref.$indexes.get(b),q(d,C)),K(d,I.$changes.refId))}else g?k(d,$.op|b):(k(d,$.op),K(d,b))}else k(d,$.op)}},l=0;l<u;l++)p(l);return d},e.prototype.clone=function(){var t,e=new this.constructor,n=this._definition.schema;for(var o in n)"object"==typeof this[o]&&"function"==typeof(null===(t=this[o])||void 0===t?void 0:t.clone)?e[o]=this[o].clone():e[o]=this[o];return e},e.prototype.toJSON=function(){var t=this._definition.schema,e=this._definition.deprecated,n={};for(var o in t)e[o]||null===this[o]||void 0===this[o]||(n[o]="function"==typeof this[o].toJSON?this[o].toJSON():this["_".concat(o)]);return n},e.prototype.discardAllChanges=function(){this.$changes.discardAll()},e.prototype.getByIndex=function(t){return this[this._definition.fieldsByIndex[t]]},e.prototype.deleteByIndex=function(t){this[this._definition.fieldsByIndex[t]]=void 0},e.prototype.tryEncodeTypeId=function(t,e,n){e._typeid!==n._typeid&&(k(t,a),K(t,n._typeid))},e.prototype.getSchemaType=function(t,e,n){var o;return t[e.offset]===a&&(e.offset++,o=this.constructor._context.get(vt(t,e))),o||n},e.prototype.createTypeInstance=function(t){var e=new t;return e.$changes.root=this.$changes.root,e},e.prototype._triggerChanges=function(n){for(var o,r,i,s,a,c,f,h,u,d=new Set,p=this.$changes.root.refs,l=function(l){var v=n[l],y=v.refId,g=p.get(y),m=g.$callbacks;if((v.op&t.OPERATION.DELETE)===t.OPERATION.DELETE&&v.previousValue instanceof e&&(null===(r=null===(o=v.previousValue.$callbacks)||void 0===o?void 0:o[t.OPERATION.DELETE])||void 0===r||r.forEach((function(t){return t()}))),!m)return"continue";if(g instanceof e){if(!d.has(y))try{null===(i=null==m?void 0:m[t.OPERATION.REPLACE])||void 0===i||i.forEach((function(t){return t(n)}))}catch(t){e.onError(t)}try{m.hasOwnProperty(v.field)&&(null===(s=m[v.field])||void 0===s||s.forEach((function(t){return t(v.value,v.previousValue)})))}catch(t){e.onError(t)}}else v.op===t.OPERATION.ADD&&void 0===v.previousValue?null===(a=m[t.OPERATION.ADD])||void 0===a||a.forEach((function(t){var e;return t(v.value,null!==(e=v.dynamicIndex)&&void 0!==e?e:v.field)})):v.op===t.OPERATION.DELETE?void 0!==v.previousValue&&(null===(c=m[t.OPERATION.DELETE])||void 0===c||c.forEach((function(t){var e;return t(v.previousValue,null!==(e=v.dynamicIndex)&&void 0!==e?e:v.field)}))):v.op===t.OPERATION.DELETE_AND_ADD&&(void 0!==v.previousValue&&(null===(f=m[t.OPERATION.DELETE])||void 0===f||f.forEach((function(t){var e;return t(v.previousValue,null!==(e=v.dynamicIndex)&&void 0!==e?e:v.field)}))),null===(h=m[t.OPERATION.ADD])||void 0===h||h.forEach((function(t){var e;return t(v.value,null!==(e=v.dynamicIndex)&&void 0!==e?e:v.field)}))),v.value!==v.previousValue&&(null===(u=m[t.OPERATION.REPLACE])||void 0===u||u.forEach((function(t){var e;return t(v.value,null!==(e=v.dynamicIndex)&&void 0!==e?e:v.field)})));d.add(y)},v=0;v<n.length;v++)l(v)},e._definition=E.create(),e}();function Ct(t){for(var e=[t.$changes],n=1,o={},r=o,i=function(t){var n=e[t];n.changes.forEach((function(t){var e=n.ref,o=t.index,i=e._definition?e._definition.fieldsByIndex[o]:e.$indexes.get(o);r[i]=n.getValue(o)}))},s=0;s<n;s++)i(s);return o}var Pt={context:new _},kt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),o([$("string",Pt)],e.prototype,"name",void 0),o([$("string",Pt)],e.prototype,"type",void 0),o([$("number",Pt)],e.prototype,"referencedType",void 0),e}(Rt),Dt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fields=new l,e}return n(e,t),o([$("number",Pt)],e.prototype,"id",void 0),o([$([kt],Pt)],e.prototype,"fields",void 0),e}(Rt),St=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.types=new l,e}return n(e,t),e.encode=function(t){var n=t.constructor,o=new e;o.rootType=n._typeid;var r=function(t,e){for(var n in e){var r=new kt;r.name=n;var i=void 0;if("string"==typeof e[n])i=e[n];else{var s=e[n],a=void 0;Rt.is(s)?(i="ref",a=e[n]):"string"==typeof s[i=Object.keys(s)[0]]?i+=":"+s[i]:a=s[i],r.referencedType=a?a._typeid:-1}r.type=i,t.fields.push(r)}o.types.push(t)},i=n._context.types;for(var s in i){var a=new Dt;a.id=Number(s),r(a,i[s]._definition.schema)}return o.encodeAll()},e.decode=function(t,o){var r=new _,i=new e;i.decode(t,o);var s=i.types.reduce((function(t,e){var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(Rt),i=e.id;return t[i]=o,r.add(o,i),t}),{});i.types.forEach((function(t){var e=s[t.id];t.fields.forEach((function(t){var n;if(void 0!==t.referencedType){var o=t.type,i=s[t.referencedType];if(!i){var a=t.type.split(":");o=a[0],i=a[1]}"ref"===o?$(i,{context:r})(e.prototype,t.name):$(((n={})[o]=i,n),{context:r})(e.prototype,t.name)}else $(t.type,{context:r})(e.prototype,t.name)}))}));var a=s[i.rootType],c=new a;for(var f in a._definition.schema){var h=a._definition.schema[f];"string"!=typeof h&&(c[f]="function"==typeof h?new h:new(w(Object.keys(h)[0]).constructor))}return c},o([$([Dt],Pt)],e.prototype,"types",void 0),o([$("number",Pt)],e.prototype,"rootType",void 0),e}(Rt);m("map",{constructor:y}),m("array",{constructor:l}),m("set",{constructor:At}),m("collection",{constructor:Et}),t.ArraySchema=l,t.CollectionSchema=Et,t.Context=_,t.MapSchema=y,t.Reflection=St,t.ReflectionField=kt,t.ReflectionType=Dt,t.Schema=Rt,t.SchemaDefinition=E,t.SetSchema=At,t.decode=wt,t.defineTypes=T,t.deprecated=x,t.dumpChanges=Ct,t.encode=X,t.filter=b,t.filterChildren=I,t.hasFilter=A,t.registerType=m,t.type=$,Object.defineProperty(t,"__esModule",{value:!0})}(e)})),T=function(){function e(t,e){var n=this;this.onStateChange=I(),this.onError=I(),this.onLeave=I(),this.onJoin=I(),this.hasJoined=!1,this.onMessageHandlers={emit:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var o=this.events[t]||[],r=0,i=o.length;r<i;r++)o[r].apply(o,e)},events:{},on:function(t,e){var n,o=this;return(null===(n=this.events[t])||void 0===n?void 0:n.push(e))||(this.events[t]=[e]),function(){var n;o.events[t]=null===(n=o.events[t])||void 0===n?void 0:n.filter((function(t){return e!==t}))}}},this.roomId=null,this.name=t,e&&(this.serializer=new($("schema")),this.rootSchema=e,this.serializer.state=new e),this.onError((function(t,e){var n;return null===(n=console.warn)||void 0===n?void 0:n.call(console,"colyseus.js - onError => (".concat(t,") ").concat(e))})),this.onLeave((function(){return n.removeAllListeners()}))}return Object.defineProperty(e.prototype,"id",{get:function(){return this.roomId},enumerable:!1,configurable:!0}),e.prototype.connect=function(t,n,o){void 0===o&&(o=this);var i=new w;o.connection=i,i.events.onmessage=e.prototype.onMessageCallback.bind(o),i.events.onclose=function(t){var e;if(!o.hasJoined)return null===(e=console.warn)||void 0===e||e.call(console,"Room connection was closed unexpectedly (".concat(t.code,"): ").concat(t.reason)),void o.onError.invoke(t.code,t.reason);t.code===r.DEVMODE_RESTART&&n?n():(o.onLeave.invoke(t.code),o.destroy())},i.events.onerror=function(t){var e;null===(e=console.warn)||void 0===e||e.call(console,"Room, onError (".concat(t.code,"): ").concat(t.reason)),o.onError.invoke(t.code,t.reason)},i.connect(t)},e.prototype.leave=function(e){var n=this;return void 0===e&&(e=!0),new Promise((function(o){n.onLeave((function(t){return o(t)})),n.connection?e?n.connection.send([t.Protocol.LEAVE_ROOM]):n.connection.close():n.onLeave.invoke(r.CONSENTED)}))},e.prototype.onMessage=function(t,e){return this.onMessageHandlers.on(this.getMessageHandlerKey(t),e)},e.prototype.send=function(e,n){var o,r=[t.Protocol.ROOM_DATA];if("string"==typeof e?x.encode.string(r,e):x.encode.number(r,e),void 0!==n){var i=l(n);(o=new Uint8Array(r.length+i.byteLength)).set(new Uint8Array(r),0),o.set(new Uint8Array(i),r.length)}else o=new Uint8Array(r);this.connection.send(o.buffer)},e.prototype.sendBytes=function(e,n){var o,r=[t.Protocol.ROOM_DATA_BYTES];"string"==typeof e?x.encode.string(r,e):x.encode.number(r,e),(o=new Uint8Array(r.length+(n.byteLength||n.length))).set(new Uint8Array(r),0),o.set(new Uint8Array(n),r.length),this.connection.send(o.buffer)},Object.defineProperty(e.prototype,"state",{get:function(){return this.serializer.getState()},enumerable:!1,configurable:!0}),e.prototype.removeAllListeners=function(){this.onJoin.clear(),this.onStateChange.clear(),this.onError.clear(),this.onLeave.clear(),this.onMessageHandlers.events={}},e.prototype.onMessageCallback=function(e){var n=Array.from(new Uint8Array(e.data)),o=n[0];if(o===t.Protocol.JOIN_ROOM){var r=1,i=E(n,r);if(r+=A(i),this.serializerId=E(n,r),r+=A(this.serializerId),!this.serializer){var s=$(this.serializerId);this.serializer=new s}n.length>r&&this.serializer.handshake&&this.serializer.handshake(n,{offset:r}),this.reconnectionToken="".concat(this.roomId,":").concat(i),this.hasJoined=!0,this.onJoin.invoke(),this.connection.send([t.Protocol.JOIN_ROOM])}else if(o===t.Protocol.ERROR){var a={offset:1},c=x.decode.number(n,a),f=x.decode.string(n,a);this.onError.invoke(c,f)}else if(o===t.Protocol.LEAVE_ROOM)this.leave();else if(o===t.Protocol.ROOM_DATA_SCHEMA){var h={offset:1};(f=new(p=this.serializer.getState().constructor._context.get(x.decode.number(n,h)))).decode(n,h),this.dispatchMessage(p,f)}else if(o===t.Protocol.ROOM_STATE)n.shift(),this.setState(n);else if(o===t.Protocol.ROOM_STATE_PATCH)n.shift(),this.patch(n);else if(o===t.Protocol.ROOM_DATA){var d={offset:1},p=x.decode.stringCheck(n,d)?x.decode.string(n,d):x.decode.number(n,d);f=n.length>d.offset?function(t,e){void 0===e&&(e=0);var n=new u(t,e),o=n._parse();if(n._offset!==t.byteLength)throw new Error(t.byteLength-n._offset+" trailing bytes");return o}(e.data,d.offset):void 0;this.dispatchMessage(p,f)}else if(o===t.Protocol.ROOM_DATA_BYTES){var l={offset:1};p=x.decode.stringCheck(n,l)?x.decode.string(n,l):x.decode.number(n,l);this.dispatchMessage(p,new Uint8Array(n.slice(l.offset)))}},e.prototype.setState=function(t){this.serializer.setState(t),this.onStateChange.invoke(this.serializer.getState())},e.prototype.patch=function(t){this.serializer.patch(t),this.onStateChange.invoke(this.serializer.getState())},e.prototype.dispatchMessage=function(t,e){var n,o=this.getMessageHandlerKey(t);this.onMessageHandlers.events[o]?this.onMessageHandlers.emit(o,e):this.onMessageHandlers.events["*"]?this.onMessageHandlers.emit("*",t,e):null===(n=console.warn)||void 0===n||n.call(console,"colyseus.js: onMessage() not registered for type '".concat(t,"'."))},e.prototype.destroy=function(){this.serializer&&this.serializer.teardown()},e.prototype.getMessageHandlerKey=function(t){switch(typeof t){case"function":return"$".concat(t._typeid);case"string":return t;case"number":return"i".concat(t);default:throw new Error("invalid message type.")}},e}();function R(t,e){e.headers=t.headers||{},e.statusMessage=t.statusText,e.statusCode=t.status,e.data=t.response}function C(t,e,n){return new Promise((function(o,r){n=n||{};var i,s,a,c=new XMLHttpRequest,f=n.body,h=n.headers||{};for(i in n.timeout&&(c.timeout=n.timeout),c.ontimeout=c.onerror=function(t){t.timeout="timeout"==t.type,r(t)},c.open(t,e.href||e),c.onload=function(){for(a=c.getAllResponseHeaders().trim().split(/[\r\n]+/),R(c,c);s=a.shift();)s=s.split(": "),c.headers[s.shift().toLowerCase()]=s.join(": ");if((s=c.headers["content-type"])&&~s.indexOf("application/json"))try{c.data=JSON.parse(c.data,n.reviver)}catch(t){return R(c,t),r(t)}(c.status>=400?r:o)(c)},typeof FormData<"u"&&f instanceof FormData||f&&"object"==typeof f&&(h["content-type"]="application/json",f=JSON.stringify(f)),c.withCredentials=!!n.withCredentials,h)c.setRequestHeader(i,h[i]);c.send(f)}))}var P,k,D,S,N,M=C.bind(C,"GET"),L=C.bind(C,"POST"),j=C.bind(C,"PATCH"),U=C.bind(C,"DELETE"),F=C.bind(C,"PUT"),H={del:U,get:M,patch:j,post:L,put:F,send:C},B=e({__proto__:null,default:H,del:U,get:M,patch:j,post:L,put:F,send:C},[H]),V=function(){function t(t){this.client=t}return t.prototype.get=function(t,e){return void 0===e&&(e={}),this.request("get",t,e)},t.prototype.post=function(t,e){return void 0===e&&(e={}),this.request("post",t,e)},t.prototype.del=function(t,e){return void 0===e&&(e={}),this.request("del",t,e)},t.prototype.put=function(t,e){return void 0===e&&(e={}),this.request("put",t,e)},t.prototype.request=function(t,e,n){return void 0===n&&(n={}),B[t](this.client.getHttpEndpoint(e),this.getOptions(n)).catch((function(t){var e;throw new h(t.statusCode||-1,(null===(e=t.data)||void 0===e?void 0:e.error)||t.statusMessage||t.message||"offline")}))},t.prototype.getOptions=function(t){return this.authToken&&(t.headers||(t.headers={}),t.headers.Authorization="Bearer ".concat(this.authToken),t.withCredentials=!0),t},t}();function z(){return P||(P="undefined"!=typeof cc&&cc.sys&&cc.sys.localStorage?cc.sys.localStorage:"undefined"!=typeof window&&window.localStorage?window.localStorage:{cache:{},setItem:function(t,e){this.cache[t]=e},getItem:function(t){this.cache[t]},removeItem:function(t){delete this.cache[t]}}),P}var J,W=function(){function t(t){var e,n,o,r=this;this.http=t,this.settings={path:"/auth",key:"colyseus-auth-token"},k.set(this,!1),D.set(this,void 0),S.set(this,void 0),N.set(this,{emit:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var o=this.events[t]||[],r=0,i=o.length;r<i;r++)o[r].apply(o,e)},events:{},on:function(t,e){var n,o=this;return(null===(n=this.events[t])||void 0===n?void 0:n.push(e))||(this.events[t]=[e]),function(){var n;o.events[t]=null===(n=o.events[t])||void 0===n?void 0:n.filter((function(t){return e!==t}))}}}),e=this.settings.key,n=function(t){return r.token=t},o=z().getItem(e),"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(t){return n(t)})):n(o)}return Object.defineProperty(t.prototype,"token",{get:function(){return this.http.authToken},set:function(t){this.http.authToken=t},enumerable:!1,configurable:!0}),t.prototype.onChange=function(t){var e=this,n=c(this,N,"f").on("change",t);return c(this,k,"f")||f(this,D,new Promise((function(t,n){e.getUserData().then((function(t){e.emitChange(i(i({},t),{token:e.token}))})).catch((function(t){e.emitChange({user:null,token:void 0})})).finally((function(){t()}))})),"f"),f(this,k,!0,"f"),n},t.prototype.getUserData=function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return this.token?[4,this.http.get("".concat(this.settings.path,"/userdata"))]:[3,2];case 1:return[2,t.sent().data];case 2:throw new Error("missing auth.token")}}))}))},t.prototype.registerWithEmailAndPassword=function(t,e,n){return s(this,void 0,void 0,(function(){var o;return a(this,(function(r){switch(r.label){case 0:return[4,this.http.post("".concat(this.settings.path,"/register"),{body:{email:t,password:e,options:n}})];case 1:return o=r.sent().data,this.emitChange(o),[2,o]}}))}))},t.prototype.signInWithEmailAndPassword=function(t,e){return s(this,void 0,void 0,(function(){var n;return a(this,(function(o){switch(o.label){case 0:return[4,this.http.post("".concat(this.settings.path,"/login"),{body:{email:t,password:e}})];case 1:return n=o.sent().data,this.emitChange(n),[2,n]}}))}))},t.prototype.signInAnonymously=function(t){return s(this,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:return[4,this.http.post("".concat(this.settings.path,"/anonymous"),{body:{options:t}})];case 1:return e=n.sent().data,this.emitChange(e),[2,e]}}))}))},t.prototype.sendPasswordResetEmail=function(t){return s(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.http.post("".concat(this.settings.path,"/forgot-password"),{body:{email:t}})];case 1:return[2,e.sent().data]}}))}))},t.prototype.signInWithProvider=function(t,e){return void 0===e&&(e={}),s(this,void 0,void 0,(function(){var n=this;return a(this,(function(o){return[2,new Promise((function(o,r){var i=e.width||480,s=e.height||768,a=n.token?"?token=".concat(n.token):"",h="Login with ".concat(t[0].toUpperCase()+t.substring(1)),u=n.http.client.getHttpEndpoint("".concat(e.prefix||"".concat(n.settings.path,"/provider"),"/").concat(t).concat(a)),d=screen.width/2-i/2,p=screen.height/2-s/2;f(n,S,window.open(u,h,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+i+", height="+s+", top="+p+", left="+d),"f");var l=function t(e){void 0===e.data.user&&void 0===e.data.token||(clearInterval(v),c(n,S,"f").close(),f(n,S,void 0,"f"),window.removeEventListener("message",t),void 0!==e.data.error?r(e.data.error):(o(e.data),n.emitChange(e.data)))},v=setInterval((function(){c(n,S,"f")&&!c(n,S,"f").closed||(f(n,S,void 0,"f"),r("cancelled"),window.removeEventListener("message",l))}),200);window.addEventListener("message",l)}))]}))}))},t.prototype.signOut=function(){return s(this,void 0,void 0,(function(){return a(this,(function(t){return this.emitChange({user:null,token:null}),[2]}))}))},t.prototype.emitChange=function(t){var e;void 0!==t.token&&(this.token=t.token,null===t.token?(e=this.settings.key,z().removeItem(e)):function(t,e){z().setItem(t,e)}(this.settings.key,t.token)),c(this,N,"f").emit("change",t)},t}();k=new WeakMap,D=new WeakMap,S=new WeakMap,N=new WeakMap;var q=function(t){function e(n,o){var r=t.call(this,n)||this;return r.code=o,Object.setPrototypeOf(r,e.prototype),r}return o(e,t),e}(Error),K="undefined"!=typeof window&&void 0!==(null===(J=null===window||void 0===window?void 0:window.location)||void 0===J?void 0:J.hostname)?"".concat(window.location.protocol.replace("http","ws"),"//").concat(window.location.hostname).concat(window.location.port&&":".concat(window.location.port)):"ws://127.0.0.1:2567",X=function(){function t(t){if(void 0===t&&(t=K),"string"==typeof t){var e=new URL(t),n="https:"===e.protocol||"wss:"===e.protocol,o=Number(e.port||(n?443:80));this.settings={hostname:e.hostname,pathname:e.pathname,port:o,secure:n}}else void 0===t.port&&(t.port=t.secure?443:80),void 0===t.pathname&&(t.pathname=""),this.settings=t;this.settings.pathname.endsWith("/")&&(this.settings.pathname=this.settings.pathname.slice(0,-1)),this.http=new V(this),this.auth=new W(this.http)}return t.prototype.joinOrCreate=function(t,e,n){return void 0===e&&(e={}),s(this,void 0,void 0,(function(){return a(this,(function(o){switch(o.label){case 0:return[4,this.createMatchMakeRequest("joinOrCreate",t,e,n)];case 1:return[2,o.sent()]}}))}))},t.prototype.create=function(t,e,n){return void 0===e&&(e={}),s(this,void 0,void 0,(function(){return a(this,(function(o){switch(o.label){case 0:return[4,this.createMatchMakeRequest("create",t,e,n)];case 1:return[2,o.sent()]}}))}))},t.prototype.join=function(t,e,n){return void 0===e&&(e={}),s(this,void 0,void 0,(function(){return a(this,(function(o){switch(o.label){case 0:return[4,this.createMatchMakeRequest("join",t,e,n)];case 1:return[2,o.sent()]}}))}))},t.prototype.joinById=function(t,e,n){return void 0===e&&(e={}),s(this,void 0,void 0,(function(){return a(this,(function(o){switch(o.label){case 0:return[4,this.createMatchMakeRequest("joinById",t,e,n)];case 1:return[2,o.sent()]}}))}))},t.prototype.reconnect=function(t,e){return s(this,void 0,void 0,(function(){var n,o,r;return a(this,(function(i){switch(i.label){case 0:if("string"==typeof t&&"string"==typeof e)throw new Error("DEPRECATED: .reconnect() now only accepts 'reconnectionToken' as argument.\nYou can get this token from previously connected `room.reconnectionToken`");if(n=t.split(":"),o=n[0],r=n[1],!o||!r)throw new Error("Invalid reconnection token format.\nThe format should be roomId:reconnectionToken");return[4,this.createMatchMakeRequest("reconnect",o,{reconnectionToken:r},e)];case 1:return[2,i.sent()]}}))}))},t.prototype.getAvailableRooms=function(t){return void 0===t&&(t=""),s(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.http.get("matchmake/".concat(t),{headers:{Accept:"application/json"}})];case 1:return[2,e.sent().data]}}))}))},t.prototype.consumeSeatReservation=function(t,e,n){return s(this,void 0,void 0,(function(){var o,r,i,c=this;return a(this,(function(f){return(o=this.createRoom(t.room.name,e)).roomId=t.room.roomId,o.sessionId=t.sessionId,r={sessionId:o.sessionId},t.reconnectionToken&&(r.reconnectionToken=t.reconnectionToken),i=n||o,o.connect(this.buildEndpoint(t.room,r),t.devMode&&function(){return s(c,void 0,void 0,(function(){var n,r,c=this;return a(this,(function(f){return console.info("[Colyseus devMode]: ".concat(String.fromCodePoint(128260)," Re-establishing connection with room id '").concat(o.roomId,"'...")),n=0,8,r=function(){return s(c,void 0,void 0,(function(){return a(this,(function(s){switch(s.label){case 0:n++,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.consumeSeatReservation(t,e,i)];case 2:return s.sent(),console.info("[Colyseus devMode]: ".concat(String.fromCodePoint(9989)," Successfully re-established connection with room '").concat(o.roomId,"'")),[3,4];case 3:return s.sent(),n<8?(console.info("[Colyseus devMode]: ".concat(String.fromCodePoint(128260)," retrying... (").concat(n," out of ").concat(8,")")),setTimeout(r,2e3)):console.info("[Colyseus devMode]: ".concat(String.fromCodePoint(10060)," Failed to reconnect. Is your server running? Please check server logs.")),[3,4];case 4:return[2]}}))}))},setTimeout(r,2e3),[2]}))}))},i),[2,new Promise((function(t,e){var n=function(t,n){return e(new h(t,n))};i.onError.once(n),i.onJoin.once((function(){i.onError.remove(n),t(i)}))}))]}))}))},t.prototype.createMatchMakeRequest=function(t,e,n,o,r){return void 0===n&&(n={}),s(this,void 0,void 0,(function(){var i;return a(this,(function(s){switch(s.label){case 0:return[4,this.http.post("matchmake/".concat(t,"/").concat(e),{headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)})];case 1:if((i=s.sent().data).error)throw new q(i.error,i.code);return"reconnect"===t&&(i.reconnectionToken=n.reconnectionToken),[4,this.consumeSeatReservation(i,o,r)];case 2:return[2,s.sent()]}}))}))},t.prototype.createRoom=function(t,e){return new T(t,e)},t.prototype.buildEndpoint=function(t,e){void 0===e&&(e={});var n=[];for(var o in e)e.hasOwnProperty(o)&&n.push("".concat(o,"=").concat(e[o]));var r=this.settings.secure?"wss://":"ws://";return t.publicAddress?r+="".concat(t.publicAddress):r+="".concat(this.settings.hostname).concat(this.getEndpointPort()).concat(this.settings.pathname),"".concat(r,"/").concat(t.processId,"/").concat(t.roomId,"?").concat(n.join("&"))},t.prototype.getHttpEndpoint=function(t){void 0===t&&(t="");var e=t.startsWith("/")?t:"/".concat(t);return"".concat(this.settings.secure?"https":"http","://").concat(this.settings.hostname).concat(this.getEndpointPort()).concat(this.settings.pathname).concat(e)},t.prototype.getEndpointPort=function(){return 80!==this.settings.port&&443!==this.settings.port?":".concat(this.settings.port):""},t}(),Y=function(){function t(){}return t.prototype.setState=function(t){return this.state.decode(t)},t.prototype.getState=function(){return this.state},t.prototype.patch=function(t){return this.state.decode(t)},t.prototype.teardown=function(){var t,e;null===(e=null===(t=this.state)||void 0===t?void 0:t.$changes)||void 0===e||e.root.clearRefs()},t.prototype.handshake=function(t,e){this.state?(new x.Reflection).decode(t,e):this.state=x.Reflection.decode(t,e)},t}(),G=function(){function t(){}return t.prototype.setState=function(t){},t.prototype.getState=function(){return null},t.prototype.patch=function(t){},t.prototype.teardown=function(){},t.prototype.handshake=function(t){},t}();O("schema",Y),O("none",G),t.Auth=W,t.Client=X,t.Room=T,t.SchemaSerializer=Y,t.registerSerializer=O,Object.defineProperty(t,"__esModule",{value:!0})})),t("default",o.exports),o.exports.Protocol,o.exports.ErrorCode,o.exports.OPERATION,o.exports.ArraySchema,o.exports.CollectionSchema,o.exports.Context,o.exports.MapSchema,o.exports.Reflection,o.exports.ReflectionField,o.exports.ReflectionType,o.exports.Schema,o.exports.SchemaDefinition,o.exports.SetSchema,o.exports.decode,o.exports.defineTypes,o.exports.deprecated,o.exports.dumpChanges,o.exports.encode,o.exports.filter,o.exports.filterChildren,o.exports.hasFilter,o.exports.registerType,o.exports.type,o.exports.__esModule,o.exports.Auth,o.exports.Client,o.exports.Room,o.exports.SchemaSerializer,o.exports.registerSerializer}),{})}}}));

System.register("chunks:///_virtual/colyseus.mjs_cjs=&original=.js",["./colyseus.js","./cjs-loader.mjs"],(function(e,s){var t,r;return{setters:[function(s){t=s.__cjsMetaURL;var r={};r.__cjsMetaURL=s.__cjsMetaURL,r.default=s.default,e(r)},function(e){r=e.default}],execute:function(){t||r.throwInvalidWrapper("./colyseus.js",s.meta.url),r.require(t)}}}));

System.register("chunks:///_virtual/config-pre.ts",["cc"],(function(t){var c;return{setters:[function(t){c=t.cclegacy}],execute:function(){c._RF.push({},"fdaacxSAkRAP73SLbyJnlKW","config-pre",void 0);t("default",{colyseusSocket:"ws://193.46.198.226:2567",colyseusApi:"http://193.46.198.226:2567/api",api_url:"http://43.154.106.155:5004",gid:31,client_id:"5",avatarUrl:"https://images.qianghx.com",gname:"baccarat",name:"百家乐"});c._RF.pop()}}}));

System.register("chunks:///_virtual/config-pro.ts",["cc"],(function(c){var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"9cc83aLOydLCJwNBi9Oca7f","config-pro",void 0);c("default",{colyseusSocket:"ws://43.154.106.155:8009",colyseusApi:"http://43.154.106.155:8009/api",api_url:"http://43.154.106.155:5004",gid:31,client_id:"5",avatarUrl:"https://images.qianghx.com",gname:"baccarat",name:"百家乐"});t._RF.pop()}}}));

System.register("chunks:///_virtual/config.ts",["cc"],(function(t){var c;return{setters:[function(t){c=t.cclegacy}],execute:function(){c._RF.push({},"efb55ZS8AJDJIx9R55BD84m","config",void 0);t("default",{colyseusSocket:"ws://"+location.hostname+":2568",colyseusApi:"ws://"+location.hostname+":2568/api",api_url:"http://43.155.13.162:5004",gid:31,client_id:5,avatarUrl:"https://images.qianghx.com",gname:"baccarat",name:"百家乐-抢庄哈希"});c._RF.pop()}}}));

System.register("chunks:///_virtual/ControlLobby.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SlideContent.ts","./ActionScript.ts","./utils.ts","./Actions.ts","./Store.ts","./Socket.ts","./EditRoom.ts","./EnterRoom.ts","./RoomListView.ts","./ToastManager.ts","./LoadingManager.ts","./config.ts"],(function(t){var e,n,i,a,o,r,s,l,c,u,h,d,m,f,p,b,g,w,v,y,k,C,S,L,R,_,N,A,I,x,E,P,z,M,T,O;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized,o=t.extends,r=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){l=t.cclegacy,c=t._decorator,u=t.Node,h=t.Prefab,d=t.Label,m=t.Sprite,f=t.instantiate,p=t.Vec3,b=t.tween,g=t.director,w=t.Component},function(t){v=t.SlideContent},function(t){y=t.fetchRoomCats,k=t.fetchRooms},function(t){C=t.onIntScore,S=t.getUrlParams},function(t){L=t.fetchAvatarSprite,R=t.fetchUserToken,_=t.RefreshToken,N=t.fetchUserInfo,A=t.loginPost},function(t){I=t.Store},function(t){x=t.Socket},function(t){E=t.EditRoom},function(t){P=t.EnterRoom},function(t){z=t.RoomListView},function(t){M=t.ToastManager},function(t){T=t.LoadingManager},function(t){O=t.default}],execute:function(){var D,U,B,V,G,J,j,F,K,H,X,Y,Z,q,Q,W,$,tt,et,nt,it,at,ot,rt,st,lt,ct,ut,ht,dt,mt,ft,pt,bt,gt,wt,vt,yt,kt,Ct,St,Lt,Rt,_t,Nt,At,It,xt,Et,Pt,zt,Mt,Tt;l._RF.push({},"8d6f7wDoDtOS4oZ/UjXGkFj","ControlLobby",void 0);var Ot=c.ccclass,Dt=c.property,Ut=I.getInstance();t("ControlLobby",(D=Ot("ControlLobby"),U=Dt(u),B=Dt(h),V=Dt(h),G=Dt(h),J=Dt(u),j=Dt(u),F=Dt(u),K=Dt(d),H=Dt(d),X=Dt(d),Y=Dt(d),Z=Dt(d),q=Dt(m),Q=Dt(d),W=Dt(h),$=Dt(h),tt=Dt(h),et=Dt(d),nt=Dt(u),it=Dt(h),at=Dt(h),ot=Dt(u),rt=Dt(u),st=Dt(h),lt=Dt(h),D((ht=e((ut=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,i(e,"RoomContain",ht,a(e)),i(e,"GameSlide",dt,a(e)),i(e,"loading",mt,a(e)),i(e,"SlideItem",ft,a(e)),i(e,"slideContain",pt,a(e)),i(e,"contain",bt,a(e)),i(e,"alertContain",gt,a(e)),i(e,"bankerMinAmountL",wt,a(e)),i(e,"betAllMaxAmountL",vt,a(e)),i(e,"betMinAmountL",yt,a(e)),i(e,"betMaxAmountL",kt,a(e)),i(e,"catNameL",Ct,a(e)),i(e,"avatar",St,a(e)),i(e,"nickName",Lt,a(e)),i(e,"EmplayAlert",Rt,a(e)),i(e,"EditRoomView",_t,a(e)),i(e,"EnteRoomView",Nt,a(e)),i(e,"balanceLabel",At,a(e)),i(e,"levelBtnGroup",It,a(e)),i(e,"systemLabelPf",xt,a(e)),i(e,"RoomListView",Et,a(e)),i(e,"toastContainer",Pt,a(e)),i(e,"loadingContainer",zt,a(e)),i(e,"toastPrefab",Mt,a(e)),i(e,"loadingPrefab",Tt,a(e)),e.userName="",e.password="",e.currentPage=0,e.totoalPageCount=0,e.roomcats=[],e.catId=void 0,e.code="",e.access_token="",e.refreshTimeHandler=void 0,e.systemLabel=void 0,e.firstLoading=void 0,e.cleanup=void 0,e}n(e,t);var l=e.prototype;return l.onLoad=function(){var t=this;M.configure(this.toastContainer,this.toastPrefab),T.configure(this.loadingContainer,this.loadingPrefab),x.getInstance();var e=[Ut.subscribeToSelector((function(t){return t.auth.access_token}),(function(){t.fetchUserInfo()})),Ut.subscribeToSelector((function(t){return t.auth.user}),(function(){var e=Ut.getState().auth.user;e&&t.nickName&&""!==Ut.getState().auth.access_token&&(t.nickName.string=""+("Undefind"==(null==e?void 0:e.userId)?"":null==e?void 0:e.username),"default"!==e.avatar&&L(e.avatar,(function(e){e&&(t.avatar.spriteFrame=e)})),t.balanceLabel.string=C(e.balance),t.loadGameList())}))];this.cleanup=function(){return e.forEach((function(t){return t()}))}},l.start=function(){var t=r(s().mark((function t(){var e,n,i,a,r,l;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=S(),this.code=e.code||this.code,this.showLoading(),"Undefind"!==Ut.getState().auth.user.userId||""===this.code||""!==this.access_token){t.next=17;break}return localStorage.removeItem("token"),t.prev=5,t.next=8,R({code:this.code,client_id:String(O.client_id)});case 8:0===(n=t.sent).code?(i=n.data.res.access_token,localStorage.setItem("token",JSON.stringify(o({},n.data.res,{time:Date.now()}))),this.access_token=i,Ut.dispatch({type:"SET_USER_TOKEN",payload:i}),this.setAutoRefresh()):(console.log("auth error",n),this.showLoading()),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),console.log("error",t.t0);case 15:t.next=18;break;case 17:try{a=JSON.parse(localStorage.getItem("token")||"{}"),r=a.access_token,l=a.time,r&&l&&(Date.now()-l)/1e3<3600?(this.access_token=r,Ut.dispatch({type:"SET_USER_TOKEN",payload:r}),this.setAutoRefresh(),this.showLoading()):console.log("token error")}catch(t){console.log(t)}case 18:case"end":return t.stop()}}),t,this,[[5,12]])})));return function(){return t.apply(this,arguments)}}(),l.setAutoRefresh=function(){var t=this,e=JSON.parse(localStorage.getItem("token")||"{}"),n=e.token,i=e.refresh_token,a=e.time;if(n&&i&&a){console.log(n,i,a);var l=function(){var e=r(s().mark((function e(){var n,a,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_({refresh_token:i,client_id:String(O.client_id)});case 2:n=e.sent,a=n.code,r=n.data,0===a&&(localStorage.setItem("token",JSON.stringify(o({},r.res,{time:Date.now()}))),t.access_token=r.res.access_token,Ut.dispatch({type:"SET_USER_TOKEN",payload:t.access_token}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();this.refreshTimeHandler=setTimeout((function(){l()}),36e5-(Date.now()-a))}},l.onDestroy=function(){clearTimeout(this.refreshTimeHandler),this.cleanup&&this.cleanup(),x.instance&&x.instance.disconnect()},l.fetchUserInfo=function(){var t=r(s().mark((function t(){var e,n,i;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===this.access_token){t.next=7;break}return t.next=3,N(this.access_token);case 3:e=t.sent,n=e.code,i=e.data,0===n&&Ut.dispatch({type:"SET_USER",payload:{userId:String(i.uid),sessionId:"",balance:i.balance,username:i.username,nickname:i.nickname,avatar:i.avatar,VIP:i.vip}});case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),l.loadGameList=function(){var t=r(s().mark((function t(){var e,n,i,a;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y({page_num:1,limit:10});case 3:e=t.sent,n=e.code,i=e.data,0==n&&(this.roomcats=i.list,a=JSON.parse(localStorage.getItem("catData")||"{}"),this.roomcats.length>0&&(null!=a&&a.id?this.catId=a.id:this.catId=this.roomcats[0].id,this.catId&&this.fetchRoomlist(0,!1,!0))),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,this,[[0,9]])})));return function(){return t.apply(this,arguments)}}(),l.fetchRoomlist=function(){var t=r(s().mark((function t(e,n,i){var a,o,r,l,c,u,h,d,m,g=this;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k({page_num:e+1,limit:9,catId:Number(this.catId),gid:O.gid});case 3:if(a=t.sent,o=a.code,r=a.data,0!==o){t.next=25;break}this.catNameL.string=r.cat.name,this.bankerMinAmountL.string=r.cat.bankerMinAmount,this.betAllMaxAmountL.string=r.cat.betAllMaxAmount,this.betMinAmountL.string=r.cat.betMinAmount,this.betMaxAmountL.string=r.cat.betMaxAmount,localStorage.setItem("catData",JSON.stringify(r.cat)),this.levelBtnGroup.children.forEach((function(t){t.scale=new p(1,1,1)})),(l=this.levelBtnGroup.getChildByName(r.cat.name))&&b(l).to(.1,{scale:new p(1.1,1.1,1)}).call((function(){})).start(),this.slideContain.removeAllChildren(),this.totoalPageCount=Math.ceil(r.count/9),c=s().mark((function t(n){var i;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=f(g.SlideItem),n==e&&(i.getChildByName("sprite0").active=!0),i.on("click",(function(){g.onClickSlideBtn(n)})),g.slideContain.addChild(i);case 4:case"end":return t.stop()}}),t)})),u=0;case 20:if(!(u<this.totoalPageCount)){t.next=25;break}return t.delegateYield(c(u),"t0",22);case 22:u++,t.next=20;break;case 25:for(h=0;h<this.RoomContain.children.length;h++)"boolean"==typeof n?this.RoomContain.children[h].getComponent(v).onSlideOut(n,!i):this.RoomContain.children[h].getComponent(v).onSlideOut(this.currentPage<=e,!i);r.list.length||this.showEmptyAlert(),d=f(this.GameSlide),(m=d.getComponent(v)).LobbyJs=this,m.totalSlideCount=this.totoalPageCount,"boolean"==typeof n?m.addItems(r.list,e,n,!i):m.addItems(r.list,e,this.currentPage<=e,!i),this.RoomContain.addChild(d),this.currentPage=e,this.hideLoading(),this.firstLoading&&(this.firstLoading=!1),t.next=42;break;case 38:t.prev=38,t.t1=t.catch(0),console.log("error",t.t1),this.showLoading();case 42:case"end":return t.stop()}}),t,this,[[0,38]])})));return function(e,n,i){return t.apply(this,arguments)}}(),l.setFilterKey=function(t,e){if(console.log("customEventData",e),this.catId!==e){var n=Number(this.catId)<Number(e);this.catId=e,this.fetchRoomlist(0,n)}},l.showLoading=function(){T.show()},l.hideLoading=function(){T.hide()},l.onClickNextPage=function(){this.currentPage<this.totoalPageCount-1&&this.fetchRoomlist(this.currentPage+1)},l.onClickPrevPage=function(){this.currentPage>0&&this.fetchRoomlist(this.currentPage-1)},l.onClickSlideBtn=function(t){this.currentPage!=t&&this.fetchRoomlist(t)},l.onChangeUserName=function(t){this.userName=t},l.onChangePassword=function(t){this.password=t},l.onLogin=function(){var t=r(s().mark((function t(){var e;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.showLoading(),""===this.userName||""===this.password){t.next=6;break}return t.next=4,A(this.userName,this.password);case 4:0==(e=t.sent).code&&(this.access_token=e.data.res.access_token,Ut.dispatch({type:"SET_USER_TOKEN",payload:this.access_token}));case 6:this.hideLoading();case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),l.onClose=function(){window.top&&window.top.history.go(-1)},l.showEmptyAlert=function(){var t=f(this.EmplayAlert);if(t){t.active=!1;var e=t.getChildByName("No_nodeContent");e.scale=new p(.2,.2,1),t.active=!0,this.contain.removeAllChildren(),this.contain.addChild(t),b(e).to(.3,{scale:new p(1,1,1)},{easing:"backOut"}).start()}},l.onShowEditRoom=function(){var t=f(this.EditRoomView);if(t){t.active=!1;var e=t.getChildByName("No_nodeContent");e.scale=new p(.2,.2,1),t.active=!0,this.contain.removeAllChildren(),this.contain.addChild(t),t.getComponent(E).lobbyjs=this,b(e).to(.3,{scale:new p(1,1,1)},{easing:"backOut"}).start()}},l.onShowEnteRoom=function(){var t=f(this.EnteRoomView);if(t){t.active=!1;var e=t.getChildByName("No_nodeContent");e.scale=new p(.2,.2,1),t.active=!0,this.contain.removeAllChildren(),this.contain.addChild(t),t.getComponent(P).lobbyjs=this,b(e).to(.3,{scale:new p(1,1,1)},{easing:"backOut"}).start()}},l.onShowRoomList=function(){var t=f(this.RoomListView);if(t){t.active=!1;var e=t.getChildByName("No_nodeContent");e.scale=new p(.2,.2,1),t.active=!0,t.getComponent(z).lobbyjs=this,this.contain.removeAllChildren(),this.contain.addChild(t),b(e).to(.3,{scale:new p(1,1,1)},{easing:"backOut"}).start()}},l.showSystemLabel=function(t){M.show(t)},l.joinRoom=function(t){console.log(t),localStorage.setItem("catData",JSON.stringify(o({},t,{id:t.catId}))),localStorage.setItem("roomData",JSON.stringify(o({},t))),this.showLoading(),g.loadScene(O.gname)},e}(w)).prototype,"RoomContain",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dt=e(ut.prototype,"GameSlide",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mt=e(ut.prototype,"loading",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ft=e(ut.prototype,"SlideItem",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pt=e(ut.prototype,"slideContain",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bt=e(ut.prototype,"contain",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gt=e(ut.prototype,"alertContain",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wt=e(ut.prototype,"bankerMinAmountL",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vt=e(ut.prototype,"betAllMaxAmountL",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yt=e(ut.prototype,"betMinAmountL",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kt=e(ut.prototype,"betMaxAmountL",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ct=e(ut.prototype,"catNameL",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),St=e(ut.prototype,"avatar",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lt=e(ut.prototype,"nickName",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rt=e(ut.prototype,"EmplayAlert",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_t=e(ut.prototype,"EditRoomView",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nt=e(ut.prototype,"EnteRoomView",[tt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),At=e(ut.prototype,"balanceLabel",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),It=e(ut.prototype,"levelBtnGroup",[nt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xt=e(ut.prototype,"systemLabelPf",[it],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Et=e(ut.prototype,"RoomListView",[at],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pt=e(ut.prototype,"toastContainer",[ot],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zt=e(ut.prototype,"loadingContainer",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mt=e(ut.prototype,"toastPrefab",[st],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tt=e(ut.prototype,"loadingPrefab",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ct=ut))||ct));l._RF.pop()}}}));

System.register("chunks:///_virtual/CustomEdit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Keyboard.ts"],(function(e){var t,i,s,n,r,a,o,l,u,h,d,c,p,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,s=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,o=e.Node,l=e.EditBox,u=e.Label,h=e.find,d=e.tween,c=e.Vec3,p=e.Component},function(e){b=e.Keyboard}],execute:function(){var v,g,y,f,m,B,P,x,C,E,w,D,A,T,S,z,I,k,V,M,_,N;r._RF.push({},"76bd21ZRZBLX6YQiftXVEOr","CustomEdit",void 0);var O=a.ccclass,H=a.property;e("CustomEdit",(v=O("CustomEdit"),g=H(o),y=H(o),f=H(l),m=H(u),B=H(o),P=H(b),x=H(o),v((w=t((E=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,s(t,"addBtn",w,n(t)),s(t,"subBtn",D,n(t)),s(t,"editBox",A,n(t)),s(t,"editView",T,n(t)),s(t,"contain",S,n(t)),t.ActiveBox=void 0,t.isMobile=!1,t.next=null,s(t,"value",z,n(t)),s(t,"maxvalue",I,n(t)),s(t,"minvalue",k,n(t)),s(t,"step",V,n(t)),s(t,"onChange",M,n(t)),s(t,"keyboard",_,n(t)),s(t,"touchPade",N,n(t)),t.isaddPressing=!1,t.issubPressing=!1,t.addpressInterval=void 0,t.subpressInterval=void 0,t.progressDely=300,t.progressDelyMax=300,t.progressDelyMin=50,t.focusAni=null,t.key="",t}i(t,e);var r=t.prototype;return r.bindData=function(e){var t,i=e.min,s=e.max,n=e.step,r=e.value,a=e.onChange,l=e.key;this.key=l,0!==r&&(this.value=r),0!==i&&(this.value=i),this.minvalue=i,this.maxvalue=s,this.step=n,this.onChange=a,this.addBtn&&(this.addBtn.on(o.EventType.TOUCH_START,this.onAddPressStart,this),this.addBtn.on(o.EventType.TOUCH_END,this.onAddPressEnd,this),this.addBtn.on(o.EventType.TOUCH_CANCEL,this.onAddPressEnd,this)),this.subBtn&&(this.subBtn.on(o.EventType.TOUCH_START,this.onSubPressStart,this),this.subBtn.on(o.EventType.TOUCH_END,this.onSubPressEnd,this),this.subBtn.on(o.EventType.TOUCH_CANCEL,this.onSubPressEnd,this)),this.keyboard=null==(t=h("Canvas"))?void 0:t.getComponentsInChildren(b)[0],this.keyboard&&this.keyboard.isMobile?(this.touchPade.active=!0,this.editBox.node.active=!1,this.editView.node.active=!0,this.touchPade.on("click",this.onFocus,this),this.isMobile=!0,this.ActiveBox=this.editView):(this.editView.node.active=!1,this.editBox.node.active=!0,this.isMobile=!1,this.ActiveBox=this.editBox,this.touchPade.active=!1,this.editBox.enabled=!0),this.changeValue(r)},r.onAddPressStart=function(){var e=this;this.isaddPressing=!0,this.changeValue(this.value+this.step),this.addpressInterval=setTimeout((function(){e.isaddPressing&&(e.progressDely>e.progressDelyMin&&(e.progressDely-=50),e.onAddPressStart())}),this.progressDely)},r.onAddPressEnd=function(e,t){this.isaddPressing=!1,this.addpressInterval&&(clearInterval(this.addpressInterval),this.addpressInterval=null,this.progressDely=this.progressDelyMax)},r.onSubPressStart=function(){var e=this;this.changeValue(this.value-this.step),this.issubPressing=!0,this.subpressInterval=setTimeout((function(){e.issubPressing&&(e.progressDely>e.progressDelyMin&&(e.progressDely-=50),e.onSubPressStart())}),this.progressDely)},r.onSubPressEnd=function(e,t){this.issubPressing=!1,this.subpressInterval&&(clearInterval(this.subpressInterval),this.subpressInterval=null,this.progressDely=this.progressDelyMax)},r.changeValue=function(e){var t=Number(e);0!==this.maxvalue&&t>this.maxvalue&&(this.value=this.maxvalue),t<this.minvalue&&(this.value=this.minvalue),this.value=t,this.onChange&&this.onChange(this.value,this),this.ActiveBox&&(this.ActiveBox.string="string"==typeof e?""===e?"0":e:e.toString())},r.onFocus=function(){this.keyboard&&(this.keyboard.showKeyboard(this),this.focusAni=d(this.contain).sequence(d().to(.3,{scale:new c(1.05,1.05,1.05)}),d().to(.3,{scale:new c(1,1,1)})).repeatForever().start())},r.focusOut=function(){console.log("-00000000000000"),this.focusAni.stop()},r.onDestroy=function(){d(this.contain).stop()},r.onChangeByEditBox=function(e){var t=e.string.replace(",","");t=parseFloat(t),isNaN(t)||this.changeValue(t)},t}(p)).prototype,"addBtn",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(E.prototype,"subBtn",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=t(E.prototype,"editBox",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=t(E.prototype,"editView",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=t(E.prototype,"contain",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(E.prototype,"value",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),I=t(E.prototype,"maxvalue",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),k=t(E.prototype,"minvalue",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),V=t(E.prototype,"step",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),M=t(E.prototype,"onChange",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(E.prototype,"keyboard",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(E.prototype,"touchPade",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=E))||C));r._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/Description.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,o,i,r,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,i=t.Vec3,r=t.tween,c=t.Component}],execute:function(){var s;n._RF.push({},"c80d4gJ1NdMWpqvxFKzH/V9","Description",void 0);var a=o.ccclass;o.property,t("Description",a("Description")(s=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var o=n.prototype;return o.start=function(){this.node.active=!1;var t=this.node.getChildByName("content");t.scale=new i(.2,.2,1),this.node.active=!0,r(t).to(.3,{scale:new i(1,1,1)},{easing:"backOut"}).start()},o.onClose=function(){this.node.removeFromParent()},n}(c))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/DropDown.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,i,o,r,l,a,s,c,u,p,d,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,a=e.Node,s=e.Sprite,c=e.Prefab,u=e.Label,p=e.Component,d=e.instantiate,h=e.Color}],execute:function(){var b,m,g,f,M,w,v,D,y,C,L,z,I;r._RF.push({},"a7dbah8bmZMh4CCdXAkY+JA","DropDown",void 0);var k=l.ccclass,A=l.property;e("DropDown",(b=k("DropDown"),m=A(a),g=A(s),f=A(c),M=A(a),w=A(u),b((y=t((D=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,i(t,"dropDownMenu",y,o(t)),i(t,"arrowSprite",C,o(t)),i(t,"dropItem",L,o(t)),i(t,"content",z,o(t)),t.selected="",i(t,"selectLabel",I,o(t)),t.isMenuOpen=!1,t.items=[],t.listens={},t}n(t,e);var r=t.prototype;return r.onLoad=function(){var e=this;this.closeMenu(),this.dropDownMenu.active=!1,this.node.on("click",(function(){e.toggleMenu()}))},r.chooseItem=function(e){this.selectLabel.string=e.id,this.selected=e.id},r.bindData=function(e){this.items=e},r.toggleMenu=function(){this.isMenuOpen=!this.isMenuOpen,this.isMenuOpen?this.openMenu():this.closeMenu()},r.openMenu=function(){var e=this;this.dropDownMenu.active=!0,this.content.removeAllChildren();var t=function(t){var n=d(e.dropItem);n.getChildByName("Label").getComponent(u).string=e.items[t].id,n.getChildByName("Label").getComponent(u).color=e.selected===e.items[t].id?new h(255,134,134,255):new h(229,198,152,255),e.content.addChild(n),n.on("click",(function(){e.onMenuItemClick(e.items[t]),n.getChildByName("Label").getComponent(u).color=new h(255,134,134,255),e.toggleMenu()}))};for(var n in this.items)t(n)},r.onMenuItemClick=function(e){var t;console.log("item",e),this.selectLabel.string=e.id,this.selected=e.id,null==(t=this.listens)||t.onChange(e.id)},r.closeMenu=function(){this.dropDownMenu.active=!1},t}(p)).prototype,"dropDownMenu",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(D.prototype,"arrowSprite",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=t(D.prototype,"dropItem",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(D.prototype,"content",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=t(D.prototype,"selectLabel",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=D))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/EditRoom.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CustomEdit.ts","./CEditbox.ts","./ActionScript.ts","./Store.ts","./config.ts","./ToastManager.ts"],(function(t){var n,e,i,o,a,r,u,s,l,b,c,m,h,p,A,d,f;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){u=t.cclegacy,s=t._decorator,l=t.tween,b=t.Vec3,c=t.Component},function(t){m=t.CustomEdit},function(t){h=t.CEditbox},function(t){p=t.fetchCreateRoom},function(t){A=t.Store},function(t){d=t.default},function(t){f=t.ToastManager}],execute:function(){var M,x,y,g,k,E,v,S,w,C,j,R,_,z,D;u._RF.push({},"ad99bzSYKhKNbx8uPPFjVvE","EditRoom",void 0);var L=s.ccclass,V=s.property;t("EditRoom",(M=L("EditRoom"),x=V(m),y=V(m),g=V(m),k=V(m),E=V(m),v=V([h]),M((C=n((w=function(t){function n(){for(var n,e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return(n=t.call.apply(t,[this].concat(a))||this).betAllMaxAmount=200,n.betMinAmount=1,n.betMaxAmount=100,n.bankerMinAmount=300,n.bankerStepAmount=10,i(n,"bankerMinAmountEdit",C,o(n)),i(n,"bankerStepAmountEdit",j,o(n)),i(n,"betAllMaxAmountEdit",R,o(n)),i(n,"betMaxAmountEdit",_,o(n)),i(n,"betMinAmountEdit",z,o(n)),i(n,"chipsValues",D,o(n)),n.chips=[],n.lobbyjs=void 0,n.loading=!1,n}e(n,t);var u=n.prototype;return u.start=function(){var t=this;this.bankerMinAmountEdit.bindData({min:0,max:0,step:10,value:this.bankerMinAmount,onChange:function(n){console.log("value",n),t.bankerMinAmount=n},key:"bankerMinAmount"}),this.bankerStepAmountEdit.bindData({min:0,max:0,step:10,value:this.bankerStepAmount,onChange:function(n){console.log("value",n),t.bankerStepAmount=n},key:"bankerStepAmount"}),this.betAllMaxAmountEdit.bindData({min:0,max:0,step:10,value:this.betAllMaxAmount,onChange:function(n){t.betAllMaxAmount=n},key:"betAllMaxAmount"}),this.betMaxAmountEdit.bindData({min:0,max:0,step:10,value:this.betMaxAmount,onChange:function(n){t.betMaxAmount=n},key:"betMaxAmount"}),this.betMinAmountEdit.bindData({min:0,max:0,step:10,value:this.betMinAmount,onChange:function(n){t.betMinAmount=n},key:"betMinAmount"}),this.bankerMinAmountEdit.next=this.bankerStepAmountEdit,this.bankerStepAmountEdit.next=this.betAllMaxAmountEdit,this.betAllMaxAmountEdit.next=this.betMaxAmountEdit,this.betMaxAmountEdit.next=this.betMinAmountEdit,this.chipsValues.forEach((function(n,e){t.chips.push(1),n.bindData({type:"int",key:e,callback:function(n){t.chips[e]=n},min:1,onEndChange:function(){}}),t.chipsValues.length-1>e&&(n.next=t.chipsValues[e+1])}))},u.onCreateRoom=function(){var t=a(r().mark((function t(){var n,e=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=A.getInstance(),!this.loading){t.next=3;break}return t.abrupt("return");case 3:if(!(this.chips.filter((function(t){return 0===t})).length>0)){t.next=6;break}return this.lobbyjs&&this.lobbyjs.showSystemLabel("please_enter_correctly"),t.abrupt("return");case 6:if(this.loading=!0,this.lobbyjs&&this.lobbyjs.showLoading(),!(this.chips.filter((function(t){return t<e.betMinAmount})).length>0)){t.next=10;break}return t.abrupt("return",f.show("筹码不能低于单人最低投注"));case 10:return t.next=12,p({bankerMinAmount:this.bankerMinAmount,bankerStepAmount:this.bankerStepAmount,betAllMaxAmount:this.betAllMaxAmount,betMaxAmount:this.betMaxAmount,betMinAmount:this.betMinAmount,chip:this.chips.join(","),gid:d.gid},n.getState().auth.access_token);case 12:0===t.sent.code?(this.lobbyjs&&this.lobbyjs.onShowRoomList(),this.close()):this.lobbyjs&&this.lobbyjs.showSystemLabel("failed_to_create_room"),this.loading=!1,this.lobbyjs&&this.lobbyjs.hideLoading();case 16:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),u.close=function(){var t=this,n=this.node.getChildByName("Content");l(n).to(.3,{scale:new b(0,0,0)},{easing:"backIn"}).call((function(){t.node&&t.node.parent&&t.node.removeFromParent()})).start()},n}(c)).prototype,"bankerMinAmountEdit",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=n(w.prototype,"bankerStepAmountEdit",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=n(w.prototype,"betAllMaxAmountEdit",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=n(w.prototype,"betMaxAmountEdit",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=n(w.prototype,"betMinAmountEdit",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=n(w.prototype,"chipsValues",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=w))||S));u._RF.pop()}}}));

System.register("chunks:///_virtual/EmptyAlert.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,n,i,o,a,l,c,s,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.Label,c=e.tween,s=e.Vec3,p=e.Component}],execute:function(){var u,y,f,h,d;o._RF.push({},"9084cF9jolMEZ0tBbnMLAC5","EmptyAlert",void 0);var m=a.ccclass,v=a.property;e("EmptyAlert",(u=m("EmptyAlert"),y=v(l),u((d=t((h=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"alert",d,i(t)),t}r(t,e);var o=t.prototype;return o.bind=function(e){this.alert&&(this.alert.string=e)},o.close=function(){var e=this,t=this.node.getChildByName("Content");c(t).to(.3,{scale:new s(0,0,0)},{easing:"backIn"}).call((function(){e.node&&e.node.parent&&e.node.removeFromParent()})).start()},t}(p)).prototype,"alert",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=h))||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/EndScore.ts",["./rollupPluginModLoBabelHelpers.js","cc","./utils.ts"],(function(e){var t,n,r,o,i,a,c,l,s,u,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,c=e.Label,l=e.Vec3,s=e.tween,u=e.Component},function(e){p=e.onIntScore}],execute:function(){var f,d,b,h,y,g,P;i._RF.push({},"35e5ajtRLpPCI56GbK6F5k3","EndScore",void 0);var m=a.ccclass,v=a.property;e("EndScore",(f=m("EndScore"),d=v(c),b=v(c),f((g=t((y=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,r(t,"bankerProfit",g,o(t)),r(t,"playerProfit",P,o(t)),t}n(t,e);var i=t.prototype;return i.onLoad=function(){},i.initGameScore=function(e,t){var n=this;this.bankerProfit.string=p(e),this.playerProfit.string=p(t),t>0||(this.node.position=new l(0,-700,0),s(this.node).to(.4,{position:new l(0,0,0)},{easing:"smooth"}).call((function(){})).start()),setTimeout((function(){s(n.node).to(.3,{scale:new l(0,0,0)},{easing:"backIn"}).call((function(){n.node&&n.node.parent&&n.node.removeFromParent()})).start()}),2500)},t}(u)).prototype,"bankerProfit",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=t(y.prototype,"playerProfit",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=y))||h));i._RF.pop()}}}));

System.register("chunks:///_virtual/EnterRoom.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Store.ts","./ActionScript.ts"],(function(t){var e,n,o,r,i,s,a,c,u,p,l,h,d,b,g,f,w;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized,i=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){a=t.cclegacy,c=t._decorator,u=t.Label,p=t.EditBox,l=t.Node,h=t.sys,d=t.tween,b=t.Vec3,g=t.Component},function(t){f=t.Store},function(t){w=t.fetchJoinRoom}],execute:function(){var y,m,v,x,j,I,L,R,k,D,S;a._RF.push({},"5127agyA+RFTY+SY/+s1Ss6","EnterRoom",void 0);var _=c.ccclass,B=c.property;t("EnterRoom",(y=_("EnterRoom"),m=B(u),v=B(p),x=B(p),j=B(l),y((R=e((L=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this).password="",e.loading=!1,o(e,"passwordL",R,r(e)),e.lobbyjs=void 0,o(e,"passwordInput",k,r(e)),o(e,"passwordInputBox",D,r(e)),o(e,"inputDialog",S,r(e)),e}n(e,t);var a=e.prototype;return a.onLoad=function(){this.inputDialog.active=!1,h.isMobile||(this.passwordInputBox.node.active=!0)},a.start=function(){document.querySelector('input[type="text"]').setAttribute("autocomplete","off")},a.onEntherRoom=function(){var t=i(s().mark((function t(){var e,n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=f.getInstance(),!this.loading){t.next=3;break}return t.abrupt("return");case 3:return this.loading=!0,this.lobbyjs&&this.lobbyjs.showLoading(),t.next=7,w(this.password,e.getState().auth.access_token);case 7:if(0!==(n=t.sent).code){t.next=16;break}return this.lobbyjs&&this.lobbyjs.joinRoom(n.data),this.inputDialog.active=!1,this.close(),this.loading=!1,t.abrupt("return");case 16:1===n.code?this.lobbyjs&&this.lobbyjs.showSystemLabel("room_password_wrong"):this.lobbyjs&&this.lobbyjs.showSystemLabel("failed_to_join_room");case 17:this.loading=!1,this.lobbyjs&&this.lobbyjs.hideLoading();case 19:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.onPasteButtonClick=function(){var t=i(s().mark((function t(){var e;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!navigator.clipboard||!navigator.clipboard.readText){t.next=15;break}return t.prev=1,t.next=4,navigator.permissions.query({name:"clipboard-read"});case 4:if("granted"!==t.sent.state){t.next=11;break}return t.next=8,navigator.clipboard.readText();case 8:return e=t.sent,this.passwordL&&"string"==typeof e&&(this.password=e,this.passwordL.string=e),t.abrupt("return");case 11:t.next=15;break;case 13:t.prev=13,t.t0=t.catch(1);case 15:this.showInputDialog();case 16:case"end":return t.stop()}}),t,this,[[1,13]])})));return function(){return t.apply(this,arguments)}}(),a.showInputDialog=function(){this.inputDialog.active=!0},a.onChangePassword=function(t){this.password=t.string},a.applyInput=function(){this.passwordL.string=this.passwordInput.string,this.password=this.passwordL.string,this.onEntherRoom()},a.cancelInput=function(){this.inputDialog.active=!1,this.passwordInput.string=""},a.close=function(){var t=this,e=this.node.getChildByName("Content");d(e).to(.3,{scale:new b(0,0,0)},{easing:"backIn"}).call((function(){t.node&&t.node.parent&&t.node.removeFromParent()})).start()},e}(g)).prototype,"passwordL",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=e(L.prototype,"passwordInput",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=e(L.prototype,"passwordInputBox",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=e(L.prototype,"inputDialog",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=L))||I));a._RF.pop()}}}));

System.register("chunks:///_virtual/FetchProvider.ts",["./rollupPluginModLoBabelHelpers.js","cc","./config.ts"],(function(e){var t,n,r,o;return{setters:[function(e){t=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){r=e.cclegacy},function(e){o=e.default}],execute:function(){r._RF.push({},"eae32PW8FRLtbXTNpQZ4SFC","FetchProvider",void 0);var s=o.api_url;e("fetchProvide",function(){var e=t(n().mark((function e(t,r,o,u){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.includes("http")){e.next=6;break}return e.next=3,fetch(""+t,{method:r,headers:u||{"Content-Type":"application/json"},body:o?JSON.stringify(o):""}).then((function(e){if(!e.ok)throw new Error("Network response was not ok");return e.json()}));case 3:return e.abrupt("return",e.sent);case 6:return e.next=8,fetch(""+s+t,{method:r,headers:u||{"Content-Type":"application/json"},body:o?JSON.stringify(o):""}).then((function(e){if(!e.ok)throw new Error("Network response was not ok");return e.json()}));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,o){return e.apply(this,arguments)}}());r._RF.pop()}}}));

System.register("chunks:///_virtual/FrameUser.ts",["./rollupPluginModLoBabelHelpers.js","cc","./utils.ts","./Actions.ts"],(function(e){var a,r,t,i,n,s,l,u,o,c,p;return{setters:[function(e){a=e.applyDecoratedDescriptor,r=e.inheritsLoose,t=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,s=e._decorator,l=e.Label,u=e.Sprite,o=e.Component},function(e){c=e.onIntScore},function(e){p=e.fetchAvatarSprite}],execute:function(){var f,v,m,h,b,g,d,y,F,z,U,w,B;n._RF.push({},"df5786afuJLOavysqHcsTXJ","FrameUser",void 0);var I=s.ccclass,N=s.property;e("FrameUser",(f=I("FrameUser"),v=N(l),m=N(l),h=N(l),b=N(u),g=N(u),f((F=a((y=function(e){function a(){for(var a,r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return a=e.call.apply(e,[this].concat(n))||this,t(a,"userBalance",F,i(a)),t(a,"userName",z,i(a)),t(a,"level",U,i(a)),t(a,"spUserHead",w,i(a)),t(a,"avatarFrame",B,i(a)),a.userId="",a.avatar=void 0,a.username="",a}r(a,e);var n=a.prototype;return n.start=function(){},n.update=function(e){},n.setBalance=function(e){this.userBalance.string=c(e)},n.setNicName=function(e){this.userName.string=e},n.setUserInfo=function(e,a,r){var t=this;this.userBalance.string=c(a);var i=e.nickname||e.username;this.username!==i&&(this.userName.string=r?i.slice(0,2)+"..."+i.slice(i.length-2,i.length):i,this.userId=e.userId),""!==e.avatar&&this.avatar!==e.avatar&&"default"!==e.avatar&&(this.avatar=e.avatar,this.avatarFrame&&p(e.avatar,(function(e){e&&(t.avatarFrame.spriteFrame=e)})))},a}(o)).prototype,"userBalance",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=a(y.prototype,"userName",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=a(y.prototype,"level",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=a(y.prototype,"spUserHead",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=a(y.prototype,"avatarFrame",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=y))||d));n._RF.pop()}}}));

System.register("chunks:///_virtual/HelpGameRule.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,i,o,a,l,r,s,d,u,c,p,h,f,m,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,l=e._decorator,r=e.Prefab,s=e.Node,d=e.Vec3,u=e.tween,c=e.resources,p=e.instantiate,h=e.UIOpacity,f=e.Label,m=e.Layout,b=e.Component}],execute:function(){var y,g,v,C,R,w,A,I,H;a._RF.push({},"fd8a4CkGClHlbTNKJyB5zIj","HelpGameRule",void 0);var j=l.ccclass,D=l.property;e("HelpGameRule",(y=j("HelpGameRule"),g=D(r),v=D(s),C=D(s),y((A=t((w=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return t=e.call.apply(e,[this].concat(a))||this,i(t,"pfRuleItem",A,o(t)),i(t,"nodeRuleContent",I,o(t)),i(t,"nodeWait",H,o(t)),t.wKind="123",t.jsonData=null,t.bAddEnd=!0,t.nAddIndex=0,t}n(t,e);var a=t.prototype;return a.onLoad=function(){this.node.active=!1;var e=this.node.getChildByName("content");e.scale=new d(.2,.2,1),this.node.active=!0,u(e).to(.3,{scale:new d(1,1,1)},{easing:"backOut"}).call((function(){})).start()},a.start=function(){var e=this;this.bAddEnd=!0,this.nAddIndex=0,c.load("AGameHelp/json/"+this.wKind,(function(t,n){t||(e.jsonData=n.json,e.bAddEnd=!1,e.nodeWait.active=!1,e.schedule(e.showHelp.bind(e),.2))}))},a.showHelp=function(e){if(!this.bAddEnd&&this.jsonData){var t=this.jsonData.title,n=this.jsonData.content;if(this.nAddIndex<t.length){var i=this.nAddIndex,o=p(this.pfRuleItem);this.nodeRuleContent.addChild(o);var a=o.getComponent(h);u(a).to(.3,{opacity:255}).start();var l=o.getChildByName("title"),r=o.getChildByName("content");l.getComponent(f).string=t[i],r.getComponent(f).string=n[i],o.getComponent(m).updateLayout(),this.nAddIndex+=1}else this.bAddEnd=!0,this.unschedule(this.showHelp);this.nodeRuleContent.getComponent(m).updateLayout()}},a.onClose=function(){this.node.removeFromParent()},t}(b)).prototype,"pfRuleItem",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(w.prototype,"nodeRuleContent",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(w.prototype,"nodeWait",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=w))||R));a._RF.pop()}}}));

System.register("chunks:///_virtual/Jetton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Store.ts","./utils.ts"],(function(t){var e,n,o,i,r,c,s,a,l,u,h,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,c=t._decorator,s=t.Node,a=t.Label,l=t.v3,u=t.Component},function(t){h=t.Store},function(t){g=t.formatChipValue}],execute:function(){var d,f,p,v,b,J,B;r._RF.push({},"74245YKhphP9JwK4PTHUN6R","Jetton",void 0);var y=c.ccclass,S=c.property,m=h.getInstance();t("Jetton",(d=y("Jetton"),f=S(s),p=S(a),d((J=e((b=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return e=t.call.apply(t,[this].concat(r))||this,o(e,"nodeBg",J,i(e)),o(e,"labelScore",B,i(e)),e.bSingleJetton=void 0,e.cbJettonIndex=void 0,e}n(e,t);var r=e.prototype;return r.start=function(){},r.setJettonBg=function(t){for(var e=0;e<this.nodeBg.length;e++)this.nodeBg[e].active=t==e;t>=this.nodeBg.length&&(this.nodeBg[this.nodeBg.length-1].active=!0)},r.onInitJetton=function(t){this.bSingleJetton=!0,this.cbJettonIndex=t,this.setJettonBg(this.cbJettonIndex);var e=m.getState().room.chip[t]/100;this.labelScore.string=g(e),this.labelScore.node.active=!0,this.onMoveEvent()},r.onMoveEvent=function(){},r.onGenFinishEvent=function(){},r.onResetJetton=function(){this.node.setPosition(l(0,0)),this.node.removeFromParent();for(var t=0;t<this.nodeBg.length;t++)this.nodeBg[t].active=0==t},r.onGetJettonIndex=function(){return this.cbJettonIndex},e}(u)).prototype,"nodeBg",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=e(b.prototype,"labelScore",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=b))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/Keyboard.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e,o,n,s,a,c,r,l,h,u,d,p,y;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,a=t._decorator,c=t.Node,r=t.sys,l=t.find,h=t.input,u=t.Input,d=t.Vec3,p=t.tween,y=t.Component}],execute:function(){var v,b,x,f,B,E,T,m,k,g,K,A,S;s._RF.push({},"8ec1eo5+U9G8rfeS+XWOBEg","Keyboard",void 0);var w=a.ccclass,D=a.property;t("Keyboard",(v=w("Keyboard"),b=D(c),x=D([c]),f=D(c),B=D(c),E=D(c),v((k=i((m=function(t){function i(){for(var i,e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return i=t.call.apply(t,[this].concat(s))||this,o(i,"keyboard",k,n(i)),i.activeEditBox=null,i.lastEditBox=null,i.isMobile=!1,i.clipText="",o(i,"keys",g,n(i)),o(i,"BackspaceKey",K,n(i)),o(i,"DotKey",A,n(i)),o(i,"SubmitKey",S,n(i)),i.mAni=null,i}e(i,t);var s=i.prototype;return s.start=function(){var t=this;if(this.keyboard&&(this.keyboard.active=!1),r.isMobile){this.isMobile=!0,this.keys.forEach((function(i,e){t.keyPressStart(i,""+e,"num")})),this.keyPressStart(this.BackspaceKey,"","back"),this.DotKey.on("click",(function(){t.onDotPress()}),this),this.SubmitKey.on("click",(function(){t.onSubmit()}),this);l("Canvas")}},s.onDestroy=function(){h.off(u.EventType.TOUCH_START,this.onGlobalTouch,this)},s.onGlobalTouch=function(t){t.target;console.log("click",t)},s.keyPressStart=function(t,i,e){var o,n,s=this,a=!1;t.on(c.EventType.TOUCH_START,(function(){a=!0;var t=function(){"num"===e?s.onNumberPress(i):"back"===e&&s.onBackspace()};t(),n=setTimeout((function(){o=setInterval((function(){a&&t()}),100)}),600)}),this),t.on(c.EventType.TOUCH_END,(function(){a=!1,clearTimeout(n),clearInterval(o)}),this),t.on(c.EventType.TOUCH_CANCEL,(function(){a=!1,clearTimeout(n),clearInterval(o)}),this)},s.onNumberPress=function(t){this.activeEditBox&&this.activeEditBox.ActiveBox&&(0===this.clipText.length&&"0"===t||("0"===this.clipText[0]?this.clipText=t:this.clipText=this.clipText+t),this.activeEditBox.changeValue(this.clipText))},s.onDotPress=function(){!this.clipText.includes(".")&&this.clipText.length&&this.activeEditBox&&(this.clipText=this.clipText+".",this.activeEditBox.changeValue(""+this.clipText))},s.onBackspace=function(){this.activeEditBox&&this.activeEditBox.ActiveBox&&(this.clipText=this.clipText.slice(0,-1),this.activeEditBox.changeValue(""+this.clipText))},s.onSubmit=function(){this.activeEditBox?(this.lastEditBox=this.activeEditBox,this.activeEditBox.next?this.activeEditBox.next.onFocus():(this.activeEditBox.focusOut(),this.activeEditBox=null,this.hideKeyboard())):this.hideKeyboard()},s.onEnd=function(){this.activeEditBox?(this.lastEditBox=this.activeEditBox,this.activeEditBox.focusOut(),this.activeEditBox=null,this.hideKeyboard()):this.hideKeyboard()},s.showKeyboard=function(t){var i=this;this.isMobile&&(this.activeEditBox&&(this.activeEditBox.focusOut(),this.lastEditBox=this.activeEditBox,this.activeEditBox=null),this.activeEditBox=t,this.clipText=String(this.activeEditBox.value),!1===this.keyboard.active&&(this.keyboard.active=!0,this.keyboard.position=new d(0,-100,0),this.mAni&&this.mAni.stop(),this.mAni=p(this.keyboard).to(.2,{position:new d(0,0,0)},{easing:"smooth"}).call((function(){i.mAni=null})).start()))},s.hideKeyboard=function(){var t=this;this.activeEditBox=null,this.keyboard&&1==this.keyboard.active&&(this.mAni&&this.mAni.stop(),this.mAni=p(this.keyboard).to(.15,{position:new d(0,-100,0)},{easing:"smooth"}).call((function(){t.keyboard.active=!1,t.mAni=null})).start())},i}(y)).prototype,"keyboard",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=i(m.prototype,"keys",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),K=i(m.prototype,"BackspaceKey",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=i(m.prototype,"DotKey",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=i(m.prototype,"SubmitKey",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=m))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/Languages.ts",["cc"],(function(e){var _;return{setters:[function(e){_=e.cclegacy}],execute:function(){_._RF.push({},"995eazjLuNN25Jbux7R6e26","Languages",void 0);e("default",{game_status_err:"游戏状态错误",please_choose_a_chip:"请选择芯片",status_wrong:"游戏状态错误",not_found_bankid_err:"本局无庄家，您可以立即上庄",current_balance_is_low:"当前金额较低，请先充值。",not_found_player:"无法获取用户信息",disconnected_room:"获取房间数据失败",please_complete_all_rounds:"你需要完成所有回合",game_server_err:"游戏服务器错误",did_not_joing_in_game:"未加入游戏",not_enough_balance:"你的余额不足",banker_amount_not_enough:"当前银行余额不足",you_are_not_current_banker:"你不是当前银行家",period_is_over:"期限已结束",DATABASE_SELECT_ERROR:"游戏服务器错误",successful_banker_applied:"申请银行家请求成功",successful_banker_canceled:"取消银行家请求成功",limited_bet_amount:"投注金额有限制",failed_to_create_room:"创建房间失败",failed_to_join_room:"加入房间失败",room_password_wrong:"房间密码不正确",please_enter_correctly:"请正确输入",gt_bet_max_amount:"您最多可以下注最高金额",gt_bet_all_max_amount:"您最多可以下注最高金额",need_wait_30s:"需要等待 30 秒",you_do_not_have_enough_balance:"您的余额不足",successfully_copied:"已成功复制"});_._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var e,i,a,r,t,o,s,c,l,p;return{setters:[function(n){e=n.applyDecoratedDescriptor,i=n.inheritsLoose,a=n.initializerDefineProperty,r=n.assertThisInitialized},function(n){t=n.cclegacy,o=n._decorator,s=n.Prefab,c=n.Node,l=n.instantiate,p=n.Component}],execute:function(){var u,f,g,d,b,h,v,y;t._RF.push({},"f0328OGKT1IK47SFXwbMMUK","LoadingManager",void 0);var L=o.ccclass,M=o.property;n("LoadingManager",(u=L("LoadingManager"),f=M(s),g=M(c),u(((y=function(n){function e(){for(var e,i=arguments.length,t=new Array(i),o=0;o<i;o++)t[o]=arguments[o];return e=n.call.apply(n,[this].concat(t))||this,a(e,"loadingPrefab",h,r(e)),a(e,"spinner",v,r(e)),e}return i(e,n),e.prototype.onLoad=function(){e.instance?this.destroy():e.instance=this},e.configure=function(n,i){e.instance&&(e.instance.spinner=n,e.instance.loadingPrefab=i)},e.show=function(){if(e.instance&&e.instance.spinner){if(e.instance.spinner.active=!0,!e.instance.spinner.children.length){var n=l(e.instance.loadingPrefab);e.instance.spinner.addChild(n)}}else console.warn("LoadingManager instance or spinner is not available.")},e.hide=function(){e.instance&&e.instance.spinner?e.instance.spinner.active=!1:console.warn("LoadingManager instance or spinner is not available.")},e}(p)).instance=null,h=e((b=y).prototype,"loadingPrefab",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(b.prototype,"spinner",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=b))||d));t._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./ActionHelp.ts","./ApplyItem.ts","./ApplyView.ts","./BaccaratGame.ts","./BaccaratView.ts","./BetHistory.ts","./BettingHistory.ts","./CardNode.ts","./Description.ts","./DropDown.ts","./EndScore.ts","./FrameUser.ts","./HelpGameRule.ts","./Jetton.ts","./NetworkManager.ts","./OrderHistory.ts","./PlayerList.ts","./RecordManager.ts","./RoadMap.ts","./RoundHistory.ts","./Setting.ts","./SoundContoller.ts","./TimeCount.ts","./VerifyView.ts","./ActionScript.ts","./ControlLobby.ts","./EditRoom.ts","./EmptyAlert.ts","./EnterRoom.ts","./NotificationBar.ts","./RItem.ts","./RoomInfoView.ts","./RoomListView.ts","./SlideContent.ts","./Socket.ts","./Actions.ts","./CEditbox.ts","./CardDefinitions.ts","./CustomEdit.ts","./FetchProvider.ts","./Keyboard.ts","./Languages.ts","./LoadingManager.ts","./Store.ts","./ToastManager.ts","./canvasDesignResolution.ts","./config-pre.ts","./config-pro.ts","./config.ts","./types.ts","./utils.ts","./SplashSreen.ts","./colyseus.mjs_cjs=&original=.js"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/NetworkManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./colyseus.mjs_cjs=&original=.js","./config.ts","./utils.ts","./Store.ts","./Actions.ts","./LoadingManager.ts","./BaccaratGame.ts","./ToastManager.ts","./fingerprint2.mjs_cjs=&original=.js","./colyseus.js","./fingerprint2.js"],(function(e){var t,n,o,a,r,s,i,c,u,l,h,m,p,d,f,g,y,k,S,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,a=e.assertThisInitialized,r=e.asyncToGenerator,s=e.regeneratorRuntime,i=e.extends},function(e){c=e.cclegacy,u=e._decorator,l=e.Component},null,function(e){h=e.default},function(e){m=e.getUrlParams},function(e){p=e.Store},function(e){d=e.fetchUserToken,f=e.RefreshToken},function(e){g=e.LoadingManager},function(e){y=e.BaccaratGame},function(e){k=e.ToastManager},null,function(e){S=e.default},function(e){v=e.default}],execute:function(){var _,A,b,M,E,T;c._RF.push({},"4d8afBlVvpBjrFUbRV06YlM","NetworkManager",void 0);var w=u.ccclass,R=u.property,N=p.getInstance();e("NetworkManager",(_=w("NetworkManager"),A=R(y),_(((T=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=e.call.apply(e,[this].concat(r))||this).client=void 0,t.room=void 0,t.reconnectTimeout=3,t.maxReconnectAttempts=100,t.currentReconnectAttempts=0,t.reconnecting=!1,t.refreshTimeHandler=void 0,t.fingerprint="",o(t,"gameEnginJs",E,a(t)),t}n(t,e);var c=t.prototype;return c.auth=function(){var e=r(s().mark((function e(){var t,n,o,a,r,c,u,l,p,f,g=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=m(),n=t.code||"",o=JSON.parse(localStorage.getItem("roomData")||"{}"),a=JSON.parse(localStorage.getItem("catData")||"{}"),r=((null==o?void 0:o.chip.split(",").map((function(e){return Number(e.trim())})))||(null==a?void 0:a.chip.split(",").map((function(e){return Number(e.trim())})))||[1,2,5,10,50]).map((function(e){return e>=1e4?1e6*Math.floor(e/1e4):100*e})),N.dispatch({type:"SET_ROOM",payload:i({},o,{betMinAmount:(null==a?void 0:a.betMinAmount)||1,betMaxAmount:(null==a?void 0:a.betMaxAmount)||50,bankerStepAmount:(null==a?void 0:a.bankerStepAmount)||10,chip:r,maxBetAmount:Number(100*(null==a?void 0:a.betMaxAmount)||5e3),allMaxBetAmount:Number(100*(null==a?void 0:a.betAllMaxAmount)||15e3)})}),""===n){e.next=20;break}return localStorage.removeItem("token"),e.prev=8,e.next=11,d({code:n,client_id:String(h.client_id)});case 11:0===(c=e.sent).code?(u=c.data.res.access_token,localStorage.setItem("token",JSON.stringify(i({},c.data.res,{time:Date.now()}))),this.setAutoRefresh(),N.dispatch({type:"SET_USER_TOKEN",payload:u}),this.connect((function(e){e&&g.startSocket()}))):console.log("auth error",c),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(8),console.log("error",e.t0);case 18:e.next=21;break;case 20:try{l=JSON.parse(localStorage.getItem("token")||"{}"),p=l.access_token,f=l.time,p&&f&&(Date.now()-f)/1e3<3600?(N.dispatch({type:"SET_USER_TOKEN",payload:p}),this.setAutoRefresh(),this.connect((function(e){e&&g.startSocket()}))):(this.connect((function(e){e&&g.startSocket()})),console.log("token error=>"))}catch(e){console.log(e)}case 21:case"end":return e.stop()}}),e,this,[[8,15]])})));return function(){return e.apply(this,arguments)}}(),c.onDestroy=function(){this.disconnect(),clearTimeout(this.refreshTimeHandler)},c.setAutoRefresh=function(){var e=this,t=JSON.parse(localStorage.getItem("token")||"{}"),n=t.access_token,o=t.refresh_token,a=t.time;if(n&&o&&a){var c=function(){var t=r(s().mark((function t(){var n,a,r,c;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f({refresh_token:o,client_id:String(h.client_id)});case 2:n=t.sent,a=n.code,r=n.data,0===a&&(localStorage.setItem("token",JSON.stringify(i({},r.res,{time:Date.now()}))),c=r.res.access_token,e.room&&(e.room.send("refresh_token",c),N.dispatch({type:"SET_USER_TOKEN",payload:c})));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();this.refreshTimeHandler=setTimeout((function(){c()}),36e5-(Date.now()-a))}},c.connect=function(){var e=r(s().mark((function e(t){var n,o,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=this,a=N.getState(),g.show(),this.client.joinOrCreate(h.gname,{room_id:a.room.id+"_"+a.room.catId,token:a.auth.access_token,chips:a.room.chip,customRoomId:a.room.id,catId:a.room.catId,maxBetAmount:Number((null==(n=a.room)?void 0:n.maxBetAmount)||50),allMaxBetAmount:Number(a.room.allMaxBetAmount||150)}).then((function(e){o.room=e,t(!0),g.hide()})).catch((function(e){t(!1),console.log("Failed to connect to room:",e)}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),c.handleReconnection=function(){var e=this;if(!this.reconnecting){this.reconnecting=!0,this.currentReconnectAttempts=0,this.room&&this.room.removeAllListeners();!function t(){console.log("Reconnection attempt #"+(e.currentReconnectAttempts+1)),e.connect((function(n){n?(e.reconnecting=!1,console.log("Reconnected to the room"),e.startSocket()):e.scheduleOnce(t,e.reconnectTimeout)})),e.currentReconnectAttempts++}()}},c.startSocket=function(){var e=this;this.room&&(this.room.onStateChange((function(e){N.dispatch({type:"SET_STATE",payload:e})})),this.room.onMessage("status",(function(t){e.gameEnginJs.handleStatus(t)})),this.room.onMessage("players",(function(e){N.dispatch({type:"SET_PLAYERS",payload:e})})),this.room.onMessage("bankers",(function(e){N.dispatch({type:"SET_BANKERS",payload:e})})),this.room.onMessage("bets",(function(t){e.gameEnginJs.setBets(t)})),this.room.onMessage("join-success",(function(e){N.dispatch({type:"SET_USER",payload:e})})),this.room.onMessage("join-player",(function(e){N.dispatch({type:"ADD_PLAYER",payload:e})})),this.room.onMessage("out-player",(function(e){N.dispatch({type:"DEL_PLAYER",payload:e})})),this.room.onMessage("metadata",(function(e){N.dispatch({type:"SET_METADATA",payload:e})})),this.room.onMessage("token",(function(e){N.dispatch({type:"SET_USER_TOKEN",payload:e}),localStorage.setItem("token",e)})),this.room.onMessage("invalid_token",(function(){localStorage.removeItem("token"),N.dispatch({type:"SET_USER_TOKEN",payload:""})})),this.room.onMessage("invalid-bet",(function(e){var t=e.status,n=e.msg;t||k.show(n)})),this.room.onMessage("apply-banker-res",(function(e){console.log("apply-bankers-res-----------\x3e",e),g.hide()})),this.room.onMessage("cancel-banker-res",(function(e){console.log("cancel-bankers-res-----------\x3e",e),g.hide()})),this.room.onMessage("over-banker-res",(function(e){console.log("over-bankers-res-----------\x3e",e),g.hide()})),this.room.onMessage("bet-place",(function(t){e.gameEnginJs.onBet(t),N.dispatch({type:"UPDATE_BALANCE",payload:{userId:t.uid,balance:t.balance}})})),this.room.onMessage("update-balances",(function(e){N.dispatch({type:"UPDATE_BALANCES",payload:e})})),this.room.onMessage("result",(function(t){var n=t.updatedBalances,o=t.resultPlacesByPlayer,a=t.playerHand,r=t.bankerHand,s=t.winSpaces,i=t.totalBet,c=t.bankerProfit,u=t.set,l=t.status;N.dispatch({type:"UPDATE_BALANCES",payload:n}),e.gameEnginJs.onShowResult(o,a,r,s,i,c,u,l,(function(){N.dispatch({type:"ADD_HISTORY",payload:s})})),console.log("Result received:",t)})),this.room.onLeave((function(t){e.handleReconnection(),g.show()})))},c.start=function(){var e=this;if(null==t.instance){this.client=new S.Client(h.colyseusSocket),console.log("NetworkManager==== ",h.colyseusSocket),t.instance=this,this.auth();v.get((function(t){var n=t.map((function(e){return e.value}));e.fingerprint=v.x64hash128(n.join(""),31)}))}else console.log("NetworkManager 单例失败")},c.update=function(e){},c.placeBet=function(e,t){this.sendMessage("bet-place",{place:e,chip:t,fingerprint:this.fingerprint})},c.sendMessage=function(e,t){this.room?this.room.send(e,t):(g.show(),k.show("Please check your network connection."))},c.emitBankerRequest=function(e,t,n){var o=N.getState().players.find((function(e){return e.userId===N.getState().auth.user.userId}));o&&(o.balance>e?(this.room&&this.room.send("apply-banker",{amount:e,wantAmount:t,wantTime:n}),g.show()):k.show("you_do_not_have_enough_balance"))},c.emitBankerCancelRequest=function(){g.show(),this.room&&this.room.send("cancel-banker",{amount:0,wantAmount:0,wantTime:0})},c.emitOverBankerRequest=function(){var e=N.getState();e.roundinfo.round<e.roundinfo.roundCount?k.show("please_complete_all_rounds"):(g.show(),this.room&&this.room.send("over-banker"))},c.disconnect=function(){this.room.removeAllListeners(),this.reconnecting=!1,this.room.leave(),this.client=null,this.room=null,t.instance=void 0},t}(l)).instance=void 0,E=t((M=T).prototype,"gameEnginJs",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=M))||b));c._RF.pop()}}}));

System.register("chunks:///_virtual/NotificationBar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Actions.ts","./utils.ts"],(function(e){var t,n,s,a,r,i,o,c,u,l,h,f,g,m,p,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,s=e.initializerDefineProperty,a=e.assertThisInitialized,r=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){o=e.cclegacy,c=e._decorator,u=e.Label,l=e.Node,h=e.Vec3,f=e.UITransform,g=e.tween,m=e.Component},function(e){p=e.fetchNews},function(e){d=e.onIntScore}],execute:function(){var w,y,N,v,b,x,I;o._RF.push({},"521452mYztEkYCP2lmqFdWo","NotificationBar",void 0);var L=c.ccclass,D=c.property;e("NotificationBar",(w=L("NotificationBar"),y=D(u),N=D(l),w((x=t((b=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t=e.call.apply(e,[this].concat(r))||this,s(t,"messageLabel",x,a(t)),s(t,"messageNode",I,a(t)),t.messages=[],t.currentIndex=0,t}n(t,e);var o=t.prototype;return o.onLoad=function(){this.fetchData()},o.showNextMessage=function(){var e=this;if(!this.messages||0!==this.messages.length){var t=this.messages[this.currentIndex];if(this.messageLabel){this.messageLabel.string="恭喜 "+t.username+" 用户中奖 "+d(t.award)+" USDT";var n=new h(300,0,0),s=new h(0,0,0),a=new h(2*-this.messageNode.getComponent(f).width,0,0);this.messageNode.setPosition(n),g(this.messageNode).to(1.5,{position:s},{easing:"smooth"}).delay(2.5).to(1,{position:a},{easing:"smooth"}).call((function(){e.currentIndex=(e.currentIndex+1)%e.messages.length,0===e.currentIndex?e.fetchData():e.showNextMessage()})).start()}}},o.fetchData=function(){var e=r(i().mark((function e(){var t,n,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:t=e.sent,n=t.code,s=t.data,0===n&&(this.messages=s.today,this.showNextMessage());case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(m)).prototype,"messageLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(b.prototype,"messageNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=b))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/OrderHistory.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DropDown.ts","./Actions.ts","./config.ts","./RoundHistory.ts","./VerifyView.ts"],(function(t){var e,i,n,o,a,r,s,l,u,h,c,d,g,p,f,b,m,w,v,y,D;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){s=t.cclegacy,l=t._decorator,u=t.Node,h=t.Prefab,c=t.ScrollView,d=t.Vec3,g=t.tween,p=t.instantiate,f=t.Component,b=t.Label},function(t){m=t.DropDown},function(t){w=t.fetchDrawLog},function(t){v=t.default},function(t){y=t.RoundHistory},function(t){D=t.VerifyView}],execute:function(){var C,N,P,z,B,V,k,L,T,x,R,H,F,I,G,O,A,_,E,M,S,j,X,Y,q,J,K;s._RF.push({},"521eahzBeRF+7bX/HSvp6pP","OrderHistory",void 0);var Q=l.ccclass,U=l.property;t("OrderHistory",(C=Q("OrderHistory"),N=U(u),P=U(u),z=U(u),B=U(u),V=U(u),k=U(m),L=U(u),T=U(h),x=U(u),R=U(h),H=U(c),F=U(h),C((O=e((G=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,n(e,"loading",O,o(e)),n(e,"nextButton",A,o(e)),n(e,"prevButton",_,o(e)),n(e,"firstPage",E,o(e)),n(e,"endPage",M,o(e)),n(e,"dropDown",S,o(e)),n(e,"historyContent",j,o(e)),n(e,"RoundItem",X,o(e)),n(e,"pageNationContent",Y,o(e)),n(e,"pageNationBtn",q,o(e)),n(e,"scrollView",J,o(e)),n(e,"verifyPrefab",K,o(e)),e.totalCount=0,e.pageNumber=-1,e.limit=15,e.choosedDate=0,e.pageCount=0,e.dates=[],e.logDatas=[],e.filterPeriod=0,e}i(e,t);var s=e.prototype;return s.onLoad=function(){var t=this;this.dropDown.listens.onChange=function(e){t.onChooseDate(e)},this.node.active=!1;var e=this.node.getChildByName("content");e.scale=new d(.2,.2,1),this.node.active=!0,g(e).to(.3,{scale:new d(1,1,1)},{easing:"backOut"}).start()},s.onDestroy=function(){},s.start=function(){var t,e,i,n;this.dates=this.generateDateData(),this.dropDown.bindData(this.dates.map((function(t){return{num:t,id:t}}))),0===this.choosedDate&&(this.dropDown.chooseItem({num:this.dates[0],id:this.dates[0]}),this.choosedDate=this.dates[0],this.loadlogs(0)),null==(t=this.nextButton)||t.on("click",this.onNext.bind(this)),null==(e=this.prevButton)||e.on("click",this.onPrev.bind(this)),null==(i=this.firstPage)||i.on("click",this.onGoToFirstPage.bind(this)),null==(n=this.endPage)||n.on("click",this.enGoToEndPage.bind(this))},s.generateDateData=function(){for(var t=[],e=new Date,i=0;i<50;i++){var n=new Date(e);n.setDate(e.getDate()-i);var o=n.getMonth()+1,a=n.getDate(),r=""+n.getFullYear()+(o>9?o:"0"+o)+(a>9?a:"0"+a);t.push(Number(r))}return t},s.onChooseDate=function(t,e){this.dropDown.chooseItem({num:t,id:t}),this.choosedDate=t,e&&e>0&&(this.filterPeriod=e),this.loadlogs(0)},s.loadlogs=function(){var t=a(r().mark((function t(e){var i,n,o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0===e||this.pageNumber!==e&&!this.loading.active){t.next=2;break}return t.abrupt("return");case 2:return this.pageNumber=e,this.showLoading(),t.next=6,w(this.pageNumber+1,this.limit,v.gid,this.choosedDate,this.filterPeriod);case 6:i=t.sent,n=i.code,o=i.data,0==n&&(this.logDatas=o.list,this.filterPeriod=0,this.totalCount=o.count,this.pageCount=Math.ceil(this.totalCount/this.limit),this.drawPageNation(),this.drawTable()),this.hideLoading();case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),s.drawPageNation=function(){var t=this;if(this.pageNationContent){this.pageNationContent.removeAllChildren();var e=0;this.pageNumber-3>0&&(e=this.pageNumber-3);var i=e+6;e+6>this.pageCount&&(i=this.pageCount);for(var n=function(e){var i=p(t.pageNationBtn);i.getChildByName("Label").getComponent(b).string=""+(e+1),e===t.pageNumber&&(i.scale=new d(1.1,1.1,1.1)),t.pageNationContent.addChild(i),i.on("click",(function(){t.pageNumber!==e&&t.loadlogs(e)}))},o=e;o<i;o++)n(o)}},s.drawTable=function(){var t=this;this.scrollView.scrollToTop(.4,!0),this.historyContent.removeAllChildren(),this.logDatas.forEach((function(e,i){var n=p(t.RoundItem);n.getComponent(y).showDetailView=function(e,i,n,o){t.showDetailView(e,i,n,o)},n.getComponent(y).bindData(e,i+1+t.limit*t.pageNumber),t.historyContent.addChild(n)}))},s.onNext=function(){this.pageNumber<this.pageCount&&this.loadlogs(this.pageNumber+1)},s.onPrev=function(){this.pageNumber>0&&this.loadlogs(this.pageNumber-1)},s.onGoToFirstPage=function(){0!==this.pageNumber&&this.loadlogs(0)},s.enGoToEndPage=function(){this.pageNumber!==this.pageCount-1&&this.loadlogs(this.pageCount-1)},s.onClick=function(t){this.loadlogs(t)},s.onClose=function(){this.node.removeFromParent()},s.showDetailView=function(t,e,i,n){if(this.verifyPrefab){console.log("000000000000000000000");var o=p(this.verifyPrefab);this.node.parent.addChild(o),o.getComponent(D).bindData(t,e,i,n)}},s.showLoading=function(){this.loading.active=!0},s.hideLoading=function(){this.loading.active=!1},e}(f)).prototype,"loading",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=e(G.prototype,"nextButton",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=e(G.prototype,"prevButton",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=e(G.prototype,"firstPage",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=e(G.prototype,"endPage",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=e(G.prototype,"dropDown",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=e(G.prototype,"historyContent",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=e(G.prototype,"RoundItem",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=e(G.prototype,"pageNationContent",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=e(G.prototype,"pageNationBtn",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=e(G.prototype,"scrollView",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=e(G.prototype,"verifyPrefab",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=G))||I));s._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerList.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FrameUser.ts","./Store.ts"],(function(e){var t,n,r,i,o,a,s,c,u,l,p,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.Node,c=e.Prefab,u=e.instantiate,l=e.Component},function(e){p=e.FrameUser},function(e){f=e.Store}],execute:function(){var y,d,h,b,v,m,g;o._RF.push({},"81c8eUPsoxOt4e93FriLMwR","PlayerList",void 0);var P=a.ccclass,L=a.property,C=f.getInstance();e("PlayerList",(y=P("PlayerList"),d=L(s),h=L(c),y((m=t((v=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"contain",m,i(t)),r(t,"item",g,i(t)),t.unsubscribeHistory=void 0,t}n(t,e);var o=t.prototype;return o.start=function(){var e=this;this.unsubscribeHistory=C.subscribeToSelector((function(e){return e.players}),(function(){console.log("Players state updated"),e.updatePlayerList()})),this.updatePlayerList()},o.onDestroy=function(){this.unsubscribeHistory()},o.updatePlayerList=function(){var e=this,t=C.getState(),n=new Map;this.contain.children.forEach((function(e){var t=e.getComponent(p);n.set(t.userId,e)})),t.players.forEach((function(t){var r=n.get(t.userId);if(r){r.getComponent(p).setUserInfo(t,t.balance,!0)}else{var i=u(e.item);i.getComponent(p).setUserInfo(t,t.balance,!0),e.contain.addChild(i)}})),this.contain.children.forEach((function(n){var r=n.getComponent(p);t.players.some((function(e){return e.userId===r.userId}))||e.contain.removeChild(n)}))},o.onClose=function(){this.node.active=!1},t}(l)).prototype,"contain",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=t(v.prototype,"item",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=v))||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/RecordManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Store.ts","./Actions.ts","./config.ts"],(function(e){var t,r,i,n,o,a,s,c,l,u,d,p,f,h,y,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){s=e.cclegacy,c=e._decorator,l=e.Node,u=e.ScrollView,d=e.Prefab,p=e.instantiate,f=e.Component},function(e){h=e.Store},function(e){y=e.fetchDrawLog},function(e){b=e.default}],execute:function(){var g,v,m,w,P,R,H,T,I;s._RF.push({},"e3d57IEMfdLFZ5IhmYRxQnm","RecordManager",void 0);var S=c.ccclass,k=c.property,B=h.getInstance();e("RecordManager",(g=S("RecordManager"),v=k(l),m=k(u),w=k(d),g((H=t((R=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"contain",H,n(t)),i(t,"scrollView",T,n(t)),t.unsubscribeHistory=void 0,i(t,"recordItem",I,n(t)),t}r(t,e);var s=t.prototype;return s.start=function(){var e=this;this.unsubscribeHistory=B.subscribeToSelector((function(e){return e.history}),(function(){console.log("Players state updated"),e.updateHistories()})),this.fetchHistory()},s.fetchHistory=function(){var e=o(a().mark((function e(){var t,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(1,80,b.gid);case 2:t=e.sent,r=t.code,i=t.data,0===r&&B.dispatch({type:"SET_HISTORY",payload:i.list.sort((function(e,t){return e.createdAt-t.createdAt})).map((function(e){var t=e.aResult,r=e.bResult,i=e.cResult,n=e.dResult;return 2===e.status?{winner:"Tie",playerPair:!1,bankerPair:!1}:{winner:t>0?"Banker":i>0?"Player":"Tie",playerPair:n>0,bankerPair:r>0}}))});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s.onDestroy=function(){this.unsubscribeHistory&&(this.unsubscribeHistory(),console.log("Unsubscribed from history updates"))},s.updateHistories=function(){var e=this,t=B.getState();this.contain&&this.contain.removeAllChildren();for(var r=0;r<t.history.length;r++){var i=t.history[r],n=p(this.recordItem);n&&(n.getChildByName(i.winner).active=!0),i.bankerPair&&(n.getChildByName("BPair").active=!0),i.playerPair&&(n.getChildByName("PPair").active=!0),this.contain.addChild(n)}t.history.length>144&&setTimeout((function(){e.scrollView&&e.scrollView.scrollToRight(0)}),500)},t}(f)).prototype,"contain",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=t(R.prototype,"scrollView",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(R.prototype,"recordItem",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=R))||P));s._RF.pop()}}}));

System.register("chunks:///_virtual/RItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./utils.ts"],(function(t){var e,n,o,i,r,a,c,l,p,s,u,d,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized,r=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){c=t.cclegacy,l=t._decorator,p=t.Label,s=t.Node,u=t.Sprite,d=t.Component},function(t){y=t.formatDate}],execute:function(){var f,h,b,m,g,w,v,B,I,C,T,x,L,k,z;c._RF.push({},"4d5fbLu9T9NPaI3sleDxHUc","RItem",void 0);var R=l.ccclass,D=l.property;t("RItem",(f=R("RItem"),h=D(p),b=D(p),m=D(s),g=D(s),w=D(s),v=D(s),f((C=e((I=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,o(e,"roomIdL",C,i(e)),o(e,"createdAtL",T,i(e)),o(e,"copyBtn",x,i(e)),o(e,"joinBtn",L,i(e)),o(e,"detailViewBtn",k,i(e)),o(e,"deleteBtn",z,i(e)),e.password="",e.copyId=void 0,e}n(e,t);var c=e.prototype;return c.start=function(){this.copyBtn.on("click",this.onCopyId,this)},c.bindData=function(t,e,n,o,i){t.id;var r=t.createdAt,a=(t.name,t.password);this.password=a,this.roomIdL.string="房间号: "+this.password,this.createdAtL.string="创建时间: "+y(1e3*r),this.copyId=i,this.joinBtn.on("click",(function(){e()})),this.detailViewBtn.on("click",(function(){n()})),this.deleteBtn.on("click",(function(){o()}))},c.onCopyId=function(){var t=r(a().mark((function t(){var e=this;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.copyBtn.getComponent(u).grayscale=!0,navigator&&navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(this.password).then((function(){e.copyId&&e.copyId(),setTimeout((function(){e.copyBtn&&(e.copyBtn.getComponent(u).grayscale=!1)}),3e3)})).catch((function(t){e.fallbackCopyTextToClipboard(e.password)})):this.fallbackCopyTextToClipboard(this.password);case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),c.fallbackCopyTextToClipboard=function(t){var e=this,n=document.createElement("textarea");n.value=t,document.body.appendChild(n),n.select();try{document.execCommand("copy"),this.copyId&&this.copyId(),setTimeout((function(){e.copyBtn&&(e.copyBtn.getComponent(u).grayscale=!1)}),3e3)}catch(t){}document.body.removeChild(n)},e}(d)).prototype,"roomIdL",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=e(I.prototype,"createdAtL",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=e(I.prototype,"copyBtn",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=e(I.prototype,"joinBtn",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=e(I.prototype,"detailViewBtn",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=e(I.prototype,"deleteBtn",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=I))||B));c._RF.pop()}}}));

System.register("chunks:///_virtual/RoadMap.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Store.ts","./types.ts"],(function(e){var a,i,r,t,o,n,l,d,c,h,y,u,s,B,g,p;return{setters:[function(e){a=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,t=e.assertThisInitialized},function(e){o=e.cclegacy,n=e._decorator,l=e.Prefab,d=e.Node,c=e.Label,h=e.Vec3,y=e.tween,u=e.instantiate,s=e.Component},function(e){B=e.Store},function(e){g=e.EResultType,p=e.ERoadType}],execute:function(){var C,b,f,P,m,v,k,E,R,w,N,S,D,z,I,T,A,M,W,H,L,_,x,F,j,J,O,U,V,q,G,K,Q,X,Y,Z,$,ee,ae,ie,re,te,oe,ne,le,de,ce;o._RF.push({},"1d39a+JvypDHLn/6Cs56Lw7","RoadMap",void 0);var he=n.ccclass,ye=n.property,ue=B.getInstance(),se={Player:g.Player,Banker:g.Banker,Tie:g.Draw},Be=((C={})[p.Big]={row:6,column:25},C[p.BigEye]={row:6,column:25},C[p.SmallEye]={row:6,column:25},C[p.Cockroach]={row:6,column:25},C[p.Dish]={row:6,column:20},C),ge=e("results",((b={})[p.Big]={board:[],data:[]},b[p.BigEye]={board:[],data:[]},b[p.SmallEye]={board:[],data:[]},b[p.Cockroach]={board:[],data:[]},b[p.Dish]={board:[],data:[]},b));function pe(e,a,i){var r=i.column,t=i.row,o=-1,n=-1,l=-1;a.forEach((function(a){o++,n=o,l=-1,a.colDatas.forEach((function(a){var i=n<r&&l<t;i&&(l+1<t?null!=e[n][l+1]?(n++,0==l&&o++):l++:n++,(i=n<r&&l<t)&&(e[n][l]=a))}))}))}function Ce(e){var a=ge[p.Big].board,i=Be[p.Big],r=[],t=-1,o=g.None,n=[];e.forEach((function(e){var a=e.resultType,i=e.isBankerPair,o=e.isPlayerPair;if(a==g.Banker||a==g.Player)if(-1!=t&&r[t].resultType==g.Draw)r[t].resultType=a,r[t].isBankerPair=i,r[t].isPlayerPair=o;else{var n={resultType:a,drawCounter:0,isBankerPair:i,isPlayerPair:o};r.push(n),t++}else if(a==g.Draw)if(-1==t){var l={resultType:a,drawCounter:1,isBankerPair:!1,isPlayerPair:!1};r.push(l),t++}else r[t].drawCounter+=1;else console.error("updateBigRoad: No support type",a)})),r.forEach((function(e,a){o!=e.resultType&&(o=e.resultType,n.push({colDatas:[]})),n[n.length-1].colDatas.push(e)})),ge[p.Big].data=n,pe(a,n,i),ge[p.Big].data=n}function be(e,a){me(e,a,p.BigEye)}function fe(e,a){me(e,a,p.SmallEye)}function Pe(e,a){me(e,a,p.Cockroach)}function me(e,a,i){var r=1,t=1,o=1,n=2,l=1,d=[[1,1],[2,0]],c=ge[p.BigEye],h=Be[p.BigEye];switch(i){case p.BigEye:o=1,n=2,l=1,d=[[1,1],[2,0]],c=ge[p.BigEye],h=Be[p.BigEye];break;case p.SmallEye:o=1,n=3,l=2,d=[[2,1],[3,0]],c=ge[p.SmallEye],h=Be[p.SmallEye];break;case p.Cockroach:o=1,n=4,l=3,d=[[3,1],[4,0]],c=ge[p.Cockroach],h=Be[p.Cockroach]}if(null==e[d[0][0]][d[0][1]]){if(null==e[d[1][0]][d[1][1]])return;r=d[1][0],t=d[1][1]}else r=d[0][0],t=d[0][1];var y=[],u=g.Draw;a.forEach((function(e,i){e.colDatas.forEach((function(e,d){if(!(r>i||r==i&&t>d)){var c=null;if(0==d){c=function(e,a,i,r){return!(a<Math.max(i,r))&&e[a-i].colDatas.length==e[a-r].colDatas.length}(a,i,o,n)?g.Banker:g.Player}else{var h=function(e,a,i,r){return!(a<r)&&e[a-r].colDatas.length>i}(a,i,d,l);c=function(e,a,i,r){return!(a<r)&&i>=e[a-r].colDatas.length+1}(a,i,d,l)||h?g.Banker:g.Player}c!=u&&(y.push({colDatas:[]}),u=c),y[y.length-1].colDatas.push(c)}}))})),c.data=y,pe(c.board,y,h)}function ve(){for(var e in p)if(!isNaN(Number(e))){var a=parseInt(e),i=Be[e];try{ge[a].board=new Array(i.column);for(var r=0;r<ge[a].board.length;r++)ge[a].board[r]=new Array(i.row).fill(null)}catch(e){console.error(e)}}console.log("finish init")}function ke(e){if(!e||0===e.length)return"No prediction available";var a=e[e.length-1];return a.colDatas[a.colDatas.length-1]===g.Banker?"Banker":"Player"}e("RoadMap",(f=he("RoadMap"),P=ye(l),m=ye(l),v=ye(l),k=ye(l),E=ye(l),R=ye(l),w=ye(l),N=ye(l),S=ye(l),D=ye(l),z=ye(d),I=ye(d),T=ye(d),A=ye(c),M=ye(c),W=ye(c),H=ye(c),L=ye(d),_=ye(d),x=ye(d),F=ye(d),f((O=a((J=function(e){function a(){for(var a,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return a=e.call.apply(e,[this].concat(o))||this,r(a,"roadItem",O,t(a)),r(a,"roadItem1",U,t(a)),r(a,"roadItem2",V,t(a)),r(a,"roadItem3",q,t(a)),r(a,"roadItem4",G,t(a)),r(a,"cell",K,t(a)),r(a,"cell1",Q,t(a)),r(a,"cell2",X,t(a)),r(a,"cell3",Y,t(a)),r(a,"historyItem",Z,t(a)),r(a,"bigRoadContain",$,t(a)),r(a,"topRoadContain",ee,t(a)),r(a,"historyContent",ae,t(a)),r(a,"pWCount",ie,t(a)),r(a,"bWCount",re,t(a)),r(a,"tWCount",te,t(a)),r(a,"tCount",oe,t(a)),r(a,"bigEyeBoyRoadContain",ne,t(a)),r(a,"smallRoadContain",le,t(a)),r(a,"cockroachPigRoadContain",de,t(a)),r(a,"predictionNode",ce,t(a)),a.unsubscribeHistory=void 0,a}i(a,e);var o=a.prototype;return o.onLoad=function(){this.node.active=!1;var e=this.node.getChildByName("content");e.scale=new h(.2,.2,1),this.node.active=!0,y(e).to(.3,{scale:new h(1,1,1)},{easing:"backOut"}).call((function(){})).start()},o.start=function(){var e=this;this.unsubscribeHistory=ue.subscribeToSelector((function(e){return e.history}),(function(){console.log("Players state updated"),e.drawRoadMap()}))},o.drawRoadMap=function(){var e,a,i=this,r=ue.getState().history,t=r.slice(r.length-20,r.length);this.topRoadContain.removeAllChildren(),t.forEach((function(e){var a=u(i.roadItem);a.getChildByName(e.winner).active=!0,i.topRoadContain.addChild(a)})),this.renderBeadRoad(r);var o=r.map((function(e){return{resultType:se[e.winner],isBankerPair:e.bankerPair,isPlayerPair:e.playerPair}}));ve(),Ce(o),be(ge[p.Big].board,ge[p.Big].data),fe(ge[p.Big].board,ge[p.Big].data),Pe(ge[p.Big].board,ge[p.Big].data),this.bigRoadContain.removeAllChildren(),ge[p.Big].board.forEach((function(e,a){var r=u(i.cell);e.forEach((function(e,a){var t=u(i.roadItem1);e&&(e.resultType!=g.Banker&&e.resultType!=g.Player||(t.getChildByName(e.resultType==g.Banker?"Banker":"Player").active=!0),e.drawCounter>0&&(t.getChildByName("number").getComponent(c).string=""+e.drawCounter)),r.addChild(t)})),i.bigRoadContain.addChild(r)})),this.bigEyeBoyRoadContain.removeAllChildren(),ge[p.BigEye].board.forEach((function(e,a){var r=u(i.cell1);e.forEach((function(e,a){var t=u(i.roadItem2);e!=g.Banker&&e!=g.Player||(t.getChildByName(e==g.Banker?"red":"blue").active=!0),r.addChild(t)})),i.bigEyeBoyRoadContain.addChild(r)})),this.smallRoadContain.removeAllChildren(),ge[p.SmallEye].board.forEach((function(e,a){var r=u(i.cell2);e.forEach((function(e,a){var t=u(i.roadItem3);e!=g.Banker&&e!=g.Player||(t.getChildByName(e==g.Banker?"red":"blue").active=!0),r.addChild(t)})),i.smallRoadContain.addChild(r)})),this.cockroachPigRoadContain.removeAllChildren(),ge[p.Cockroach].board.forEach((function(e,a){var r=u(i.cell3);e.forEach((function(e,a){var t=u(i.roadItem4);e!=g.Banker&&e!=g.Player||(t.getChildByName(e==g.Banker?"red":"blue").active=!0),r.addChild(t)})),i.cockroachPigRoadContain.addChild(r)})),ve(),Ce([].concat(o,[{resultType:g.Player,isBankerPair:!1,isPlayerPair:!1}])),be(ge[p.Big].board,ge[p.Big].data),fe(ge[p.Big].board,ge[p.Big].data),Pe(ge[p.Big].board,ge[p.Big].data);var n=((e={})[p.BigEye]=ke(ge[p.BigEye].data),e[p.SmallEye]=ke(ge[p.SmallEye].data),e[p.Cockroach]=ke(ge[p.Cockroach].data),e);this.predictionNode.getChildByPath("Player/Road/BigEye/Banker").active=!1,this.predictionNode.getChildByPath("Player/Road/BigEye/Player").active=!1,"Player"===n[p.BigEye]?this.predictionNode.getChildByPath("Player/Road/BigEye/Player").active=!0:"Banker"===n[p.BigEye]&&(this.predictionNode.getChildByPath("Player/Road/BigEye/Banker").active=!0),this.predictionNode.getChildByPath("Player/Road/SmallEye/Banker").active=!1,this.predictionNode.getChildByPath("Player/Road/SmallEye/Player").active=!1,"Player"===n[p.SmallEye]?this.predictionNode.getChildByPath("Player/Road/SmallEye/Player").active=!0:"Banker"===n[p.SmallEye]&&(this.predictionNode.getChildByPath("Player/Road/SmallEye/Banker").active=!0),this.predictionNode.getChildByPath("Player/Road/Cockroach/Banker").active=!1,this.predictionNode.getChildByPath("Player/Road/Cockroach/Player").active=!1,"Player"===n[p.Cockroach]?this.predictionNode.getChildByPath("Player/Road/Cockroach/Player").active=!0:"Banker"===n[p.Cockroach]&&(this.predictionNode.getChildByPath("Player/Road/Cockroach/Banker").active=!0),ve(),Ce([].concat(o,[{resultType:g.Banker,isBankerPair:!1,isPlayerPair:!1}])),be(ge[p.Big].board,ge[p.Big].data),fe(ge[p.Big].board,ge[p.Big].data),Pe(ge[p.Big].board,ge[p.Big].data);var l=((a={})[p.BigEye]=ke(ge[p.BigEye].data),a[p.SmallEye]=ke(ge[p.SmallEye].data),a[p.Cockroach]=ke(ge[p.Cockroach].data),a);this.predictionNode.getChildByPath("Banker/Road/BigEye/Banker").active=!1,this.predictionNode.getChildByPath("Banker/Road/BigEye/Player").active=!1,"Player"===l[p.BigEye]?this.predictionNode.getChildByPath("Banker/Road/BigEye/Player").active=!0:"Banker"===l[p.BigEye]&&(this.predictionNode.getChildByPath("Banker/Road/BigEye/Banker").active=!0),this.predictionNode.getChildByPath("Banker/Road/SmallEye/Banker").active=!1,this.predictionNode.getChildByPath("Banker/Road/SmallEye/Player").active=!1,"Player"===l[p.SmallEye]?this.predictionNode.getChildByPath("Banker/Road/SmallEye/Player").active=!0:"Banker"===l[p.SmallEye]&&(this.predictionNode.getChildByPath("Banker/Road/SmallEye/Banker").active=!0),this.predictionNode.getChildByPath("Banker/Road/Cockroach/Banker").active=!1,this.predictionNode.getChildByPath("Banker/Road/Cockroach/Player").active=!1,"Player"===l[p.Cockroach]?this.predictionNode.getChildByPath("Banker/Road/Cockroach/Player").active=!0:"Banker"===l[p.Cockroach]&&(this.predictionNode.getChildByPath("Banker/Road/Cockroach/Banker").active=!0)},o.displayDerivedRoad=function(e,a,i,r){var t=a.slice(Math.max(a.length-25,0));e.removeAllChildren(),t.forEach((function(a){var t=u(i);a.forEach((function(a,o){var n=u(r);if(a&&(n.getChildByName(a).active=!0),o>=6){var l=u(i);l.addChild(n),e.addChild(l)}else t.addChild(n)})),e.addChild(t)}))},o.renderBeadRoad=function(e){var a=this;this.historyContent.removeAllChildren();var i=0,r=0,t=0;e.slice(-46).forEach((function(e){var o=u(a.historyItem);o.getChildByName(e.winner).active=!0,"Player"===e.winner?i++:"Banker"===e.winner?r++:t++,e.bankerPair&&(o.getChildByName("BPair").active=!0),e.playerPair&&(o.getChildByName("PPair").active=!0),a.historyContent.addChild(o)})),this.pWCount.string="闲 "+i,this.bWCount.string="庄 "+r,this.tWCount.string="和 "+t,this.tCount.string="局数 "+(i+r+t)},o.onDestroy=function(){this.unsubscribeHistory&&(this.unsubscribeHistory(),console.log("Unsubscribed from history updates"))},o.onClose=function(){this.node.removeFromParent()},a}(s)).prototype,"roadItem",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=a(J.prototype,"roadItem1",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=a(J.prototype,"roadItem2",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=a(J.prototype,"roadItem3",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=a(J.prototype,"roadItem4",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=a(J.prototype,"cell",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=a(J.prototype,"cell1",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=a(J.prototype,"cell2",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=a(J.prototype,"cell3",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=a(J.prototype,"historyItem",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=a(J.prototype,"bigRoadContain",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee=a(J.prototype,"topRoadContain",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae=a(J.prototype,"historyContent",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ie=a(J.prototype,"pWCount",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=a(J.prototype,"bWCount",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te=a(J.prototype,"tWCount",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oe=a(J.prototype,"tCount",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ne=a(J.prototype,"bigEyeBoyRoadContain",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),le=a(J.prototype,"smallRoadContain",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),de=a(J.prototype,"cockroachPigRoadContain",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ce=a(J.prototype,"predictionNode",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=J))||j));o._RF.pop()}}}));

System.register("chunks:///_virtual/RoomInfoView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./utils.ts","./Store.ts"],(function(t){var e,n,o,i,a,r,l,s,c,u,p,d,b,m,y,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized,a=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){l=t.cclegacy,s=t._decorator,c=t.Label,u=t.Node,p=t.Vec3,d=t.tween,b=t.Sprite,m=t.Component},function(t){y=t.onIntScore},function(t){h=t.Store}],execute:function(){var f,g,w,A,v,E,M,x,C,I,k,T,B,z,R,S,V;l._RF.push({},"598dasAcpBKOKfy/xRrmXzb","RoomInfoView",void 0);var D=s.ccclass,L=s.property;h.getInstance(),t("RoomInfoView",(f=D("RoomInfoView"),g=L(c),w=L(c),A=L(c),v=L(c),E=L(c),M=L(u),x=L(u),f((k=e((I=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,o(e,"bankerMinAmountEdit",k,i(e)),o(e,"betMinAmountEdit",T,i(e)),o(e,"betMaxAmountEdit",B,i(e)),o(e,"betAllMaxAmountEdit",z,i(e)),o(e,"passwordEdit",R,i(e)),o(e,"copyBtn",S,i(e)),o(e,"passwordColumn",V,i(e)),e.data=void 0,e.copyId=void 0,e}n(e,t);var l=e.prototype;return l.onLoad=function(){this.node.active=!1;var t=this.node.getChildByName("content");t.scale=new p(.2,.2,1),this.node.active=!0,d(t).to(.3,{scale:new p(1,1,1)},{easing:"backOut"}).start()},l.bindData=function(t){this.data=t,this.bankerMinAmountEdit&&(this.bankerMinAmountEdit.string=y(100*t.bankerMinAmount)),this.betAllMaxAmountEdit&&(this.betAllMaxAmountEdit.string=y(100*t.betAllMaxAmount)),this.betMaxAmountEdit&&(this.betMaxAmountEdit.string=y(100*t.betMaxAmount)),this.betMinAmountEdit&&(this.betMinAmountEdit.string=y(100*t.betMinAmount)),this.passwordEdit&&(this.passwordEdit.string=t.password),t.isPublic&&(this.passwordColumn.active=!1)},l.start=function(){this.copyBtn.on("click",this.onCopyId,this)},l.onCopyId=function(){var t=a(r().mark((function t(){var e=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.copyBtn.getComponent(b).grayscale=!0,navigator&&navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(this.data.password).then((function(){e.copyId&&e.copyId(),setTimeout((function(){e.copyBtn&&(e.copyBtn.getComponent(b).grayscale=!1)}),3e3)})).catch((function(t){e.fallbackCopyTextToClipboard(e.data.password)})):this.fallbackCopyTextToClipboard(this.data.password);case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),l.fallbackCopyTextToClipboard=function(t){var e=this,n=document.createElement("textarea");n.value=t,document.body.appendChild(n),n.select();try{document.execCommand("copy"),this.copyId&&this.copyId(),setTimeout((function(){e.copyBtn&&(e.copyBtn.getComponent(b).grayscale=!1)}),3e3)}catch(t){}document.body.removeChild(n)},l.close=function(){this.node.removeFromParent()},e}(m)).prototype,"bankerMinAmountEdit",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=e(I.prototype,"betMinAmountEdit",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=e(I.prototype,"betMaxAmountEdit",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=e(I.prototype,"betAllMaxAmountEdit",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=e(I.prototype,"passwordEdit",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=e(I.prototype,"copyBtn",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=e(I.prototype,"passwordColumn",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=I))||C));l._RF.pop()}}}));

System.register("chunks:///_virtual/RoomListView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ActionScript.ts","./Store.ts","./RItem.ts","./RoomInfoView.ts","./config.ts"],(function(t){var e,o,n,i,r,a,s,c,l,u,f,m,h,p,b,d,y,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized,r=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){s=t.cclegacy,c=t._decorator,l=t.Node,u=t.Prefab,f=t.instantiate,m=t.Component},function(t){h=t.fetchUserRooms,p=t.fetchDeleteRoom},function(t){b=t.Store},function(t){d=t.RItem},function(t){y=t.RoomInfoView},function(t){g=t.default}],execute:function(){var w,R,v,D,L,j,x,V,I,S,z,P,B,_,C;s._RF.push({},"85cefvPKUNJJKQjdgW7/fP0","RoomListView",void 0);var E=c.ccclass,k=c.property;t("RoomListView",(w=E("RoomListView"),R=k(l),v=k(u),D=k(l),L=k(l),j=k(l),x=k(u),w((S=e((I=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"contain",S,i(e)),n(e,"roomItem",z,i(e)),n(e,"loading",P,i(e)),n(e,"listBox",B,i(e)),n(e,"EmptyBox",_,i(e)),e.lobbyjs=void 0,n(e,"RoomDetailView",C,i(e)),e}o(e,t);var s=e.prototype;return s.start=function(){this.fetchRoomList()},s.fetchRoomList=function(){var t=r(a().mark((function t(){var e,o,n,i,r,s=this;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=b.getInstance(),this.loading.active=!0,t.next=4,h(e.getState().auth.access_token,g.gid);case 4:o=t.sent,n=o.code,i=o.data,this.contain.removeAllChildren(),0===n&&null!=(r=i.list)&&r.length?i.list.forEach((function(t,e){var o=f(s.roomItem);o.getComponent(d).bindData(t,(function(){s.onjoinRoom(t)}),(function(){s.onShowDetailView(t)}),(function(){s.onDelRoom(t.id,o)}),(function(){s.lobbyjs.showSystemLabel("successfully_copied")})),s.contain.addChild(o)})):this.showEmptyRooms(),this.loading.active=!1;case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.onjoinRoom=function(t){this.lobbyjs&&this.lobbyjs.joinRoom(t)},s.onShowDetailView=function(t){var e=f(this.RoomDetailView);e&&(e.getComponent(y).bindData(t),this.node.getParent().addChild(e))},s.onDelRoom=function(){var t=r(a().mark((function t(e,o){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.lobbyjs.showLoading(),n=b.getInstance(),t.next=4,p(e,n.getState().auth.access_token);case 4:0===t.sent.code&&(o.removeFromParent(),this.fetchRoomList()),this.lobbyjs.hideLoading();case 7:case"end":return t.stop()}}),t,this)})));return function(e,o){return t.apply(this,arguments)}}(),s.showEmptyRooms=function(){this.listBox.active=!1,this.EmptyBox.active=!0},s.close=function(){this.node.removeFromParent()},e}(m)).prototype,"contain",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=e(I.prototype,"roomItem",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=e(I.prototype,"loading",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=e(I.prototype,"listBox",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=e(I.prototype,"EmptyBox",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=e(I.prototype,"RoomDetailView",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=I))||V));s._RF.pop()}}}));

System.register("chunks:///_virtual/RoundHistory.ts",["./rollupPluginModLoBabelHelpers.js","cc","./utils.ts","./CardDefinitions.ts","./CardNode.ts","./ToastManager.ts"],(function(e){var i,r,t,a,n,l,s,o,u,d,c,h,p,b,f,y,g;return{setters:[function(e){i=e.applyDecoratedDescriptor,r=e.inheritsLoose,t=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){n=e.cclegacy,l=e._decorator,s=e.Prefab,o=e.Node,u=e.Label,d=e.instantiate,c=e.Vec3,h=e.Component},function(e){p=e.formatTime,b=e.CardListData},function(e){f=e.Suit},function(e){y=e.CardNode},function(e){g=e.ToastManager}],execute:function(){var w,m,v,C,H,S,k,z,D,N,B,P,A,R,V,F,I,J,L,T,_,M,O,U,j;n._RF.push({},"5d9c17fnDFJsJsUHy2QoFAU","RoundHistory",void 0);var x=l.ccclass,Q=l.property,q={4:f.Spades,3:f.Hearts,2:f.Clubs,1:f.Diamonds};e("RoundHistory",(w=x("RoundHistory"),m=Q(s),v=Q([o]),C=Q(o),H=Q(o),S=Q(u),k=Q(u),z=Q(u),D=Q(u),N=Q(u),B=Q(u),P=Q(o),w((V=i((R=function(e){function i(){for(var i,r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return i=e.call.apply(e,[this].concat(n))||this,t(i,"cardPrefab",V,a(i)),t(i,"results",F,a(i)),t(i,"playerHand",I,a(i)),t(i,"bankerHand",J,a(i)),t(i,"playerScore",L,a(i)),t(i,"bankerScore",T,a(i)),t(i,"hash",_,a(i)),t(i,"drawid",M,a(i)),t(i,"period",O,a(i)),t(i,"datetime",U,a(i)),t(i,"verifyBtn",j,a(i)),i.showDetailView=void 0,i.roundId=void 0,i.playerHandCards=[],i.bankerHandCards=[],i}r(i,e);var n=i.prototype;return n.bindData=function(e,i){var r=this,t=(e.id,e.period),a=e.createdAt,n=e.updatedAt,l=e.hash,s=e.bankerSize,o=e.userSize,u=e.status;if(this.roundId=t,this.drawid.string=""+i,this.period.string=""+t,this.hash.string=l,this.datetime.string=p(1e3*a)+"-"+p(1e3*n),2!==u){var h=JSON.parse(o),f=JSON.parse(s),w=[],m=[];this.bankerHand.removeAllChildren(),this.playerHand.removeAllChildren();for(var v=0;v<3;v++){var C=String(h[2+v]);if(C&&(v<2||"1"==h[5])){var H=C.slice(0,1),S=C.slice(1,3);w.push({suit:q[H],rank:Number(S)});var k=d(this.cardPrefab);this.playerHand.addChild(k),k.getComponent(y).SetCardData(.3,v,b[13*q[H]+Number(S)-1]),2==v&&(k.angle=-90,k.position.add(new c(0,-8,0))),k.scale=new c(.25,.25,.25)}var z=String(f[2+v]);if(z&&(v<2||"1"==f[5])){var D=z.slice(0,1),N=z.slice(1,3);m.push({suit:q[D],rank:Number(N)});var B=d(this.cardPrefab);this.bankerHand.addChild(B),B.getComponent(y).SetCardData(.3,v,b[13*q[D]+Number(N)-1]),2==v&&(B.angle=-90,B.position.add(new c(0,-8,0))),B.scale=new c(.25,.25,.25)}}var P=this.calculateScore(w),A=this.calculateScore(m);this.playerHandCards=w,this.bankerHandCards=m,this.playerScore.string=""+P,this.bankerScore.string=""+A,this.results[0]&&(P===A?this.results[0].getChildByName("draw").active=!0:this.results[0].getChildByName(A>P?"win":"lose").active=!0),this.results[1]&&(P===A?this.results[1].getChildByName("draw").active=!0:this.results[1].getChildByName(P>A?"win":"lose").active=!0),this.verifyBtn.on("click",(function(){r.showDetailViewhash()}))}else this.results[0].getChildByName("draw").active=!0,this.results[1].getChildByName("draw").active=!0,this.verifyBtn.on("click",(function(){g.show("开奖失败，还本金")}))},n.calculateScore=function(e){return e.reduce((function(e,i){return e+(i.rank>10?0:i.rank)}),0)%10},n.showDetailViewhash=function(){this.showDetailView&&this.showDetailView(this.hash.string,this.roundId,3===this.playerHandCards.length,3===this.bankerHandCards.length)},i}(h)).prototype,"cardPrefab",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=i(R.prototype,"results",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=i(R.prototype,"playerHand",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=i(R.prototype,"bankerHand",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=i(R.prototype,"playerScore",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=i(R.prototype,"bankerScore",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=i(R.prototype,"hash",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=i(R.prototype,"drawid",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=i(R.prototype,"period",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=i(R.prototype,"datetime",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=i(R.prototype,"verifyBtn",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=R))||A));n._RF.pop()}}}));

System.register("chunks:///_virtual/Setting.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SoundContoller.ts"],(function(e){var i,t,n,o,s,c,r,a,l,u,g,d;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){s=e.cclegacy,c=e._decorator,r=e.Toggle,a=e.Node,l=e.Vec3,u=e.tween,g=e.Component},function(e){d=e.SoundController}],execute:function(){var h,p,f,v,k,m,y,C,T;s._RF.push({},"aabc9xKdexLErwL1xM04SqP","Setting",void 0);var b=c.ccclass,S=c.property;e("Setting",(h=b("Setting"),p=S(r),f=S(r),v=S({type:[a]}),h((y=i((m=function(e){function i(){for(var i,t=arguments.length,s=new Array(t),c=0;c<t;c++)s[c]=arguments[c];return i=e.call.apply(e,[this].concat(s))||this,n(i,"musicToggle",y,o(i)),n(i,"soundToggle",C,o(i)),n(i,"nodekaiqi",T,o(i)),i}t(i,e);var s=i.prototype;return s.onLoad=function(){this.node.active=!1;var e=this.node.getChildByName("content");e.scale=new l(.2,.2,1),this.node.active=!0,u(e).to(.3,{scale:new l(1,1,1)},{easing:"backOut"}).call((function(){})).start();var i=d.getInstance();this.musicToggle.isChecked=!i.isBgMusicPlaying,this.nodekaiqi[0].active=!this.musicToggle.isChecked,this.soundToggle.isChecked=!i.isSoundEnabled,this.nodekaiqi[1].active=!this.soundToggle.isChecked},s.onChangeswitch=function(e,i){if("Music"===i){var t=!this.musicToggle.isChecked;this.nodekaiqi[0].active=t,d.getInstance().toggleBgMusic(!this.musicToggle.isChecked)}if("Sound"===i){var n=!this.soundToggle.isChecked;this.nodekaiqi[1].active=n,d.getInstance().toggleSound(!this.soundToggle.isChecked)}},s.onClose=function(){this.node.removeFromParent()},i}(g)).prototype,"musicToggle",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=i(m.prototype,"soundToggle",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=i(m.prototype,"nodekaiqi",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=m))||k));s._RF.pop()}}}));

System.register("chunks:///_virtual/SlideContent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Socket.ts"],(function(t){var e,n,o,i,s,a,r,h,c,u,d,l,g,p,f,v,y,S,T;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized,s=t.asyncToGenerator,a=t.regeneratorRuntime,r=t.createForOfIteratorHelperLoose},function(t){h=t.cclegacy,c=t._decorator,u=t.Prefab,d=t.Vec3,l=t.Node,g=t.director,p=t.UIOpacity,f=t.tween,v=t.Component,y=t.instantiate,S=t.Label},function(t){T=t.Socket}],execute:function(){var m,b,w,C,D;h._RF.push({},"dbbb0Vg06lE5ZxKsWCllXBp","SlideContent",void 0);var E=c.ccclass,O=c.property;t("SlideContent",(m=E("SlideContent"),b=O(u),m((D=e((C=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s))||this,o(e,"GameItem",D,i(e)),e.slideDuration=.9,e.pageNum=0,e.isDragging=!1,e.initialPos=new d,e.dragStartPos=new d,e.dragOffset=new d,e.slideWidth=900,e.dragThreshold=200,e.enableTable=!0,e.totalSlideCount=0,e.LobbyJs=void 0,e.updateHandler=void 0,e}n(e,t);var h=e.prototype;return h.start=function(){this.node.on(l.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(l.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(l.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(l.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.node.on(l.EventType.MOUSE_DOWN,this.onMouseDown,this),this.node.on(l.EventType.MOUSE_MOVE,this.onMouseMove,this),this.node.on(l.EventType.MOUSE_UP,this.onMouseUp,this),this.node.on(l.EventType.MOUSE_LEAVE,this.onMouseUp,this),this.isDragging=!1},h.onDestroy=function(){clearInterval(this.updateHandler)},h.addItems=function(){var t=s(a().mark((function t(e,n,o,i){var h,c,u,d,g=this;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:h=function(){var t=s(a().mark((function t(){var n,o,i,s;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.getInstance().getRooms();case 2:if(n=t.sent,!g.node){t.next=10;break}o=a().mark((function t(){var e,o,i,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=s.value,(o=g.node.getChildByName(String(e.id)))&&(r=(null==(i=n.find((function(t){return Number(t.roomId.split("_")[0])==e.id})))?void 0:i.playerCount)||0,o.getChildByPath("bottom/Badge/PlayerCount").getComponent(S).string="人数: "+r);case 3:case"end":return t.stop()}}),t)})),i=r(e);case 6:if((s=i()).done){t.next=10;break}return t.delegateYield(o(),"t0",8);case 8:t.next=6;break;case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),c=a().mark((function t(){var e,n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=d.value,(n=y(g.GameItem)).name=""+e.id,n.getChildByPath("bottom/Label").getComponent(S).string=""+e.name,n.getChildByPath("bottom/Badge/PlayerCount").getComponent(S).string="人数: 0",g.node.addChild(n),n.on(l.EventType.TOUCH_START,(function(t){t.preventSwallow=!0})),n.on(l.EventType.TOUCH_MOVE,(function(t){t.preventSwallow=!0})),n.on(l.EventType.TOUCH_END,(function(t){t.preventSwallow=!0})),n.on("click",(function(){g.enableTable&&(localStorage.setItem("roomData",JSON.stringify(e)),g.LobbyJs.showLoading(),g.switchScene("baccarat"))}));case 11:case"end":return t.stop()}}),t)})),u=r(e);case 4:if((d=u()).done){t.next=8;break}return t.delegateYield(c(),"t0",6);case 6:t.next=4;break;case 8:this.updateHandler=setInterval(h,1e4),h(),this.onSlideIn(n,o,i);case 11:case"end":return t.stop()}}),t,this)})));return function(e,n,o,i){return t.apply(this,arguments)}}(),h.switchScene=function(t){g.loadScene(t)},h.onSlideIn=function(t,e,n){this.node.position=new d(e?900:-900,0,0),this.pageNum=t;var o=this.node.getComponent(p);o&&(o.opacity=0),n?(f(this.node).to(this.slideDuration,{position:new d(0,0,0)},{easing:"sineOut"}).start(),f(o).to(this.slideDuration,{opacity:255}).start()):(this.node.position=new d(0,0,0),o.opacity=255)},h.onSlideOut=function(t,e){var n=this,o=new d(t?-900:900,0,0),i=this.node.getComponent(p);e?(f(this.node).to(this.slideDuration,{position:o},{easing:"sineOut"}).call((function(){n.node.removeFromParent()})).start(),i&&f(i).to(this.slideDuration,{opacity:0}).start()):(this.node.position=o,i.opacity=0)},h.onTouchStart=function(t){var e=t.getUILocation();this.onDragStart(new d(e.x,e.y,0))},h.onMouseDown=function(t){var e=new d(t.getUILocationX(),t.getUILocationY(),0);this.onDragStart(e)},h.onDragStart=function(t){this.isDragging=!0,this.initialPos.set(this.node.position),this.dragStartPos.set(t)},h.onTouchMove=function(t){var e=t.getUILocation();this.onDragMove(new d(e.x,e.y,0))},h.onMouseMove=function(t){if(this.isDragging){var e=new d(t.getUILocationX(),t.getUILocationY(),0);this.onDragMove(e)}},h.onDragMove=function(t){this.isDragging&&(Math.abs(t.x-this.dragStartPos.x)>100&&(this.enableTable=!1),this.dragOffset.set(t.x-this.dragStartPos.x,0,0),this.node.setPosition(this.initialPos.x+this.dragOffset.x,this.initialPos.y,this.initialPos.z))},h.onTouchEnd=function(t){this.onDragEnd()},h.onMouseUp=function(t){this.onDragEnd()},h.onDragEnd=function(){this.isDragging&&(this.isDragging=!1,this.enableTable=!0,this.snapToClosestSlide())},h.snapToClosestSlide=function(){this.dragOffset.x>this.dragThreshold&&this.pageNum>0?this.LobbyJs.onClickSlideBtn(this.pageNum-1):this.dragOffset.x<-this.dragThreshold&&this.pageNum+1<this.totalSlideCount?this.LobbyJs.onClickSlideBtn(this.pageNum+1):f(this.node).to(this.slideDuration,{position:new d(0,0,0)},{easing:"sineOut"}).start()},e}(v)).prototype,"GameItem",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=C))||w));h._RF.pop()}}}));

System.register("chunks:///_virtual/Socket.ts",["./rollupPluginModLoBabelHelpers.js","cc","./colyseus.mjs_cjs=&original=.js","./config.ts","./colyseus.js"],(function(t){var n,e,r,c,o;return{setters:[function(t){n=t.asyncToGenerator,e=t.regeneratorRuntime},function(t){r=t.cclegacy},null,function(t){c=t.default},function(t){o=t.default}],execute:function(){r._RF.push({},"3f200suWYdAE5BACml1ApWx","Socket",void 0),t("Socket",function(){function t(){this.client=void 0,this.rooms=[],this.client=new o.Client(c.colyseusSocket)}t.getInstance=function(){return t.instance||(t.instance=new t),t.instance};var r=t.prototype;return r.getRooms=function(){var t=n(e().mark((function t(n){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===n&&(n="baccarat"),t.prev=1,this.client){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,this.client.getAvailableRooms(n);case 6:return this.rooms=t.sent,t.abrupt("return",this.rooms.map((function(t){var n;return{roomId:t.room_id,playerCount:(null==(n=t.metadata)?void 0:n.playerCount)||0}})));case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",[]);case 13:case"end":return t.stop()}}),t,this,[[1,10]])})));return function(n){return t.apply(this,arguments)}}(),r.disconnect=function(){this.client&&(this.client=null,t.instance=null)},t}()).instance=void 0,r._RF.pop()}}}));

System.register("chunks:///_virtual/SoundContoller.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var o,e,u,n,t,s,r,l,c,a,d,p,m;return{setters:[function(i){o=i.applyDecoratedDescriptor,e=i.inheritsLoose,u=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){t=i.cclegacy,s=i._decorator,r=i.AudioSource,l=i.AudioClip,c=i.CCFloat,a=i.game,d=i.resources,p=i.warn,m=i.Component}],execute:function(){var h,S,f,g,b,y,C,v,M,E,V,w,z,A,B,D;t._RF.push({},"eac5aMH8IRORr4tdN5MRacj","SoundContoller",void 0);var I=s.ccclass,P=s.property;i("SoundController",(h=I("SoundController"),S=P({type:r}),f=P({type:r}),g=P({type:[l]}),b=P(c),y=P(c),C=P(l),h(((D=function(i){function o(){for(var o,e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return o=i.call.apply(i,[this].concat(t))||this,u(o,"musicSource",E,n(o)),u(o,"soundSource",V,n(o)),u(o,"audioClips",w,n(o)),u(o,"musicVolume",z,n(o)),u(o,"soundVolume",A,n(o)),u(o,"bgMusicClip",B,n(o)),o.isBgMusicPlaying=!0,o.isSoundEnabled=!0,o.disable=!1,o}e(o,i);var t=o.prototype;return t.onLoad=function(){var i=this;o.instance?this.destroy():(o.instance=this,this.musicSource=this.node.addComponent(r),this.soundSource=this.node.addComponent(r),this.musicSource.playOnAwake=!1,this.soundSource.playOnAwake=!1,this.isBgMusicPlaying="1"==localStorage.getItem("musicEnable"),this.isSoundEnabled="1"==localStorage.getItem("soundEnable"),a.addPersistRootNode(this.node),d.loadDir("104/Audio",l,(function(o,e){o?p("self.node.Error.audioClips.is.null"):(i.audioClips=[].concat(i.audioClips,e),i.toggleBgMusic(i.isBgMusicPlaying))})),d.loadDir("GameFrame/Audio",l,(function(o,e){o?p("self.node.Error.audioClips.is.null"):i.audioClips=[].concat(i.audioClips,e)})),d.loadDir("GameFrame/Audio/Baccarat",l,(function(o,e){o?p("self.node.Error.audioClips.is.null"):i.audioClips=[].concat(i.audioClips,e)})))},o.getInstance=function(){return o.instance},t.onDestroy=function(){this.soundSource.stop(),this.musicSource.stop(),o.instance=void 0},t.onEnable=function(){this.disable=!1},t.onDisable=function(){this.disable=!0},t.playSound=function(i,o){if(void 0===o&&(o=!1),this.isSoundEnabled&&this.soundSource&&!this.disable){var e=this.audioClips.find((function(o){return o.name===i}));e&&(this.soundSource.stop(),this.soundSource.loop=o,this.soundSource.clip=e,this.soundSource.volume=this.soundVolume,this.soundSource.playOneShot(e,1))}},t.setVolume=function(i){this.musicSource&&(this.musicSource.volume=i),this.soundSource&&(this.soundSource.volume=i)},t.setMusicVolume=function(i){this.musicVolume=i,this.musicSource&&(this.musicSource.volume=i)},t.setSoundVolume=function(i){this.soundVolume=i,this.soundSource&&(this.soundSource.volume=i)},t.toggleBgMusic=function(i){this.musicSource&&(this.isBgMusicPlaying=i,this.bgMusicClip&&(this.musicSource.playing&&!i?this.musicSource.stop():!this.musicSource.playing&&i&&(this.musicSource.loop=!0,this.musicSource.clip=this.bgMusicClip,this.musicSource.volume=this.musicVolume,this.musicSource.play())),localStorage.setItem("musicEnable",i?"1":"0"))},t.toggleSound=function(i){this.isSoundEnabled=i,localStorage.setItem("soundEnable",i?"1":"0")},o}(m)).instance=void 0,E=o((M=D).prototype,"musicSource",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=o(M.prototype,"soundSource",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=o(M.prototype,"audioClips",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=o(M.prototype,"musicVolume",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),A=o(M.prototype,"soundVolume",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),B=o(M.prototype,"bgMusicClip",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=M))||v));t._RF.pop()}}}));

System.register("chunks:///_virtual/SplashSreen.ts",["./rollupPluginModLoBabelHelpers.js","cc","./config.ts"],(function(e){var r,n,t,o,i,a,s,l,c,u,p;return{setters:[function(e){r=e.applyDecoratedDescriptor,n=e.inheritsLoose,t=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,s=e.ProgressBar,l=e.Label,c=e.director,u=e.Component},function(e){p=e.default}],execute:function(){var d,h,g,f,S,b,y;i._RF.push({},"94f313VS8JCgrxW7bzvMB8I","SplashSreen",void 0);var v=a.ccclass,x=a.property;e("SplashSreen",(d=v("SplashSreen"),h=x(s),g=x(l),d((b=r((S=function(e){function r(){for(var r,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=e.call.apply(e,[this].concat(i))||this,t(r,"progressBar",b,o(r)),t(r,"loadingLabel",y,o(r)),r.scenesToPreload=["lobby",p.gname],r.currentSceneIndex=0,r}n(r,e);var i=r.prototype;return i.onLoad=function(){this.startLoading(),document&&(document.title=p.name)},i.startLoading=function(){this.preloadNextScene()},i.preloadNextScene=function(){var e=this;if(this.currentSceneIndex>=this.scenesToPreload.length)c.loadScene("lobby");else{var r=this.scenesToPreload[this.currentSceneIndex];c.preloadScene(r,(function(r,n){e.updateProgress(r/n)}),(function(){e.currentSceneIndex++,e.preloadNextScene()}))}},i.updateProgress=function(e){this.progressBar&&(this.progressBar.progress=e),this.loadingLabel&&(this.loadingLabel.string="正在加载 "+(this.currentSceneIndex+1)+"/"+this.scenesToPreload.length+"... "+Math.floor(100*e)+"%")},r}(u)).prototype,"progressBar",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=r(S.prototype,"loadingLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=S))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/Store.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,a;return{setters:[function(e){t=e.extends},function(e){a=e.cclegacy}],execute:function(){a._RF.push({},"71625rbqYNCwLiqi5QdHvnf","Store",void 0),e("Store",function(){function e(){this.state=void 0,this.listeners=[],this.selectorListeners=new Map,this.state={room:{id:1,name:"1号桌",cover:"http://43.154.106.155:5006/upload/game/1/2e7ba734a1e63dde4582f399d6401298.png",catId:2,catName:"中级场",isPublic:1,password:"",status:1,sort:1,createdAt:0,updatedAt:0,betMinAmount:1,betMaxAmount:50,maxBetAmount:500,allMaxBetAmount:1500,bankerStepAmount:10,bankerMinAmount:0,chip:[100,200,500,1e3,5e3],username:""},auth:{user:{userId:"Undefind",balance:0,username:"test",nickname:"test",avatar:"default",VIP:0},access_token:"",isLogin:!1},players:[],bankers:[],roundinfo:{bankerId:void 0,period:0,round:0,amount:0,roundCount:0},metadata:{room_id:"",WAIT_TIME:5e3,BETTING_TIME:15e3,CALCULATION_TIME:15e3,PLAYER_COUNT:0},history:[]}}e.getInstance=function(){return e.instance||(e.instance=new e),e.instance};var a=e.prototype;return a.getState=function(){return this.state},a.dispatch=function(e){var a=t({},this.state);this.state=this.reducer(this.state,e),this.notifyListeners(a)},a.notifyListeners=function(e){var t=this;this.listeners.forEach((function(e){return e()})),this.selectorListeners.forEach((function(a,r){a.forEach((function(a){a(e)!==a(t.state)&&r()}))}))},a.subscribe=function(e){var t=this;return this.listeners.push(e),function(){t.listeners=t.listeners.filter((function(t){return t!==e}))}},a.subscribeToSelector=function(e,t){var a=this,r=this.selectorListeners.get(t)||[];return r.push(e),this.selectorListeners.set(t,r),t(),function(){var r,n=(null==(r=a.selectorListeners.get(t))?void 0:r.filter((function(t){return t!==e})))||[];0===n.length?a.selectorListeners.delete(t):a.selectorListeners.set(t,n)}},a.reducer=function(e,a){switch(a.type){case"SET_ROOM":return t({},e,{room:a.payload});case"SET_USER_TOKEN":return t({},e,{auth:t({},e.auth,{access_token:a.payload,isLogin:!0})});case"SET_STATE":return t({},e,{roundinfo:{bankerId:a.payload.bankerId,amount:a.payload.amount,round:a.payload.round,roundCount:a.payload.roundCount,period:a.payload.period}});case"SET_PLAYERS":return t({},e,{players:a.payload});case"ADD_PLAYER":return t({},e,{players:[].concat(e.players,[a.payload])});case"DEL_PLAYER":return t({},e,{players:e.players.filter((function(e){return e.userId!==a.payload}))});case"SET_BANKERS":return t({},e,{bankers:a.payload});case"ADD_BANKER":return t({},e,{bankers:[].concat(e.bankers,[a.payload])});case"DEL_BANKER":return t({},e,{bankers:e.bankers.filter((function(e){return e.id!==a.payload}))});case"UPDATE_BALANCES":var r=e.auth.user,n=a.payload.findIndex((function(e){return e.userId===r.userId}));return-1!==n&&(r=t({},r,{balance:a.payload[n].balance})),t({},e,{players:e.players.map((function(e){var r=a.payload.findIndex((function(t){return t.userId===e.userId}));return-1!==r?t({},e,{balance:a.payload[r].balance}):t({},e)})),auth:t({},e.auth,{user:r})});case"UPDATE_BALANCE":var s=e.auth.user;return a.payload.userId===e.auth.user.userId&&(s=t({},s,{balance:a.payload.balance})),t({},e,{players:e.players.map((function(e){return a.payload.userId===e.userId?t({},e,{balance:a.payload.balance}):t({},e)})),auth:t({},e.auth,{user:s})});case"SET_USER":case"USE_UPDATE":return t({},e,{auth:t({},e.auth,{user:a.payload})});case"SET_METADATA":return t({},e,{metadata:a.payload});case"SET_HISTORY":return t({},e,{history:a.payload});case"ADD_HISTORY":return t({},e,{history:[].concat(e.history,[a.payload])});default:return e}},e}()).instance=void 0,a._RF.pop()}}}));

System.register("chunks:///_virtual/TimeCount.ts",["./rollupPluginModLoBabelHelpers.js","cc","./types.ts","./SoundContoller.ts"],(function(t){var e,i,n,o,s,a,r,l,u,c,p,h,m,f,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,a=t._decorator,r=t.Label,l=t.Prefab,u=t.Node,c=t.tween,p=t.Vec3,h=t.instantiate,m=t.Component},function(t){f=t.GameStatus},function(t){d=t.SoundController}],execute:function(){var b,T,g,y,A,v,w,L,C,S,I;s._RF.push({},"8c8e9/MBFlDA7dzZmyjVEWt","TimeCount",void 0);var k=a.ccclass,G=a.property;t("TimeCount",(b=k("TimeCount"),T=G(r),g=G(r),y=G(l),A=G(u),b((L=e((w=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s))||this,n(e,"statusLabel",L,o(e)),n(e,"timeLabel",C,o(e)),n(e,"pfTimeSkeleton",S,o(e)),n(e,"nodeAction",I,o(e)),e.status=f.STOPPED,e.targetTime=0,e.ping=!1,e.isspink=!1,e}i(e,t);var s=e.prototype;return s.setStatus=function(t,e){this.targetTime=t,this.showGameStatus(e),this.status=e},s.update=function(t){var e=this,i=this.targetTime-Date.now();if(i>0&&(this.timeLabel.string=""+(Math.floor(i/1e3)+1),i<3100&&!this.ping&&this.status!==f.WAITING)){var n=c(this.node).delay(.15).by(.2,{position:new p(0,5,0)}).by(.2,{position:new p(0,-5,0)}).call((function(){e.status!==f.CALCULATING&&(d.getInstance().playSound("TimeDown"),e.isspink||e.showTimeAction())}));this.ping=!0,n.start(),setTimeout((function(){e.ping=!1}),1050)}},s.showTimeAction=function(){var t=this;this.nodeAction.removeAllChildren();var e=h(this.pfTimeSkeleton);this.isspink=!0,this.nodeAction.addChild(e),setTimeout((function(){t.node&&(t.isspink=!1,t.nodeAction.removeAllChildren())}),3e3)},s.showGameStatus=function(t){switch(t){case f.WAITING:return void(this.statusLabel.string="休息一下");case f.BETTING:return void(this.statusLabel.string="下注时间");case f.CALCULATING:return void(this.statusLabel.string="正在开牌")}},e}(m)).prototype,"statusLabel",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=e(w.prototype,"timeLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=e(w.prototype,"pfTimeSkeleton",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=e(w.prototype,"nodeAction",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=w))||v));s._RF.pop()}}}));

System.register("chunks:///_virtual/ToastManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./utils.ts"],(function(t){var n,e,a,i,o,r,s,c,l,u,p,f,d,y,b,g;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,a=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,s=t.Prefab,c=t.Node,l=t.warn,u=t.instantiate,p=t.Label,f=t.Vec3,d=t.UIOpacity,y=t.tween,b=t.Component},function(t){g=t.ExceptionMsgConvert}],execute:function(){var h,v,w,m,M,P,T,C;o._RF.push({},"0ff77xFz5NOFoUNA1nbah0c","ToastManager",void 0);var z=r.ccclass,L=r.property;t("ToastManager",(h=z("ToastManager"),v=L(s),w=L(c),h(((C=function(t){function n(){for(var n,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return n=t.call.apply(t,[this].concat(o))||this,a(n,"toastPrefab",P,i(n)),a(n,"contain",T,i(n)),n}e(n,t);var o=n.prototype;return o.onLoad=function(){n.instance?this.destroy():n.instance=this},n.configure=function(t,e){n.instance?(n.instance.contain=t,n.instance.toastPrefab=e):l("LoadingManager instance is not initialized.")},n.show=function(t,e){void 0===e&&(e=2),n.instance?n.instance.displayToast(g(t),e):l("ToastManager instance is not available.")},o.displayToast=function(t,n){var e=u(this.toastPrefab),a=e.getComponentInChildren(p);a?a.string=t:l("Label component not found in toast prefab."),this.contain.addChild(e),e.setPosition(0,0,0),e.setScale(new f(.9,.9,.9));var i=e.getComponent(d);i||(i=e.addComponent(d)),i.opacity=0;y(e).to(.2,{scale:new f(1,1,1)}).start(),y(i).to(.2,{opacity:255}).start(),y(e).by(.5,{position:new f(0,100,0)}).delay(n).to(.5,{scale:new f(0,0,0)}).call((function(){return e.destroy()})).start()},n}(b)).instance=void 0,P=n((M=C).prototype,"toastPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=n(M.prototype,"contain",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=M))||m));o._RF.pop()}}}));

System.register("chunks:///_virtual/types.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"9b3c9vqyepH9btcFz4lVA3V","types",void 0);e("GameStatus",function(e){return e[e.STOPPED=0]="STOPPED",e[e.WAITING=1]="WAITING",e[e.BETTING=2]="BETTING",e[e.CALCULATING=3]="CALCULATING",e}({})),e("GameState",(function(){this.period=void 0,this.bankerId=void 0,this.amount=void 0,this.round=void 0,this.roundCount=void 0})),e("ERoadType",function(e){return e[e.Big=0]="Big",e[e.BigEye=1]="BigEye",e[e.SmallEye=2]="SmallEye",e[e.Dish=3]="Dish",e[e.Cockroach=4]="Cockroach",e}({})),e("EResultType",function(e){return e[e.None=0]="None",e[e.Banker=1]="Banker",e[e.Player=2]="Player",e[e.Draw=3]="Draw",e}({})),e("EEyeRoadType",function(e){return e[e.Big=0]="Big",e[e.Small=1]="Small",e[e.Cockroach=2]="Cockroach",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/utils.ts",["cc","./Languages.ts"],(function(t){var n,e;return{setters:[function(t){n=t.cclegacy},function(t){e=t.default}],execute:function(){n._RF.push({},"b1109QYz8FOd4nS99LF6CZ5","utils",void 0);t("onIntScore",(function(t){return Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(r(t))}));var r=function(t){return Math.floor(t)/100};t("formatChipValue",(function(t){return t>=1e4?Math.floor(t/1e4)+"万":""+t})),t("getUrlParams",(function(){var t={},n=window.location.search;new URLSearchParams(n).forEach((function(n,e){console.log("params",e,n),t[e]=n}));var e=window.location.pathname+window.location.hash;return history.replaceState(null,"",e),t})),t("formatTime",(function(t){var n=new Date(t);return n.getHours()+":"+n.getMinutes()+":"+n.getSeconds()})),t("formatDate",(function(t){var n=new Date(t);return n.getFullYear()+":"+(n.getMonth()+1)+":"+n.getDate()})),t("CardListData",[1,2,3,4,5,6,7,8,9,10,11,12,13,17,18,19,20,21,22,23,24,25,26,27,28,29,33,34,35,36,37,38,39,40,41,42,43,44,45,49,50,51,52,53,54,55,56,57,58,59,60,61,65,66]),t("ExceptionMsgConvert",(function(t){return e[t]?""+e[t]:t}));n._RF.pop()}}}));

System.register("chunks:///_virtual/VerifyView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CardNode.ts","./CardDefinitions.ts","./utils.ts"],(function(e){var t,i,r,n,a,o,l,s,c,u,h,d,p,f,b,g,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Node,s=e.RichText,c=e.Label,u=e.Prefab,h=e.Vec3,d=e.tween,p=e.instantiate,f=e.Component},function(e){b=e.CardNode},function(e){g=e.Suit},function(e){y=e.CardListData}],execute:function(){var C,v,m,P,w,B,N,k,L,D,I,z,V,F,S,_,j;a._RF.push({},"8bb3073NnFNHJ3lYS9Xf0bN","VerifyView",void 0);var H=o.ccclass,R=o.property,x={4:g.Spades,3:g.Hearts,2:g.Clubs,1:g.Diamonds},A=["#1DAC00","#430001","#F9009D","#912D18","#2200FF","#005D27"];e("VerifyView",(C=H("VerifyView"),v=R(l),m=R(l),P=R(l),w=R(l),B=R(s),N=R(c),k=R(u),C((I=t((D=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,r(t,"PlayerCards",I,n(t)),r(t,"BankerCards",z,n(t)),r(t,"PlayerInfos",V,n(t)),r(t,"BankerInfos",F,n(t)),r(t,"hashLabel",S,n(t)),r(t,"period",_,n(t)),r(t,"description",j,n(t)),t}i(t,e);var a=t.prototype;return a.start=function(){this.node.active=!1;var e=this.node.getChildByName("content");e.scale=new h(.2,.2,1),this.node.active=!0,d(e).to(.3,{scale:new h(1,1,1)},{easing:"backOut"}).start()},a.bindData=function(e,t,i,r){try{for(var n=e.slice(0,15),a=e.slice(15,27),o=e.slice(27,e.length),l=[],s=[],u=0;u<6;u++)s.push(a.slice(2*u,2*u+2));this.hashLabel.string=""+n+s.map((function(e,t){return"<color="+A[t]+">"+e+"</color>"})).join("")+o,this.period.string=""+t;for(var d=[],p=15;p<e.length;p++)d.push(parseInt(e[p],16)),l.push(e[p]);for(var f=[],g=0,C=1;C<=4;C++)for(var v=1;v<=13;v++)f[g]=100*C+v,g++;for(var m=0,P=0,w=function(e,t,i){t.getComponent(b).SetCardData(.4,i,y[13*x[e.suit]+Number(e.rank)-1]),t.scale=new h(.35,.35,.35)},B=0;B<6;B++){var N=void 0,k=!1;B%2==0&&(k=!0,N=this.PlayerInfos.children[m]),B%2==1&&(N=this.BankerInfos.children[P]);var L=2*B,D=16*d[L]+d[L+1],I=255%(52-B),z=0,V=0,F=0,S=[];if(0!==I){F=48-(52-B-I);for(var _=48;_>F;_--)V+=d[_],S.unshift(l[_]);z=V%(52-B-I)}var j=S.join(""),H=(D+z)%(52-B),R=String(f[H]),T={suit:Number(R.slice(0,1)),rank:Number(R.slice(1,3))};f.splice(H,1),k?(m<2||i?w(T,this.PlayerCards.children[m],m):(this.PlayerCards.children[m].active=!1,this.PlayerInfos.children[m].active=!1),m++):(P<2||r?w(T,this.BankerCards.children[P],P):(this.BankerCards.children[P].active=!1,this.BankerInfos.children[P].active=!1),P++),N.getChildByPath("Node/Label/Label-005").getComponent(c).string=""+s[B],N.getChildByPath("Node/Label").getComponent(c).string="(16×"+d[L]+"+"+d[L+1]+")="+D,N.getChildByPath("Node/Label-001").getComponent(c).string=0==I?"(15×16+15)%"+(52-B)+"="+I:52-B+"-(15×16+15)%"+(52-B)+"="+(52-B-I),N.getChildByPath("Node/Label-002").getComponent(c).string=(j.length>10?j.slice(0,3)+"..."+j.slice(j.length-3,j.length):j)+"和为"+V,N.getChildByPath("Node/Label-003").getComponent(c).string=V+"%"+(52-B-I)+"="+z,N.getChildByPath("Node/Label-004").getComponent(c).string="("+D+"+"+z+")%"+(52-B)+"="+H}}catch(e){console.log(e)}},a.calculateScore=function(e){return e.reduce((function(e,t){return e+(t.rank>10?0:t.rank)}),0)%10},a.onClose=function(){this.node.removeFromParent()},a.showDescription=function(){if(this.description){var e=p(this.description);this.node.parent.addChild(e)}},t}(f)).prototype,"PlayerCards",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(D.prototype,"BankerCards",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=t(D.prototype,"PlayerInfos",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(D.prototype,"BankerInfos",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=t(D.prototype,"hashLabel",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(D.prototype,"period",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=t(D.prototype,"description",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=D))||L));a._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});